{"id":"people_notifier","script":"//* TITLE Blog Tracker **//\n//* VERSION 0.6.5 **//\n//* DESCRIPTION Track people like tags **//\n//* DEVELOPER new-xkit **//\n//* DETAILS Blog Tracker lets you track blogs like you can track tags. Add them on your dashboard, and it will let you know how many new posts they've made the last time you've checked their blogs, or if they've changed their URLs.<br><br>Please be aware that the more blogs you add, the longer it will take to track them all. **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.people_notifier = new Object({\n\n\trunning: false,\n\tapiKey: \"SGNopnlvTovnqk902dJIjDAvxcZgCDBlPzaaw310IQSupIzkHb\",\n\n\tblogs: [],\n\n\tpreferences: {\n\t\t\"view_on_dash\": {\n\t\t\ttext: \"Use View on Dash to open blogs (requires View On Dash to be installed)\",\n\t\t\tvalue: false,\n\t\t\tdefault: false\n\t\t},\n\n\t\t\"open_new_tab\": {\n\t\t\ttext: \"Open tumblr blogs in a new window\",\n\t\t\tvalue: false,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tmax_tracks: 30,\n\tcheck_interval: 600000,\n\n\tframe_run: function() {\n\n\t\tvar username = $(\"#tumblelog_name\").attr(\"data-tumblelog-name\");\n\t\tconsole.log(\"people-notifier -> in blog of \" + username + \", checking to see if we should mark it checked.\");\n\n\t\tXKit.extensions.people_notifier.load_blogs();\n\n\t\tif (XKit.extensions.people_notifier.check_if_in_list(username) !== true) {console.log(\"|-- not in person track list.\"); return; }\n\n\t\tfor (var person in XKit.extensions.people_notifier.blogs) {\n\t\t\tif (XKit.extensions.people_notifier.blogs[person].url === username) {\n\t\t\t\tconsole.log(\"|-- found and replaced last_check.\");\n\t\t\t\tXKit.extensions.people_notifier.blogs[person].last_check = new Date().getTime();\n\t\t\t\tXKit.extensions.people_notifier.blogs[person].count = 0;\n\t\t\t\tXKit.extensions.people_notifier.save();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t},\n\n\tset_read_count: function(username, count) {\n\n\t\tfor (var person in XKit.extensions.people_notifier.blogs) {\n\t\t\tif (XKit.extensions.people_notifier.blogs[person].url === username) {\n\t\t\t\tXKit.extensions.people_notifier.blogs[person].count = count;\n\t\t\t\tXKit.extensions.people_notifier.save();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t},\n\n\tload_blogs: function() {\n\n\t\tvar blogs_str = XKit.storage.get(\"people_notifier\", \"blogs\", \"\");\n\n\t\tvar blogs_obj;\n\n\t\ttry {\n\t\t\tblogs_obj = JSON.parse(blogs_str);\n\t\t} catch (e) {\n\t\t\tblogs_obj = [];\n\t\t}\n\n\t\tthis.blogs = blogs_obj;\n\n\t\tconsole.log(this.blogs);\n\n\t},\n\n\tshould_render: function() {\n\t\tvar pages_where_we_shouldnt_render = [\n\t\t\t\"www.tumblr.com/docs/\",\n\t\t\t\"www.tumblr.com/policy/\",\n\t\t\t\"api.tumblr.com/console/\"\n\t\t];\n\t\treturn pages_where_we_shouldnt_render.every(function(page) {\n\t\t\treturn document.location.href.indexOf(page) === -1;\n\t\t});\n\t},\n\n\trun: function() {\n\t\tif (!this.should_render()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.running = true;\n\n\t\tXKit.tools.init_css(\"people_notifier\");\n\n\t\tthis.load_blogs();\n\n\t\tif ($(\".posts .post\").length > 0) {\n\n\t\t\tXKit.post_listener.add(\"people_notifier\", XKit.extensions.people_notifier.do_posts);\n\t\t\tthis.do_posts();\n\n\t\t}\n\n\t\tthis.list_blogs();\n\n\t},\n\n\tdo_posts: function() {\n\n\t\tvar posts = XKit.interface.get_posts(\"xkit-people-notifier-checked\");\n\n\t\t$(posts).each(function() {\n\n\t\t\t$(this).addClass(\"xkit-people-notifier-checked\");\n\n\t\t\tvar m_post = XKit.interface.post($(this));\n\n\t\t\tif (XKit.extensions.people_notifier.check_if_in_list(m_post.owner) !== true) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tXKit.extensions.people_notifier.add_to_read_posts_list(m_post.owner, m_post.id);\n\n\t\t});\n\n\t\tXKit.extensions.people_notifier.save();\n\n\t},\n\n\tadd_to_read_posts_list: function(url, post_id) {\n\n\t\tfor (var i = 0; i < XKit.extensions.people_notifier.blogs.length; i++) {\n\n\t\t\tif (XKit.extensions.people_notifier.blogs[i].url === url) {\n\n\t\t\t\tif (XKit.extensions.people_notifier.blogs[i].last_20_posts.length >= 20) {\n\t\t\t\t\tXKit.extensions.people_notifier.blogs[i].last_20_posts.pop();\n\t\t\t\t}\n\n\t\t\t\tif (XKit.extensions.people_notifier.blogs[i].last_20_posts.indexOf(parseInt(post_id)) === -1) {\n\t\t\t\t\tconsole.log(\"Adding \" + parseInt(post_id) + \" to list.\");\n\t\t\t\t\tXKit.extensions.people_notifier.blogs[i].last_20_posts.unshift(parseInt(post_id));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcheck_if_in_list: function(url) {\n\n\t\tfor (var i = 0; i < XKit.extensions.people_notifier.blogs.length; i++) {\n\n\t\t\tif (XKit.extensions.people_notifier.blogs[i].url === url) { return true; }\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tsave: function() {\n\n\t\tXKit.storage.set(\"people_notifier\", \"blogs\", JSON.stringify(XKit.extensions.people_notifier.blogs));\n\n\t},\n\n\tshow_error: function(title, msg) {\n\n\t\tXKit.window.show(title, msg, \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\n\t},\n\n\tshow_error_on_sidebar_blog: function(url, changed) {\n\n\t\tif (!changed) {\n\t\t\t$(\"#xkit-people-notifier-for---\" + url).addClass(\"people-notifier-error\");\n\t\t\t$(\"#xkit-people-notifier-for---\" + url).find(\".count\").html(\"error\");\n\t\t} else {\n\t\t\t$(\"#xkit-people-notifier-for---\" + url).addClass(\"people-notifier-changed\");\n\t\t\t$(\"#xkit-people-notifier-for---\" + url).find(\".count\").html(\"changed\");\n\t\t}\n\n\t},\n\n\tcheck_blog: function(url, obj) {\n\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + url + \".tumblr.com/posts\" + \"?api_key=\" + XKit.extensions.people_notifier.apiKey;\n\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: api_url,\n\t\t\tjson: true,\n\t\t\tonerror: function(response) {\n\t\t\t\tconsole.log(\"people-notifier -> Error getting page.\");\n\t\t\t\tXKit.extensions.people_notifier.show_error_on_sidebar_blog(url);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar data = JSON.parse(response.responseText).response;\n\t\t\t\t\tconsole.log(\" |-- last post timestamp = \" + (data.posts[0].timestamp * 1000) + \" vs last-check = \" + obj.last_check);\n\n\t\t\t\t\tif (data.blog.posts === 0 || data.blog.posts <= 2) {\n\t\t\t\t\t\tXKit.extensions.people_notifier.show_error_on_sidebar_blog(url, true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar do_continue_lads = true;\n\t\t\t\t\tvar lad_count = -1;\n\t\t\t\t\tvar found_count = 0;\n\n\t\t\t\t\twhile (do_continue_lads) {\n\n\t\t\t\t\t\tlad_count++;\n\t\t\t\t\t\tif (lad_count >= 30) {break; }\n\n\t\t\t\t\t\tif (typeof data.posts[lad_count] == \"undefined\")\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tif (typeof obj.last_20_posts === \"undefined\") {\n\t\t\t\t\t\t\tobj.last_20_posts = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof obj.last_post_id != \"undefined\" && typeof data.posts[lad_count].id != \"undefined\") {\n\t\t\t\t\t\t\tif (obj.last_post_id == data.posts[lad_count].id && obj.last_post_id !== 0) {\n\t\t\t\t\t\t\t\tconsole.log(\"people-notifier ----> Skipping, the last post seen. [\" + obj.last_post_id + \"]\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (data.posts[lad_count]) {\n\t\t\t\t\t\t\tif ((data.posts[lad_count].timestamp * 1000) >= obj.last_check) {\n\t\t\t\t\t\t\t\tconsole.log(\"\\-- Found post = \" + data.posts[lad_count].id);\n\t\t\t\t\t\t\t\tfound_count++;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log(\"\\-- Older posts already checked.\");\n\t\t\t\t\t\t\t\tdo_continue_lads = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof data.posts[0].id != \"undefined\") {\n\t\t\t\t\t\tif (data.posts[0].id !== 0) {\n\t\t\t\t\t\t\tobj.last_post_id = data.posts[0].id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tobj.last_check = new Date().getTime();\n\t\t\t\t\tXKit.extensions.people_notifier.save();\n\n\t\t\t\t\tif (found_count > 0) {\n\n\t\t\t\t\t\tXKit.extensions.people_notifier.set_read_count(url, obj.count + found_count);\n\n\t\t\t\t\t\t$(\"#xkit-people-notifier-for---\" + url).find(\".count\").html(obj.count + found_count);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.log(\"people-notifier -> no unread posts found for \" + url);\n\n\t\t\t\t\t\tif (typeof obj.count === \"undefined\" || parseInt(obj.count) === 0) {\n\t\t\t\t\t\t\t$(\"#xkit-people-notifier-for---\" + url).find(\".count\").html(\"\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(\"#xkit-people-notifier-for---\" + url).find(\".count\").html(obj.count);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(\"people-notifier -> Error parsing data. \" + e.message);\n\t\t\t\t\tXKit.extensions.people_notifier.show_error_on_sidebar_blog(url);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tlist_blogs: function() {\n\n\t\tvar m_html = \"\";\n\t\tvar text_color = \"rgba(255, 255, 255, 0.5)\";\n\t\tif (XKit.interface.where().following) {\n\t\t\ttext_color = \"#444\";\n\t\t}\n\t\t$(\"#xpeoplenotifier\").remove();\n\n\t\tif (this.blogs.length === 0) {\n\n\t\t\tm_html = \"<div id=\\\"xkit-people-notifier-no-blogs\\\">\" +\n\t\t\t\t\t\t\"You have no tracked blogs.<br/>Add one below.\" +\n\t\t\t\t\t\"</div>\";\n\n\t\t} else {\n\n\t\t\tvar current_ms = new Date().getTime();\n\t\t\tfor (var i = 0; i < this.blogs.length; i++) {\n\n\t\t\t\tm_html = m_html + '<li style=\"padding-top: 2px; height: 24px;\" id=\"xkit-people-notifier-for---' + this.blogs[i].url + '\" data-url=\"' + this.blogs[i].url + '\" class=\"no_push xkit-people-notifier-person\" draggable=\"true\">' +\n\t\t\t\t\t\t\t\t'<img src=\"https://api.tumblr.com/v2/blog/' + this.blogs[i].url + '.tumblr.com/avatar/16\" class=\"people-notifier-avatar\">' +\n\t\t\t\t\t\t\t\t'<a>' +\n\t\t\t\t\t\t\t\t\t'<div class=\"hide_overflow\" style=\"color: ' + text_color + ' !important; padding-left: 42px;\">' + this.blogs[i].url + '</div>' +\n\t\t\t\t\t\t\t\t\t'<div class=\"xkit-people-notifier drag\" style=\"color: ' + text_color + '\">☰</div>' +\n\t\t\t\t\t\t\t\t\t'<div class=\"xkit-people-notifier close\" style=\"display: none; color: ' + text_color + '\">✖</div>';\n\n\n\t\t\t\tvar difference = current_ms - this.blogs[i].last_check;\n\n\t\t\t\tif (difference <= -1 || difference >= XKit.extensions.people_notifier.check_interval) {\n\t\t\t\t\tm_html = m_html + \"<div class=\\\"count\\\">loading</div>\";\n\t\t\t\t\tsetTimeout(this.check_blog, 250 * (i + 1), this.blogs[i].url, this.blogs[i]);\n\t\t\t\t} else {\n\t\t\t\t\tif (this.blogs[i].count === 0) {\n\t\t\t\t\t\tm_html = m_html + \"<div class=\\\"count\\\"></div>\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tm_html = m_html + \"<div class=\\\"count\\\">\" + this.blogs[i].count + \"</div>\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_html = m_html + \"</a></li>\";\n\t\t\t}\n\t\t}\n\n\t\tm_html = m_html + '<li id=\"xkit-people-notifier-new-btn\" class=\"no_push xkit-people-notifier-new\" style=\"height: 36px; cursor: pointer;\"><a class=\"members\"><div style=\"color: ' + text_color + ' !important; font-weight: bold; padding-left: 10px; padding-top: 8px;\">Add a new person</div></a></li>';\n\n\t\tm_html = '<ul class=\"controls_section\" id=\"xpeoplenotifier\"><li class=\\\"section_header selected\\\">Tracked Blogs</li>' + m_html + '</ul>';\n\n\t\tif ($(\".controls_section:eq(1)\").length) {\n\t\t\t$(\".controls_section:eq(1)\").before(m_html);\n\t\t} else {\n\t\t\t$(\"#right_column\").append(m_html);\n\t\t}\n\n\t\t$(document).on(\"mouseenter\", \".xkit-people-notifier-person\", function() {\n\t\t\t$(this).find(\".xkit-people-notifier.close\").css(\"display\", \"\");\n\t\t\t$(this).find('.count').css('marginRight', '15px');\n\t\t});\n\t\t$(document).on(\"mouseleave\", \".xkit-people-notifier-person\", function() {\n\t\t\t$(this).find(\".xkit-people-notifier.close\").css(\"display\", \"none\");\n\t\t\t$(this).find('.count').css('marginRight', '0');\n\t\t});\n\n\t\tvar dragging;\n\t\tvar dragtarget;\n\t\t$(document).on(\"dragstart\", \".xkit-people-notifier-person\", function(e) {\n\t\t\tdragging = $(this);\n\t\t\te.originalEvent.dataTransfer.setData(\"application/x-kit\", $(this).text().replace(\"☰✖\", \"\"));\n\t\t});\n\t\t$(document).on(\"dragenter\", \".xkit-people-notifier-person\", function(e) {\n\t\t\tif (e.originalEvent.dataTransfer.types[0] === \"application/x-kit\") {\n\t\t\t\te.preventDefault();\n\t\t\t\tdragtarget = $(this);\n\t\t\t}\n\t\t});\n\t\t$(document).on(\"dragover\", \".xkit-people-notifier-person\", function(e) {\n\t\t\tif (e.originalEvent.dataTransfer.types[0] === \"application/x-kit\") {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t\t$(document).on(\"drop\", \".xkit-people-notifier-person\", function(e) {\n\t\t\tvar half_div_height = 13;\n\t\t\tvar index_of_object_with_property = function(array, property_name, property_value) {\n\t\t\t\tfor (var j = 0; j < array.length; j++) {\n\t\t\t\t\tif (array[j][property_name] === property_value) {\n\t\t\t\t\t\treturn j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn -1;\n\t\t\t};\n\t\t\tif (dragtarget[0] !== dragging[0]) {\n\t\t\t\tvar target_index = index_of_object_with_property(XKit.extensions.people_notifier.blogs, 'url', $(dragtarget).attr('data-url'));\n\t\t\t\tvar dragging_index = index_of_object_with_property(XKit.extensions.people_notifier.blogs, 'url', $(dragging).attr('data-url'));\n\t\t\t\tvar dragging_obj = XKit.extensions.people_notifier.blogs[dragging_index];\n\t\t\t\tvar top_of_target = dragtarget.offset().top;\n\t\t\t\tdragging.detach();\n\t\t\t\tif (e.originalEvent.pageY - top_of_target > half_div_height) {\n\t\t\t\t\tdragtarget.after(dragging);\n\t\t\t\t\ttarget_index++;\n\t\t\t\t} else {\n\t\t\t\t\tdragtarget.before(dragging);\n\t\t\t\t}\n\t\t\t\tif (dragging_index < target_index) {\n\t\t\t\t\ttarget_index--;\n\t\t\t\t}\n\t\t\t\tXKit.extensions.people_notifier.blogs.splice(dragging_index, 1);\n\t\t\t\tXKit.extensions.people_notifier.blogs.splice(target_index, 0, dragging_obj);\n\t\t\t\tXKit.extensions.people_notifier.save();\n\t\t\t}\n\t\t\tdragtarget = null;\n\t\t\tdragging = null;\n\t\t});\n\n\t\t$(\".xkit-people-notifier-person\").bind(\"click\", function(event) {\n\n\t\t\tif (event.altKey || event.target.className === \"xkit-people-notifier close\") {\n\t\t\t\tXKit.extensions.people_notifier.remove_from_list($(this).attr('data-url'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ($(this).hasClass(\"people-notifier-error\")) {\n\t\t\t\tXKit.window.show(\"Error fetching.\", \"<b>Blog Tracker was unable to fetch information about the blog \\\"\" + $(this).attr('data-url') + \"\\\".</b><div style=\\\"margin-top: 15px;\\\">It might be due to a recent Tumblr change or bug, or that the person changed their URL. Try refreshing the page or click on Open In New Tab to check if they have deleted their blog or changed their URL.</div>\", \"error\", \"<a href=\\\"http://\" + $(this).attr('data-url') + \".tumblr.com/\\\" target=\\\"_BLANK\\\" class=\\\"xkit-button default\\\">Open in new tab</a><div class=\\\"xkit-button\\\" id=\\\"people-notifier-delete-this\\\">Remove from track list</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t\tvar m_obj = $(this);\n\t\t\t\t$(\"#people-notifier-delete-this\").click(function() {\n\t\t\t\t\tXKit.extensions.people_notifier.remove_from_list($(m_obj).attr('data-url'));\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ($(this).hasClass(\"people-notifier-changed\")) {\n\t\t\t\tXKit.window.show(\"URL Changed?\", \"<b>Blog Tracker found no or less than 2 posts in the blog \\\"\" + $(this).attr('data-url') + \"\\\".</b><div style=\\\"margin-top: 15px;\\\">It might be due to a recent Tumblr change or bug, or that the person changed their URL. Try refreshing the page or click on Open In New Tab to check if they have deleted their blog or changed their URL.</div>\", \"error\", \"<a href=\\\"http://\"  + $(this).attr('data-url') +  \".tumblr.com/\\\" target=\\\"_BLANK\\\" class=\\\"xkit-button default\\\">Open in new tab</a><div class=\\\"xkit-button\\\" id=\\\"people-notifier-delete-this\\\">Remove from track list</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$(\"#people-notifier-delete-this\").click(function() {\n\t\t\t\t\tXKit.extensions.people_notifier.remove_from_list($this.attr('data-url'));\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset unread counter to 0 because we're going to the blog\n\t\t\tXKit.extensions.people_notifier.load_blogs();\n\t\t\tfor (var person in XKit.extensions.people_notifier.blogs) {\n\t\t\t\tif (XKit.extensions.people_notifier.blogs[person].url === $(this).attr('data-url')) {\n\t\t\t\t\tXKit.extensions.people_notifier.blogs[person].last_check = new Date().getTime();\n\t\t\t\t\tXKit.extensions.people_notifier.blogs[person].count = 0;\n\t\t\t\t\tXKit.extensions.people_notifier.save();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar open_in_vod = XKit.extensions.people_notifier.preferences.view_on_dash.value;\n\t\t\tvar open_new_tab = XKit.extensions.people_notifier.preferences.open_new_tab.value;\n\t\t\tif (open_in_vod) {\n\t\t\t\ttry {\n\t\t\t\t\tXKit.extensions.view_on_dash.view($(this).attr('data-url'));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tXKit.window.show(\"Unable to use View On Dash to open blog.\",\n\t\t\t\t\t\t\"Error message: <p>\" + e.message + \"</p>\" +\n\t\t\t\t\t\t\"Please try again later or file a bug report.\",\n\t\t\t\t\t\t\"error\",\n\t\t\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-close-message\">OK</div>' +\n\t\t\t\t\t\t'<a class=\"xkit-button\" href=\"https://new-xkit-extension.tumblr.com/ask\" target=\"_blank\">Send an ask</a>'\n\t\t\t\t\t );\n\t\t\t\t}\n\t\t\t} else if (open_new_tab) {\n\t\t\t\twindow.open(\"http://\" + $(this).attr('data-url') + \".tumblr.com/\");\n\t\t\t} else {\n\t\t\t\tXKit.interface.show_peepr_for($(this).attr('data-url'));\n\t\t\t}\n\n\t\t\t// Rerender the blog list\n\t\t\tXKit.extensions.people_notifier.list_blogs();\n\t\t});\n\n\t\t$(\"#xkit-people-notifier-new-btn\").click(function() {\n\n\t\t\tif (XKit.extensions.people_notifier.blogs.length >= XKit.extensions.people_notifier.max_tracks) {\n\t\t\t\tXKit.window.show(\"No more slots\", \"<b>You can only track up to 10 people.</b><br/>Please untrack some to track new people.<br/><br/>To remove a person from list, hold the ALT key while clicking their username on the sidebar.\", \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar remaining = XKit.extensions.people_notifier.max_tracks - XKit.extensions.people_notifier.blogs.length;\n\n\t\t\tvar div_info_style = \"margin-top: 10px; font-size: 12px; color: rgb(120,120,120);\";\n\t\t\tXKit.window.show(\"Add a person to track list\", \"<b>Please enter the URL of the person to track:</b><input type=\\\"text\\\" maxlength=\\\"40\\\" placeholder=\\\"eg: new-xkit-extension\\\" class=\\\"xkit-textbox\\\" id=\\\"xkit-people-notifier-add-url\\\">You have <b>\" + remaining + \"</b> track slots left.<div style=\\\"\" + div_info_style + \"\\\">To remove a person from list afterwards, hold the ALT key while clicking their username or click on the ✖ when hovering the mouse over their name on the sidebar.</div><div style=\\\"\" + div_info_style + \"\\\">Please be aware that the more blogs you add, the longer it will take to track them all.</div>\", \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-people-notifier-create\\\">Track URL</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-people-notifier-create\").click(function() {\n\n\t\t\t\tvar to_add = $(\"#xkit-people-notifier-add-url\").val().toLowerCase();\n\n\t\t\t\tif ($.trim(to_add) === \"\") {\n\t\t\t\t\tXKit.window.close();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (/^[a-zA-Z0-9\\-]+$/.test(to_add) === false) {\n\t\t\t\t\tXKit.extensions.people_notifier.show_error(\"Invalid username\", \"Please enter the url only (ie: new-xkit-extension)\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (XKit.extensions.people_notifier.check_if_in_list(to_add) !== false) {\n\t\t\t\t\tXKit.extensions.people_notifier.show_error(\"Already on the list\", \"This user is already on your buddy list.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar m_object = {};\n\t\t\t\tm_object.url = to_add;\n\t\t\t\tm_object.last_check = new Date().getTime() - 60000;\n\t\t\t\tm_object.count = 0;\n\t\t\t\tm_object.last_20_posts = [];\n\t\t\t\tm_object.last_post = 0;\n\n\t\t\t\tXKit.extensions.people_notifier.blogs.push(m_object);\n\t\t\t\tXKit.extensions.people_notifier.save();\n\n\t\t\t\tXKit.window.close();\n\t\t\t\tXKit.notifications.add(\"User <b>\" + to_add + \"</b> added to track list.\");\n\n\t\t\t\tXKit.extensions.people_notifier.list_blogs();\n\n\t\t\t});\n\n\t\t});\n\n\t},\n\n\tremove_from_list: function(username) {\n\n\t\tXKit.window.show(\"Remove from list\", \"You sure you want to remove <b>\" + username + \"</b>?\", \"question\", \"<div data-to-remove=\\\"\" + username + \"\\\" id=\\\"pn-remove-user-button\\\" class=\\\"xkit-button default\\\">Remove</div><div id=\\\"xkit-close-message\\\" class=\\\"xkit-button\\\">Cancel</div>\");\n\n\t\t$(\"#pn-remove-user-button\").click(function() {\n\n\t\t\tXKit.window.close();\n\t\t\tvar musername = $(this).attr(\"data-to-remove\");\n\n\t\t\tfor (var i = 0; i < XKit.extensions.people_notifier.blogs.length; i++) {\n\t\t\t\tif (XKit.extensions.people_notifier.blogs[i].url === musername) {\n\t\t\t\t\tXKit.extensions.people_notifier.blogs.splice(i, 1);\n\t\t\t\t\tXKit.extensions.people_notifier.save();\n\t\t\t\t\tXKit.extensions.people_notifier.list_blogs();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tXKit.tools.remove_css(\"people_notifier\");\n\n\t\t$(\"#xpeoplenotifier\").remove();\n\n\t\t$(document).off(\"mouseenter\", \".xkit-people-notifier-person\");\n\t\t$(document).off(\"mouseleave\", \".xkit-people-notifier-person\");\n\t\t$(document).off(\"dragstart\", \".xkit-people-notifier-person\");\n\t\t$(document).off(\"dragenter\", \".xkit-people-notifier-person\");\n\t\t$(document).off(\"dragover\", \".xkit-people-notifier-person\");\n\t\t$(document).off(\"drop\", \".xkit-people-notifier-person\");\n\n\t\tthis.running = false;\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,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\n","css":"#xkit-people-notifier-no-blogs {\n\ttext-align: center;\n\tpadding: 8px;\n\tfont-size: 12px;\n\tcolor: rgba(255,255,255,0.55);\n}\n\n.xkit-people-notifier-person a {\n\tposition: relative;\n\theight: 100%;\n\tdisplay: block;\n}\n\n.xkit-people-notifier-person {\n\tcursor: move;\n\tcursor: grab;\n\tcursor: -moz-grab;\n\tcursor: -webkit-grab;\n}\n\n.xkit-people-notifier-person:active {\n\tcursor: grabbing !important;\n\tcursor: -moz-grabbing !important;\n\tcursor: -webkit-grabbing !important;\n}\n\n.xkit-people-notifier-person .hide_overflow {\n\twidth: 125px;\n}\n\n.xkit-people-notifier-person .people-notifier-avatar {\n\tposition: absolute;\n\ttop: 50%; left: 18px;\n\tmargin-top: -9px;\n\tbox-shadow: inset 0px 1px 4px rgba(0,0,0,0.33), 0px 1px 0px rgba(255,255,255,0.19);\n\tborder-radius: 3px;\n\tborder: 1px solid #233950;\n\twidth: 16px; height: 16px;\n}\n\n.xkit-people-notifier-person a:after {\n\tbackground: none !important;\n\tdisplay: block;\n\theight: 100%;\n\tposition: relative;\n}\n\n.identity .controls_section .xkit-people-notifier-person a .count,\n.xkit-people-notifier-person .close,\n.xkit-people-notifier-person .drag {\n\tfloat: right;\n\ttop: 50% !important;\n\tdisplay: block;\n\theight: 13px;\n\tmargin-top: -11px;\n\tfont-size: 13px;\n\tposition: absolute;\n}\n\n.xkit-people-notifier-person .close {\n\tcursor: pointer;\n\tright: 10px;\n}\n\n.xkit-people-notifier-person .drag {\n\tpadding-left: 4px;\n}\n\n.dashboard_useraction_following .xkit-people-notifier-person:hover,\n.dashboard_useraction_following .xkit-people-notifier-new:hover {\n\tbackground: rgba(0,0,0,0.025) !important;\n}\n\n.dashboard_useraction_following.identity .controls_section a .count {\n\tcolor: #444 !important;\n}\n","title":"Blog Tracker","description":"Track people like tags","developer":"new-xkit","version":"0.6.5","details":"Blog Tracker lets you track blogs like you can track tags. Add them on your dashboard, and it will let you know how many new posts they've made the last time you've checked their blogs, or if they've changed their URLs.<br><br>Please be aware that the more blogs you add, the longer it will take to track them all.","frame":"false","beta":"false","slow":"false"}