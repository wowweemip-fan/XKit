{"id":"limit_people","script":"//* TITLE Limit People **//\n//* VERSION 0.2.4 **//\n//* DESCRIPTION Limit the appearance of blogs on dash **//\n//* DETAILS Some people on your dashboard posting a lot? Limit people limits how many consecutive posts by the same person appear on your dashboard at once. If a user makes more than 2 consecutive posts, the rest will be hidden until you click on a button to show them. **//\n//* DEVELOPER new-xkit **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.limit_people = new Object({\n\n\trunning: false,\n\n\tpreferences: {\n\t\tlimit: {\n\t\t\ttext: \"Hide consecutive posts after the \",\n\t\t\tdefault: \"2\",\n\t\t\tvalue: \"2\",\n\t\t\ttype: \"combo\",\n\t\t\tvalues: [\n\t\t\t\t\"3rd Post (default)\", \"after2\",\n\t\t\t\t\"4th Post\", \"after3\",\n\t\t\t\t\"5th Post\", \"after4\",\n\t\t\t\t\"6th Post\", \"after5\",\n\t\t\t],\n\t\t},\n\t\tdont_limit_me: {\n\t\t\ttext: \"Don't limit my own posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\ttype: \"checkbox\"\n\t\t},\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (XKit.interface.where().dashboard !== true) { return; }\n\n\t\tif ($(\"#posts\").length > 0) {\n\t\t\tXKit.tools.init_css(\"limit_people\");\n\t\t\tXKit.post_listener.add(\"limit_people\", XKit.extensions.limit_people.do);\n\t\t\tXKit.extensions.limit_people.do();\n\n\t\t\t$(document).on(\"click\", \".xkit-limit-people-opener\", XKit.extensions.limit_people.open);\n\n\t\t}\n\n\t},\n\n\topen: function(e) {\n\n\t\tvar m_obj = $(e.target);\n\n\t\t$($(m_obj).attr('data-to-get')).removeClass(\"xkit-limit-people-grouped-hidden\");\n\n\t\t$($(m_obj).attr('data-to-get') + \" .xkit-limit-people-grouped-hidden\").each(function() {\n\n\t\t\t$(this).attr('class', $(this).attr('data-old-classes') + \" xkit-limit-people-grouped-hidden\");\n\t\t\t$(this).removeAttr('data-old-classes');\n\n\t\t});\n\n\t\t$($(m_obj).attr('data-to-get') + \" .post.xkit-limit-people-grouped-hidden\").css(\"opacity\", \"0\").removeClass(\"xkit-limit-people-grouped-hidden\");\n\n\t\t$($(m_obj).attr('data-to-get') + \" .post\").animate({ opacity: 1}, 400);\n\n\t\t$($(m_obj)).parent().slideUp('slow');\n\n\t\tsetTimeout(function() { XKit.post_listener.check(true); }, 300);\n\n\t},\n\n\tlast_url: \"\",\n\tlast_count: 0,\n\tlast_group_id: XKit.tools.random_string(),\n\tlast_grouped: false,\n\n\tdo: function() {\n\t\tvar size_changed = false;\n\n\t\tvar posts = XKit.interface.get_posts(\"xkit-limit-people-checked\");\n\n\t\tvar after_v = parseInt(XKit.extensions.limit_people.preferences.limit.value.replace(\"after\", \"\"));\n\n\t\tvar no_endless = $(\"body\").hasClass(\"without_auto_paginate\");\n\n\t\tvar total = $(posts).length;\n\n\t\t$(posts).each(function(index) {\n\t\t\t\n\t\t\tif ($(this).parents('.peepr-drawer').length > 0) { return; }\n\t\t\t\n\t\t\tvar m_post = XKit.interface.post($(this));\n\t\t\t$(this).addClass(\"xkit-limit-people-checked\");\n\n\t\t\tif (XKit.extensions.limit_people.preferences.dont_limit_me.value === true) {\n\n\t\t\t\tif (m_post.is_mine === true) { return; }\n\n\t\t\t}\n\n\t\t\tif ($(this).hasClass(\"xkit_view_on_dash_post\")) { return; }\n\t\t\tif ($(this).is(':hidden')) { return; }\n\n\t\t\t// // console.log(\"owner = \" + m_post.owner + \"\\n last = \" + XKit.extensions.limit_people.last_url);\n\n\t\t\tvar force_group_this = false;\n\n\t\t\tif (index === total - 1 && no_endless) {\n\n\t\t\t\tif (((XKit.extensions.limit_people.last_count - after_v) + 1) >= 1) {\n\n\t\t\t\t\tm_post.owner = \"\";\n\t\t\t\t\tforce_group_this = true;\n\n\t\t\t\t\t$(this).parent().addClass(\"xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id).addClass(\"xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id + \"-container\");\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (m_post.owner !== XKit.extensions.limit_people.last_url) {\n\t\t\t\tif ((XKit.extensions.limit_people.last_grouped && !$(this).hasClass(\"xkit-limit-people-grouped-hidden\") && (XKit.extensions.limit_people.last_count - 1) > after_v - 1) || force_group_this) {\n\t\t\t\t\t// console.log(\"** LIMIT PEOPLE: Closing the previous group.... [\" + XKit.extensions.limit_people.last_url+ \"]\");\n\t\t\t\t\t$(\".xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id + \"-container\").not(\".xkit-limit-people-grouped-hidden\").last().after(\"<li class=\\\"post_container\\\"><div data-to-get=\\\"\" +  (\".xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id)  + \"\\\" data-group-id=\\\"\" + XKit.extensions.limit_people.last_group_id + \"\\\" class=\\\"xkit-limit-people-grouped-warning xkit-limit-people-opener\\\">Show \" + ((XKit.extensions.limit_people.last_count - after_v) + 1) + \" more by \" + XKit.extensions.limit_people.last_url + \"</div></div>\");\n\t\t\t\t}\n\t\t\t\t// console.log(\"** LIMIT PEOPLE: Generating new group.... [\" + m_post.owner + \"]\");\n\t\t\t\tXKit.extensions.limit_people.last_url = m_post.owner;\n\t\t\t\tXKit.extensions.limit_people.last_count = 0;\n\t\t\t\tXKit.extensions.limit_people.last_group_id = XKit.tools.random_string();\n\t\t\t\tXKit.extensions.limit_people.last_grouped = false;\n\t\t\t} else {\n\t\t\t\t// console.log(\"** LIMIT PEOPLE: Continuing from the last group. [\" + XKit.extensions.limit_people.last_url + \"]\");\n\t\t\t\tXKit.extensions.limit_people.last_count++;\n\t\t\t\tXKit.extensions.limit_people.last_grouped = true;\n\t\t\t}\n\n\t\t\t$(this).parent().addClass(\"xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id).addClass(\"xkit-limit-people-group-\" + XKit.extensions.limit_people.last_url + \"-\" + XKit.extensions.limit_people.last_group_id + \"-container\");\n\n\t\t\tif (XKit.extensions.limit_people.last_count >= after_v) {\n\t\t\t\t$(this).attr('data-old-classes', $(this).attr('class'));\n\t\t\t\t$(this).attr('class', \"xkit-limit-people-grouped-hidden\");\n\t\t\t\t$(this).parent().addClass(\"xkit-limit-people-grouped-hidden\");\n\t\t\t}\n\n\t\t});\n\n\t\tif (size_changed) {\n\n\t\t\tXKit.extensions.limit_people.call_tumblr_resize();\n\n\t\t}\n\n\n\t},\n\n\tcall_tumblr_resize: function() {\n\n\t\tXKit.tools.add_function(function() {\n\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\n\t\t}, true, \"\");\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\tXKit.post_listener.remove(\"limit_people\");\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFREI5QTZDMzZEMjIxMUUzOUM1NkIzMjQ0OERGQUU5RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFREI5QTZDMjZEMjIxMUUzOUM1NkIzMjQ0OERGQUU5RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAyODAxMTc0MDcyMDY4MTE4QkRBRjU5ODYxRUUyRjREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+j7AWYwAABIBJREFUeNrsmW9sFEUUwOfN7O7dXu8Kd7e9lgOu6aE9FUr90BiblLQBFT6ABeM/xA/wycQmfve7MfGbicHEGIIxRlNSqU1NQFP/F/GDkIgBq6VF0HIVK9Bq7+jtzY6zZwVpusvt3dztNe5k09zeztv3fn1v3rx5B5nX0IoeGCEPwNUhIfA84Hngf+4B0YOs7SKp53B8C9Q33/ySzV00Ln9Ff3yDTo2KVQeZ18W9S0HK1mHcstNmjnHhw9ynu1iu9kKIW+/rPWNvvamvZSefxieLA+CLWMQld70DWltRqFobnyxKrxgPYG0TSe1zsE5S+7hIDXlAanvRcfbgIjXkgXhXFUQquIghlKiCyPKeBPd2YiGqXS0lPAAvhLwQ8sppL4Q8gNoo5oxfRpwqNkWE1JEIguX/G/JnXlXWP+RURIhqDkDKfwu7Pqp/0Sd3Hyxyfm7kWS4iRDUHkIXEszF1BKFiAdiVj0Tp5QBubAXilHIAnxsAPoEAkhsAwpTyalRxwX5xSsVkIecExAMQl0YhkIDmR6W7nyheROn92rh4jI6/yzKXytW+8H5H6cKr7iN37cXNO0rfPdKjdLyfzXxTBsDRB0spodZsIxseh4b7hYQBu36eTgwYl4ZKAhjsdGZ6opfcsx8CjcLXBcv8RsfeMtKfIX3OCcBQd1ET5RBJPonXP1IJ028b+l90cpBOHkH6n0UC9BRh+lMk2YvkYPXSlIkxRCf774gBC8MP2zwmrQdIy66qmr4E48Iw/emwbRq1PtdLG/swt97FIQdJ616Qg/mzB61PZFiyuvC6bbXQdzDNsDZSsjuZyoGa6JyYZoD1Gji223bPjChbDy0eo47v4SWAsn3g1i1/vmOwOrfWAMcfW95xTd2k9RmUn4dQ4dfS3Kx+6hWoWyO19bEbV42pz+nEe0gJ48hmlplm878iOu9WY2v50pzbCqqGkPavK1bJnS8vPlI1nppAbUCSihsfMPegme/10y9BpF1K7mHZKzR9gl39DklBs2jTZytbFuY+fnr5BLrxeRzf4qSsyaN8FimhxT11vB+HUzixHTFqnB+gP38A9a04usng7rr2A8pdq7wHVIc7Ls8JBesL9Wmj1P7CzcoZJ3dDdDOS6yCUwOaJ/tv8ucNkXQ+s7UHZGTpxlM2OQSCOiI9l/0D5OacA2CKEmoS5mfggcu+tN8c65FgHYoapWm0gyn6WPgFaO4RTpiPH3qZTn+B4D9QnUfZ3evlL+yCE3MgBS63+KFJjWI0hVQP/P38jSPJXdlUyyrIzIKlIqTfvpk/mz75ZUlvF0Hl6QZlpuhTMXwDTCmANBbCoCUYENRqA/LdehKZOdO6Q0L6QkWOZNMqkl4JJKvg0DoN5djJ91WiC+cKIlH1+t7VQXFuF6tZgkYLHOF4M/BryRxyAMWpvYeU7c3TBAixgBp4/ugjmi/LP4F+N8O1ndD1zJw9gN7oSZihagdWBP8wdVfBV1PSArYUutVXsPHaDzaf5VWQPRlrpv/PxEFrpAK40d4UCYA/AVQCotSzkcPwtwACiu2RPTpU5QwAAAABJRU5ErkJggg==","css":".xkit-limit-people-grouped-hidden {\n\tdisplay: none !important;\n\theight: 0; visibility: hidden;\n\tbackground: red;\n}\n\n.xkit-limit-people-opener {\n\tcolor: rgba(255,255,255,0.43);\n\ttext-shadow: none;\n\tfont-size: 13px;\n\tbackground: rgba(255,255,255,0.06);\n\tpadding: 10px;\n\tborder-radius: 6px;\n\ttext-align: center;\n\tcursor: pointer;\n}\n\n.xkit-limit-people-opener:hover {\n\tbackground: rgba(255,255,255,0.08);\n\n}","title":"Limit People","description":"Limit the appearance of blogs on dash","developer":"new-xkit","version":"0.2.4","details":"Some people on your dashboard posting a lot? Limit people limits how many consecutive posts by the same person appear on your dashboard at once. If a user makes more than 2 consecutive posts, the rest will be hidden until you click on a button to show them.","frame":"false","beta":"false","slow":"false"}