{"id":"servant","script":"//* TITLE Servant **//\n//* VERSION 0.6.0 **//\n//* DESCRIPTION XKit Personal Assistant **//\n//* DETAILS Automator for XKit: lets you create little Servants that does tasks for you when the conditions you've set are met. **//\n//* DEVELOPER new-xkit **//\n//* FRAME false **//\n//* SLOW true **//\n//* BETA false **//\n\n// defined in xkit.js\n/* globals centerIt */\n\nXKit.extensions.servant = new Object({\n\n\trunning: false,\n\tslow: true,\n\n\tservants: [],\n\n\tpreferences: {\n\t\t\"sep2\": {\n\t\t\ttext: \"My Servants\",\n\t\t\ttype: \"separator\"\n\t\t}\n\t},\n\n\tcauses: {\n\n\t\tsep_1: {\n\n\t\t\ttext: \"Posts on Dashboard\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\tcontains: {\n\n\t\t\ttext: \"Post Contains\",\n\t\t\ttype: \"text\",\n\t\t\tcompatibility: \"post\",\n\t\t\tplaceholder: \"ie: 'Mitt Romney'\",\n\t\t\treturns: \"the word found\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if a post containing the word you've entered is found, affects that post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_text = $(obj).find(\".post_content\").text();\n\n\t\t\t\tif ($(obj).find(\".post_title\").length > 0) {\n\t\t\t\t\tm_text = m_text + \" \" + $(obj).find(\".post_title\").text();\n\t\t\t\t}\n\n\t\t\t\tm_text = m_text.toLowerCase();\n\t\t\t\tparameter = parameter.toLowerCase();\n\n\t\t\t\tif (m_text.indexOf(parameter) !== -1) {\n\n\t\t\t\t\tm_object.run = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tm_object.run = false;\n\n\t\t\t\t}\n\n\t\t\t\tm_object.return = parameter;\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tcontains_not: {\n\n\t\t\ttext: \"Post Doesn't Contain\",\n\t\t\ttype: \"text\",\n\t\t\tcompatibility: \"post\",\n\t\t\tplaceholder: \"ie: 'Mitt Romney'\",\n\t\t\treturns: \"the word not found\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if a post containing the word you've entered is not found, affects that post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_text = $(obj).find(\".post_body\").text();\n\n\t\t\t\tif ($(obj).find(\".post_title\").length > 0) {\n\t\t\t\t\tm_text = m_text + \" \" + $(obj).find(\".post_title\").text();\n\t\t\t\t}\n\n\t\t\t\tm_text = m_text.toLowerCase();\n\t\t\t\tparameter = parameter.toLowerCase();\n\n\t\t\t\tif (m_text.indexOf(parameter) == -1) {\n\n\t\t\t\t\tm_object.run = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tm_object.run = false;\n\n\t\t\t\t}\n\n\t\t\t\tm_object.return = parameter;\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tmade_by: {\n\n\t\t\ttext: \"Post is from\",\n\t\t\ttype: \"text\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\treturns: \"the owner's URL\",\n\t\t\tplaceholder: \"ie: 'new-xkit-extension'\",\n\t\t\tdescription: \"Runs if a post is created/reblogged from the URL you've entered is found, affects that post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif ($(obj).attr('data-tumblelog-name') === parameter) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = parameter;\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tsourced: {\n\n\t\t\ttext: \"Post is sourced from\",\n\t\t\ttype: \"text\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\treturns: \"the source URL\",\n\t\t\tplaceholder: \"ie: 'new-xkit-extension'\",\n\t\t\tdescription: \"Runs if a post is sourced to the URL you've entered is found, affects that post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif ($(obj).find(\".post_source_link\").length > 0) {\n\n\t\t\t\t\tif ($(obj).find(\".post_source_link\").attr('title') === parameter) {\n\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tm_object.return = parameter;\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tis_original: {\n\n\t\t\ttext: \"Post is original\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if the post is original, not reblogged.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif (typeof m_post === \"undefined\") {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t} else {\n\t\t\t\t\tif (m_post.is_reblogged === false) {\n\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tis_reblogged: {\n\n\t\t\ttext: \"Post is reblogged\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if the post is not original, but reblogged.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif (typeof m_post === \"undefined\") {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t} else {\n\t\t\t\t\tif (m_post.is_reblogged === true) {\n\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_type: {\n\n\t\t\ttext: \"Post type is\",\n\t\t\ttype: \"post_type\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\treturns: \"the post type\",\n\t\t\tdescription: \"Runs if a post is of the type you've selected\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar search_for = parameter;\n\n\t\t\t\tif (search_for === \"text\") { search_for = \"regular\"; }\n\t\t\t\tif (search_for === \"chat\") { search_for = \"conversation\"; }\n\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif (typeof m_post === \"undefined\") {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t} else {\n\t\t\t\t\tif (search_for === \"photo\") {\n\t\t\t\t\t\tif (m_post.type === \"photo\" || m_post.type === \"panorama\" || m_post.type === \"photoset\") {\n\t\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (m_post.type === search_for) {\n\t\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_is_mine: {\n\n\t\t\ttext: \"Post is mine\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if you've reblogged/created this post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif (typeof m_post === \"undefined\") {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t} else {\n\t\t\t\t\tif (m_post.is_mine === true) {\n\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_liked: {\n\n\t\t\ttext: \"Post is liked by me\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs if you've already liked a post.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\n\t\t\t\tm_object.run = false;\n\n\t\t\t\tif (typeof m_post === \"undefined\") {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t} else {\n\t\t\t\t\tif (m_post.liked === true) {\n\t\t\t\t\t\tm_object.run = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_not_done: {\n\n\t\t\ttext: \"There is a post (not recommended)\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs on all posts. Not recommended.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tif ($(obj).hasClass(\"with_permalink\") && $(obj).hasClass(\"post_full\")) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tsep_99a: {\n\n\t\t\ttext: \"Content Ratings\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\tpost_adult: {\n\n\t\t\ttext: \"The post is made/reblogged by an Adult blog\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with Adult rating.<br/>(ie: a porn blog)\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"adult\") {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_nsfw: {\n\n\t\t\ttext: \"The post is made/reblogged by a NSFW blog\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with NSFW rating.<br/>(ie: a blog that might post porn/nsfw stuff from time to time)\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"nsfw\") {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tpost_nsfw_adult: {\n\n\t\t\ttext: \"The post is made/reblogged by a NSFW/adult blog\",\n\t\t\ttype: \"\",\n\t\t\tcompatibility: \"post\",\n\t\t\truns_on: \"post\",\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with an Adult or NSFW rating.\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"adult\" || $(obj).attr('data-tumblelog-content-rating') === \"nsfw\") {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.pass = $(obj);\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tsep_99: {\n\n\t\t\ttext: \"Pages\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\ton_dashboard: {\n\n\t\t\ttext: \"I'm on the dashboard\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the dashboard\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (XKit.interface.where().dashboard);\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_inbox: {\n\n\t\t\ttext: \"I'm on the inbox\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the inbox page\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (XKit.interface.where().inbox);\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_channel: {\n\n\t\t\ttext: \"I'm on a blog posts page (/blog/[url])\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are posts page of your blog\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (XKit.interface.where().channel && $(\"body\").hasClass(\"dashboard_index\"));\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_likes: {\n\n\t\t\ttext: \"I'm on my likes page\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the likes page\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (document.location.href.indexOf('www.tumblr.com/likes') !== -1);\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_queue: {\n\n\t\t\ttext: \"I'm on the queue page\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the queue page of your blog\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (XKit.interface.where().queue);\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_drafts: {\n\n\t\t\ttext: \"I'm on the drafts page\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the drafts page of your blog\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = (XKit.interface.where().drafts);\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ton_search: {\n\n\t\t\ttext: \"I'm on a tracked tag or search\",\n\t\t\ttype: \"page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs if you are on the a tracked tag page or on search\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tif (document.location.href.indexOf(\"www.tumblr.com/tagged/\") !== -1 || document.location.href.indexOf(\"www.tumblr.com/search/\") !== -1) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tsep_50: {\n\n\t\t\ttext: \"Date and Time\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\ttime_night: {\n\n\t\t\ttext: \"It's night\",\n\t\t\ttype: \"time\",\n\t\t\tcompatibility: \"\",\n\t\t\treturns: \"the hour, in 24-hour format\",\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the time is between 6 pm and 6 am\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_hour = new Date().getHours();\n\n\t\t\t\tif (!(m_hour >= 6 && m_hour < 18)) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = m_hour;\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ttime_weekend: {\n\n\t\t\ttext: \"It's weekend\",\n\t\t\ttype: \"time\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the day is saturday or sunday\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_today = new Date();\n\n\t\t\t\tif (m_today.getDay() === 6 || m_today.getDay() === 0) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ttime_weekday: {\n\n\t\t\ttext: \"It's weekday\",\n\t\t\ttype: \"time\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the day is not a saturday or a sunday\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_today = new Date();\n\n\t\t\t\tif (m_today.getDay() !== 6 && m_today.getDay() !== 0) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\ttime_day: {\n\n\t\t\ttext: \"The day is\",\n\t\t\ttype: \"day\",\n\t\t\treturns: \"the date (0=sunday, 6=saturday)\",\n\t\t\tdescription: \"Runs if the day is the thingy you've selected\",\n\n\t\t\trun: function(parameter, obj) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_today = new Date();\n\n\t\t\t\tif (m_today.getDay() == parameter) {\n\t\t\t\t\tm_object.run = true;\n\t\t\t\t} else {\n\t\t\t\t\tm_object.run = false;\n\t\t\t\t}\n\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t\tsep_100: {\n\n\t\t\ttext: \"Other\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\trun_js: {\n\n\t\t\ttext: \"Run Javascript Code\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"textarea\",\n\t\t\tplaceholder: \"ie: 'if (mary.has_lamb == true) {\\n\\treturn true;\\n }'\",\n\t\t\tdescription: \"Lets you run Javascript Code.<br/>JQuery and XKit API is supported.\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tvar m_return = false;\n\n\t\t\t\ttry {\n\t\t\t\t\tm_return = eval(parameter + \"\\n//# sourceURL=xkit/servant/servant\" + (new Date()).getTime() + \".js\");\n\t\t\t\t} catch (e) {\n\t\t\t\t\tm_return = false;\n\t\t\t\t\tconsole.error(\"Unable to run Servant! ---> \" + e.message);\n\t\t\t\t}\n\n\t\t\t\tm_object.run = m_return;\n\t\t\t\tm_object.return = \"\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t}\n\n\t\t},\n\n\t\tcivilization_ends: {\n\n\t\t\ttext: \"Civilization comes to an end\",\n\t\t\ttype: \"zombie_cat_attack\",\n\t\t\tcompatibility: \"\",\n\t\t\treturns: \"the cause (ie: 'zombies')\",\n\t\t\tdescription: \"Runs if a society no longer functions, due to reasons<br/> such as a Manbearpig being on the loose\",\n\n\t\t\trun: function() {\n\n\t\t\t\tvar m_object = {};\n\n\t\t\t\tm_object.run = false;\n\t\t\t\tm_object.return = \"zombies\";\n\n\t\t\t\treturn m_object;\n\n\t\t\t},\n\n\t\t},\n\n\t},\n\n\tactions: {\n\n\t\tsep_1: {\n\n\t\t\ttext: \"Generic\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\tdisplay_notification: {\n\n\t\t\ttext: \"Display notification\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"text\",\n\t\t\tplaceholder: \"ie: 'Wake up!'\",\n\t\t\tdescription: \"Displays an XKit notification on the bottom left of the screen.\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tvar parameter_fixed = parameter;\n\n\t\t\t\tfor (var i = 0; i <= 10; i++) {\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\n\t\t\t\t}\n\n\t\t\t\tXKit.notifications.add(parameter_fixed, \"ok\", true);\n\n\t\t\t}\n\n\t\t},\n\n\n\t\tdisplay_window: {\n\n\t\t\ttext: \"Display alert\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"text\",\n\t\t\tplaceholder: \"ie: 'Wake up!'\",\n\t\t\tdescription: \"Displays an alert window.\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tvar parameter_fixed = parameter;\n\n\t\t\t\tfor (var i = 0; i <= 10; i++) {\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\n\t\t\t\t}\n\n\t\t\t\tXKit.window.show(\"Servant Alert\", parameter_fixed, \"info\", \"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\n\n\t\t\t}\n\n\t\t},\n\n\t\tsep_2: {\n\n\t\t\ttext: \"Post Related\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\tblock_post: {\n\n\t\t\ttext: \"Hide the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Completely hides the post\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\thighlight_post: {\n\n\t\t\ttext: \"Highlight the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Highlight the post with a yellow glowing ring of glow.\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).css(\"box-shadow\", \"0px 0px 10px 4px yellow\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdim_post: {\n\n\t\t\ttext: \"Dim the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Dims the posts a lil bit.\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\n\n\t\t\t\tvar on_click = function() {\n\t\t\t\t\tif ($(this).hasClass(\"active\")) {\n\t\t\t\t\t\t$(this).closest(\".post.post_full\").removeClass(\"xkit-servant-dimmed-but-active\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t$(this).closest(\".post.post_full\").addClass(\"xkit-servant-dimmed-but-active\");\n\t\t\t\t};\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).addClass(\"xkit-servant-dimmed\");\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control_menu.creator\").click(on_click);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tlike_post: {\n\n\t\t\ttext: \"Like the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Automatically likes the post\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control.like\").not(\".liked\").trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tunlike_post: {\n\n\t\t\ttext: \"Unlike the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Automatically unlikes the post\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control.like.liked\").trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tcolor_post: {\n\n\t\t\ttext: \"Colorize the post\",\n\t\t\tcompatibility: \"post\",\n\t\t\tdescription: \"Puts a colored band on top the post\",\n\t\t\ttype: \"color\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\n\n\t\t\t\tfor (var i = 0; i < to_pass.length; i++) {\n\t\t\t\t\tif (compatibility[i] === \"post\") {\n\t\t\t\t\t\t$(to_pass[i]).addClass(\"servant-post-colorize\");\n\t\t\t\t\t\t$(to_pass[i]).addClass(\"servant-post-color_\" + parameter.replace(\"#\", \"\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsep_99: {\n\n\t\t\ttext: \"Flow\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\task_me: {\n\n\t\t\ttext: \"Ask me before continuing\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"text\",\n\t\t\tstop: true,\n\t\t\tplaceholder: \"ie: 'You really wanna run the code?'\",\n\t\t\tdescription: \"Shows a confirmation window before moving to the next action, stops if you cancel.\",\n\n\t\t\trun: function(parameter) {\n\n\t\t\t\tif (confirm(\"XKit Servant Message\\nPlease confirm the action.\\n\\n\" + parameter)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdelete: {\n\n\t\t\ttext: \"Delete this servant\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"flow\",\n\t\t\tstop: true,\n\t\t\tdescription: \"Deletes this servant completely.\",\n\n\t\t\trun: function(parameters, returns, to_pass, compatibility, servant_object) {\n\n\t\t\t\tXKit.extensions.servant.delete_servant(servant_object.id);\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t},\n\n\t\tsep_100a: {\n\n\t\t\ttext: \"XKit\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\tenable_extension: {\n\n\t\t\ttext: \"Enable Extension\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"extension\",\n\t\t\tdescription: \"Enables and runs an extension, if it's disabled\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tsetTimeout(function() {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tif (XKit.installed.check(parameter) === true) {\n\t\t\t\t\t\t\tif (XKit.installed.enabled(parameter) === false) {\n\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (typeof XKit.extensions[parameter].preferences !== \"undefined\") {\n\t\t\t\t\t\t\t\t\t\tXKit.extensions.xkit_main.load_extension_preferences(parameter);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tXKit.extensions[parameter].run();\n\t\t\t\t\t\t\t\t\tXKit.installed.enable(parameter);\n\t\t\t\t\t\t\t\t\tXKit.notifications.add(\"Enabled '\" + parameter + \"'\", \"ok\");\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error(\"Can not run \" + parameter + \": \" + e.message);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\tconsole.error(\"Can't disable \" + parameter + \", \" + e.message);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t}, 1000);\n\n\t\t\t}\n\n\t\t},\n\n\t\tdisable_extension: {\n\n\t\t\ttext: \"Disable Extension\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"extension\",\n\t\t\tdescription: \"Disables and stop an extension, if it's enabled and running.<br/>Please note that some extensions might need you<br/>to refresh the page to be disabled completely and properly.\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tsetTimeout(function() {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tif (XKit.installed.check(parameter) === true) {\n\t\t\t\t\t\t\tif (XKit.installed.enabled(parameter) === true) {\n\t\t\t\t\t\t\t\tXKit.installed.disable(parameter);\n\t\t\t\t\t\t\t\tXKit.extensions[parameter].destroy();\n\t\t\t\t\t\t\t\tXKit.notifications.add(\"Disabled '\" + parameter + \"'\", \"ok\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\tconsole.error(\"Can't disable \" + parameter + \", \" + e.message);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t}, 1000);\n\n\n\t\t\t}\n\n\t\t},\n\n\t\tsep_100: {\n\n\t\t\ttext: \"Miscellaneous\",\n\t\t\ttype: \"separator\"\n\n\t\t},\n\n\t\trun_js: {\n\n\t\t\ttext: \"Run Javascript Code\",\n\t\t\tcompatibility: \"\",\n\t\t\ttype: \"textarea\",\n\t\t\tplaceholder: \"ie: 'alert(&quot;%1 happened!&quot;);'\",\n\t\t\tdescription: \"Lets you run Javascript Code.<br/>JQuery and XKit API is supported.\",\n\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\n\n\t\t\t\tvar parameter_fixed = parameter;\n\n\t\t\t\tfor (var i = 0; i <= 10; i++) {\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\n\t\t\t\t}\n\n\t\t\t\tvar m_post = \"\";\n\n\t\t\t\tfor (var j = 0; j < to_pass.length; j++) {\n\t\t\t\t\tif (compatibility[j] === \"post\") {\n\t\t\t\t\t\tm_post = $(to_pass[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (m_post !== \"\") {\n\t\t\t\t\tvar to_run = function() {\n\t\t\t\t\t\teval(parameter_fixed + \"\\n//# sourceURL=xkit/servant/servant\" + (new Date()).getTime() + \".js\");\n\t\t\t\t\t};\n\n\t\t\t\t\tto_run();\n\t\t\t\t} else {\n\t\t\t\t\teval(parameter_fixed + \"\\n//# sourceURL=xkit/servant/servant\" + (new Date()).getTime() + \".js\");\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\trefresh: {\n\n\t\t\ttext: \"Refresh the page\",\n\t\t\tcompatibility: \"\",\n\t\t\tdescription: \"Reloads the page.<br/>Can be useful after disabling/enabling an extension.\",\n\n\t\t\trun: function(parameter, returns) {\n\n\t\t\t\tlocation.reload();\n\n\t\t\t}\n\n\t\t},\n\n\t},\n\n\tload_servants: function() {\n\n\t\tvar servants_load = XKit.storage.get(\"servant\", \"servants\", \"\");\n\n\t\ttry {\n\n\t\t\tXKit.extensions.servant.servants = JSON.parse(servants_load);\n\t\t\tconsole.log(\"Servant loaded \" + XKit.extensions.servant.servants.length + \" servants.\");\n\n\t\t} catch (e) {\n\n\t\t\tXKit.extensions.servant.servants = [];\n\t\t\tXKit.extensions.servant.save_servants();\n\n\t\t}\n\n\t},\n\n\tsave_servants: function() {\n\n\t\tXKit.storage.set(\"servant\", \"servants\", JSON.stringify(XKit.extensions.servant.servants));\n\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif ($(\"body\").hasClass(\"xkit-servant-running\")) { console.log(\"Not going to run Servant again, no I won't.\"); return; }\n\n\t\t$(\"body\").addClass(\"xkit-servant-running\");\n\n\t\tXKit.tools.init_css(\"servant\");\n\n\t\tthis.load_servants();\n\t\tthis.run_servants();\n\n\t\t$(document).on(\"click\", \"#glass_overlay\", function() { $(\".xkit-servant-dimmed-but-active\").removeClass(\"xkit-servant-dimmed-but-active\"); });\n\n\t},\n\n\truns_on_posts: [],\n\n\trun_servants: function() {\n\n\t\tvar m_servants = XKit.extensions.servant.servants;\n\n\t\tif (m_servants.length === 0) { return; }\n\n\t\tvar runs_on_posts = [];\n\n\t\tfor (var i = 0; i < m_servants.length; i++) {\n\n\t\t\tvar m_result = XKit.extensions.servant.run_servant(m_servants[i], false);\n\n\t\t\tif (m_result == \"post\") {\n\t\t\t\t// This thing has a runs_on mode, for posts.\n\t\t\t\truns_on_posts.push(m_servants[i]);\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.log(\"- - --  -- - - - -RUNS ON POSTS - -- - - - - -- - - -\");\n\t\tconsole.log(runs_on_posts);\n\n\t\tXKit.extensions.servant.runs_on_posts = [];\n\n\t\tif (runs_on_posts.length > 0) {\n\n\t\t\tXKit.extensions.servant.runs_on_posts = runs_on_posts;\n\t\t\tXKit.post_listener.add(\"servant\", XKit.extensions.servant.do_posts);\n\t\t\tXKit.extensions.servant.do_posts();\n\t\t}\n\n\t},\n\n\tcolor_by_number: function() {\n\t\tif ($(\".servant-post-colorize\").length > 0) {\n\t\t\t$(\".servant-post-colorize\").each(function() {\n\t\t\t\tvar colorArray = [];\n\t\t\t\tvar classList = $(this).attr('class').split(/\\s+/);\n\t\t\t\t$.each(classList, function(index, value) {\n\t\t\t\t\tif (value.search(\"servant-post-color_\") > -1) {\n\t\t\t\t\t\t$.each(value.match(/_([a-zA-Z0-9]){6}/g), function(iIndex, iValue) {\n\t\t\t\t\t\t\tcolorArray.push(iValue);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tfor (var i = 0; i < colorArray.length; i++) {\n\t\t\t\t\tcolorArray[i] = colorArray[i].replace(\"_\", \"\");\n\t\t\t\t}\n\t\t\t\tvar uniques = [...new Set(colorArray)]; //eslint-disable-line no-undef\n\t\t\t\tvar backgroundString = \"\";\n\t\t\t\tfor (var j = 0; j < uniques.length; j++) {\n\t\t\t\t\tbackgroundString += `, #${uniques[j]} ${(100 / uniques.length) * j}%, #${uniques[j]} ${(100 / uniques.length) * (j + 1)}%`;\n\t\t\t\t}\n\t\t\t\t$(this).append(\"<div class=\\\"xkit-servant-rubber-band\\\" style=\\\"background: linear-gradient(to right\" + backgroundString + \")\\\">&nbsp;</div>\");\n\t\t\t});\n\t\t}\n\t},\n\n\tdo_posts: function() {\n\n\t\tvar posts = XKit.interface.get_posts(\"xkit-servants-all-done\");\n\n\t\t$(posts).each(function() {\n\n\t\t\tfor (var i = 0; i < XKit.extensions.servant.runs_on_posts.length; i++) {\n\t\t\t\tXKit.extensions.servant.run_servant(XKit.extensions.servant.runs_on_posts[i], true);\n\t\t\t}\n\n\t\t\t$(this).addClass(\"xkit-servant-all-done\");\n\n\t\t});\n\n\t\tXKit.extensions.servant.color_by_number();\n\t},\n\n\trun_servant: function(obj, post_mode) {\n\n\t\tconsole.log(\"Running servant with id \" + obj.id);\n\t\tconsole.log(obj);\n\n\t\t// to-do: check last run time.\n\n\t\tvar causes = obj.causes;\n\t\tvar actions = obj.actions;\n\n\t\tvar returns = [];\n\t\tvar to_pass = [];\n\t\tvar compatibility = [];\n\n\t\tvar do_run = -1;\n\t\tvar has_runs_on = false;\n\t\tvar does_run_on = \"\";\n\n\t\tfor (var i = 0; i < causes.length; i++) {\n\n\t\t\tif (XKit.extensions.servant.causes[causes[i].id].runs_on === \"post\") {\n\t\t\t\thas_runs_on = true;\n\t\t\t\tdoes_run_on = \"post\";\n\t\t\t}\n\n\t\t}\n\n\t\tvar m_object;\n\n\t\tif (has_runs_on === true && does_run_on === \"post\") {\n\n\t\t\tif (!post_mode) {\n\n\t\t\t\t// We will go through these later.\n\t\t\t\tconsole.log(\"Skipping because not in post_mode, and has class post mode.\");\n\t\t\t\treturn \"post\";\n\n\t\t\t} else {\n\n\t\t\t\tm_object = $(\".posts .post\").not(\".xkit-servant-\" + obj.id).not(\"#new_post\").first();\n\t\t\t\tif (m_object.length === 0) { return false; }\n\n\t\t\t}\n\n\t\t}\n\n\t\tcauses.forEach(function(cause) {\n\t\t\tvar to_run = XKit.extensions.servant.causes[cause.id].run;\n\n\t\t\tvar m_result = false;\n\n\t\t\tif (XKit.extensions.servant.causes[cause.id].runs_on === \"post\") {\n\n\t\t\t\tm_result = to_run(cause.value, $(m_object));\n\n\t\t\t} else {\n\n\t\t\t\tm_result = to_run(cause.value);\n\n\t\t\t}\n\n\t\t\t// Save the \"return\", ie: %1, %2..\n\t\t\treturns.push(m_result.return);\n\n\t\t\t// Save the pass, which can be a post object, etc.\n\t\t\tto_pass.push(m_result.pass);\n\n\t\t\t// We should save this too, so we wouldn't, for example,\n\t\t\t// push a post object to a function that doesn't take post objects.\n\t\t\tcompatibility.push(XKit.extensions.servant.causes[cause.id].compatibility);\n\n\t\t\tif (m_result.run === false || do_run === 0) {\n\t\t\t\tdo_run = 0;\n\t\t\t} else {\n\t\t\t\tdo_run = 1;\n\t\t\t}\n\t\t});\n\n\t\t$(m_object).addClass(\"xkit-servant-\" + obj.id);\n\n\t\tif (do_run !== 1) { return; }\n\n\t\tactions.forEach(function(action) {\n\n\t\t\tvar m_result = XKit.extensions.servant.actions[action.id].run(action.value, returns, to_pass, compatibility, obj);\n\n\t\t\tif (XKit.extensions.servant.actions[action.id].stop === true) {\n\n\t\t\t\t// This is a flow thingy, where we must wait for it to return a value\n\t\t\t\t// so we can go on.\n\n\t\t\t\tif (m_result === false) {\n\t\t\t\t\t// We should stop.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t\treturn \"\";\n\n\t},\n\n\tadd_cause_count: 0,\n\n\tshow_add: function(m_div) {\n\n\t\tvar m_html = \"<input type=\\\"text\\\" placeholder=\\\"Servant Title - optional (ie: 'Hide posts containing XKit on tracked pages')\\\" class=\\\"xkit-textbox\\\" id=\\\"xkit-servant-add-title\\\">\";\n\n\t\tXKit.extensions.servant.add_cause_count = 0;\n\t\tXKit.extensions.servant.add_action_count = 0;\n\n\t\t// ---- Causes\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-when xkit-servant-add-division\\\">\" +\n\t\t\t\t\t\"<div class=\\\"xkit-servant-division-title\\\">When</div>\" +\n\t\t\t\t\t\tXKit.extensions.servant.add_field_cause();\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-more xkit-servant-add-more-causes\\\">Add another</div>\";\n\t\tm_html = m_html + \"</div>\";\n\n\t\t// ---- Actions\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-do xkit-servant-add-division\\\">\" +\n\t\t\t\t\t\"<div class=\\\"xkit-servant-division-title\\\">Do</div>\" +\n\t\t\t\t\t\tXKit.extensions.servant.add_field_action();\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-more xkit-servant-add-more-actions\\\">Add another</div>\";\n\t\tm_html = m_html + \"</div>\";\n\n\t\t// ---- Additional\n\n\t\t// m_html = m_html + \"<div class=\\\"xkit-servant-silent-division\\\">&nbsp;</div><div class=\\\"xkit-checkbox\\\" style=\\\"padding-left: 0;\\\"><b>&nbsp;</b> Run this servant even when only one of the requirements is met. (OR mode)</div>\";\n\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-compatibility-error\\\"><b>There is an incompatibility here.</b><br/>For example, you can't create a servant with the job \\\"When the time is 7 PM, block the post\\\": please check the combination and try again. Click Help on bottom right for more information.</div>\";\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-javascript-warning\\\"><b>Be very careful!</b> The \\\"Run Javascript Code\\\" option is for experts. Do not copy/paste and run code from people you don't know and trust, very bad things can happen.</div>\";\n\n\t\tXKit.window.show(\"Add Servant\",\n\t\t\tm_html,\n\t\t\t\"question\",\n\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-add\">Add Servant</div>' +\n\t\t\t'<div id=\"xkit-close-message\" class=\"xkit-button\">Cancel</div>' +\n\t\t\t'<div id=\"xkit-servant-help\" class=\"xkit-button float-right\">Help &rarr;</div>',\n\t\ttrue);\n\n\t\tXKit.extensions.servant.bind_actions_on_add_window();\n\t\tXKit.extensions.servant.react_to_selection_change();\n\t\t$(\"#tiptip_holder\").css(\"z-index\", \"99000000\");\n\n\t\t$(\".xkit-servant-add-more-actions\").click(function() {\n\n\t\t\t$(\".xkit-servant-do\")\n\t\t\t\t.find(\".xkit-servant-add-more\")\n\t\t\t\t.before(XKit.extensions.servant.add_field_action());\n\n\t\t\tif ($(\".xkit-servant-option-line-action\").length === 5) {\n\t\t\t\t$(\".xkit-servant-add-more-actions\").css(\"display\", \"none\");\n\t\t\t}\n\n\t\t\tcenterIt($(\"#xkit-window\"));\n\n\t\t\tXKit.extensions.servant.readjust_lines($(\".xkit-servant-option-action-line-0\"));\n\n\t\t\tXKit.extensions.servant.bind_actions_on_add_window();\n\t\t\tXKit.extensions.servant.react_to_selection_change();\n\n\t\t});\n\n\t\t$(\".xkit-servant-add-more-causes\").click(function() {\n\n\t\t\t$(\".xkit-servant-when\")\n\t\t\t\t.find(\".xkit-servant-add-more\")\n\t\t\t\t.before(XKit.extensions.servant.add_field_cause());\n\n\t\t\tif ($(\".xkit-servant-option-line-cause\").length === 3) {\n\t\t\t\t$(\".xkit-servant-add-more-causes\").css(\"display\", \"none\");\n\t\t\t}\n\n\t\t\tcenterIt($(\"#xkit-window\"));\n\n\t\t\tXKit.extensions.servant.readjust_lines($(\".xkit-servant-option-cause-line-0\"));\n\n\t\t\tXKit.extensions.servant.bind_actions_on_add_window();\n\t\t\tXKit.extensions.servant.react_to_selection_change();\n\n\n\t\t});\n\n\t\t$(\"#xkit-servant-add\").click(function() {\n\n\t\t\tXKit.extensions.servant.process_add(m_div);\n\n\t\t});\n\n\t},\n\n\tcheck_if_empty_value: function() {\n\n\t\tvar found = false;\n\n\t\t$(\".xkit-servant-option-textbox\").each(function() {\n\n\t\t\tvar $this = $(this);\n\t\t\tif ($.trim($this.val()) === \"\") {\n\t\t\t\tfound = true;\n\t\t\t\tif ($this.attr(\"data-old-placeholder\")) { return; }\n\t\t\t\t$this\n\t\t\t\t\t.css(\"border-color\", \"red\")\n\t\t\t\t\t.attr(\"data-old-placeholder\", $this.attr(\"placeholder\"))\n\t\t\t\t\t.attr(\"placeholder\", \"You can't leave this empty!\")\n\t\t\t\t\t.val(\"\")\n\t\t\t\t\t.click(function() {\n\t\t\t\t\t\t$this\n\t\t\t\t\t\t\t.removeAttr(\"style\")\n\t\t\t\t\t\t\t.attr(\"placeholder\", $this.attr(\"data-old-placeholder\"))\n\t\t\t\t\t\t\t.removeAttr(\"data-old-placeholder\")\n\t\t\t\t\t\t\t.off(\"click\");\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\t$(\".xkit-servant-option-listbox\").each(function() {\n\n\t\t\tvar $this = $(this);\n\t\t\tif ($.trim($this.val()) === \"\") {\n\t\t\t\tfound = true;\n\t\t\t\tif ($this.attr(\"data-old-placeholder\")) { return; }\n\t\t\t\t$this\n\t\t\t\t\t.css(\"border-color\", \"red\")\n\t\t\t\t\t.attr(\"data-old-placeholder\", $this.attr(\"placeholder\"))\n\t\t\t\t\t.attr(\"placeholder\", \"You can't leave this empty!\")\n\t\t\t\t\t.val(\"\")\n\t\t\t\t\t.click(function() {\n\t\t\t\t\t\t$this\n\t\t\t\t\t\t\t.removeAttr(\"style\")\n\t\t\t\t\t\t\t.attr(\"placeholder\", $this.attr(\"data-old-placeholder\"))\n\t\t\t\t\t\t\t.removeAttr(\"data-old-placeholder\")\n\t\t\t\t\t\t\t.off(\"click\");\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\n\t\treturn found;\n\n\t},\n\n\tget_add_value: function(obj) {\n\n\t\tif ($(obj).find(\".xkit-servant-option-textbox\").length > 0) {\n\n\t\t\treturn $(obj).find(\".xkit-servant-option-textbox\").val();\n\n\t\t}\n\n\t\tif ($(obj).find(\".xkit-servant-option-listbox\").length > 0) {\n\n\t\t\treturn $(obj).find(\".xkit-servant-option-listbox\").val();\n\n\t\t}\n\n\t\tif ($(obj).find(\".xkit-servant-option-textareabox\").length > 0) {\n\n\t\t\treturn $(obj).find(\".xkit-servant-option-textareabox\").val();\n\n\t\t}\n\n\t\treturn \"\";\n\n\t},\n\n\tprocess_add: function(m_div) {\n\n\t\t// Get the WHENs and DOs.\n\n\t\tif ($(\"#xkit-servant-add\").hasClass(\"disabled\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar when = [];\n\t\tvar action = [];\n\n\t\tif (XKit.extensions.servant.check_if_empty_value()) { return; }\n\n\t\t$(\".xkit-servant-option-line-cause\").each(function() {\n\n\t\t\tvar m_object = {};\n\n\t\t\tm_object.id = $(this).find(\".xkit-servant-add-option\").val();\n\t\t\tm_object.value = XKit.extensions.servant.get_add_value($(this));\n\n\t\t\twhen.push(m_object);\n\n\t\t});\n\n\t\t$(\".xkit-servant-option-line-action\").each(function() {\n\n\t\t\tvar m_object = {};\n\n\t\t\tm_object.id = $(this).find(\".xkit-servant-add-option\").val();\n\t\t\tm_object.value = XKit.extensions.servant.get_add_value($(this));\n\n\t\t\taction.push(m_object);\n\n\t\t});\n\n\t\tvar m_servant = {};\n\n\t\tm_servant.id = XKit.tools.random_string() + Math.round(new Date().getTime() / 1000);\n\t\tm_servant.causes = when;\n\t\tm_servant.actions = action;\n\t\tm_servant.create_time = Math.round(new Date().getTime() / 1000);\n\t\tm_servant.last_run = -1;\n\n\t\tm_servant.title = $.trim($(\"#xkit-servant-add-title\").val());\n\n\t\tXKit.extensions.servant.load_servants();\n\n\t\tXKit.extensions.servant.servants.push(m_servant);\n\n\t\tXKit.extensions.servant.save_servants();\n\n\t\tXKit.window.close();\n\n\t\tXKit.extensions.xkit_preferences.restart_extension(\"servant\");\n\n\t\tif (typeof m_div !== \"undefined\") {\n\t\t\tXKit.extensions.servant.cpanel(m_div);\n\t\t}\n\n\t},\n\n\tadd_window_option_get_real_value: function(obj) {\n\n\t\tvar m_val = $(obj).val();\n\n\t\tvar to_return = \"\";\n\n\t\t$(obj).find(\"option\").each(function() {\n\n\t\t\tif ($(this).attr('value') === m_val) {\n\n\t\t\t\tto_return = $(this);\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t});\n\n\t\treturn to_return;\n\n\t},\n\n\tsettings_box_text: function(obj, parent, real_val) {\n\n\t\tvar m_placeholder = \"ie: 'xkit'\";\n\n\t\tif (typeof $(real_val).attr('data-placeholder') !== \"undefined\" && $(real_val).attr('data-placeholder') !== \"undefined\") { m_placeholder = $(real_val).attr('data-placeholder'); }\n\n\t\tm_placeholder = XKit.tools.replace_all(m_placeholder, \"\\\"\", \"&quot;\");\n\n\t\t$(obj).html(\"<input data-id=\\\"\" + $(parent).parent().attr('data-id') + \"\\\" type=\\\"text\\\" placeholder=\\\"\" + m_placeholder + \"\\\" class=\\\"xkit-textbox xkit-servant-option-textbox\\\">\");\n\n\t},\n\n\tsettings_box_textarea: function(obj, parent, real_val) {\n\n\t\tvar m_placeholder = \"ie: 'xkit'\";\n\n\t\tif (typeof $(real_val).attr('data-placeholder') !== \"undefined\" && $(real_val).attr('data-placeholder') !== \"undefined\") { m_placeholder = $(real_val).attr('data-placeholder'); }\n\n\t\tm_placeholder = XKit.tools.replace_all(m_placeholder, \"\\\"\", \"&quot;\");\n\n\t\t$(parent).parent().addClass(\"servant-contains-textarea\");\n\n\t\t$(obj).html(\"<textarea data-id=\\\"\" + $(parent).parent().attr('data-id') + \"\\\" placeholder=\\\"\" + m_placeholder + \"\\\" class=\\\"xkit-textbox xkit-servant-option-textareabox\\\"></textarea>\");\n\n\t\t$(\".xkit-servant-option-textareabox\").bind(\"keydown\", function(event) {\n\n\t\t\tevent.stopPropagation();\n\t\t\tevent.stopImmediatePropagation();\n\n\t\t});\n\n\t},\n\n\tsettings_box_extension: function(obj, parent, real_val) {\n\n\t\tvar m_array = XKit.installed.list();\n\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\n\n\t\tfor (var i = 0; i < m_array.length; i++) {\n\n\t\t\tvar extension_name = XKit.installed.title(m_array[i]);\n\t\t\tvar extension_id = m_array[i];\n\n\t\t\tif (m_array[i].substring(0, 5) === \"xkit_\") { continue; }\n\n\t\t\tm_html = m_html + \"<option value=\\\"\" + extension_id + \"\\\">\" + extension_name + \"</option>\";\n\n\t\t}\n\n\t\tm_html = m_html + \"</select>\";\n\n\t\t$(obj).html(m_html);\n\n\t},\n\n\tsettings_box_color: function(obj, parent, real_val) {\n\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\n\n\t\tm_html = m_html + \"<option value=\\\"#de4c4c\\\">Red</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#df982e\\\">Orange</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#fde72d\\\">Yellow</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#7bcf47\\\">Green</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#4cadde\\\">Blue</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#b94cde\\\">Purple</option>\";\n\n\t\tm_html = m_html + \"<option value=\\\"#838383\\\">Light Gray</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#d6d6d6\\\">Gray</option>\";\n\t\tm_html = m_html + \"<option value=\\\"#000\\\">Black</option>\";\n\n\t\tm_html = m_html + \"</select>\";\n\n\t\t$(obj).html(m_html);\n\n\t},\n\n\tsettings_box_post_type: function(obj, parent, real_val) {\n\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\n\n\t\tm_html = m_html + \"<option value=\\\"text\\\">Text</option>\";\n\t\tm_html = m_html + \"<option value=\\\"note\\\">Ask</option>\";\n\t\tm_html = m_html + \"<option value=\\\"photo\\\">Photo / Photoset</option>\";\n\t\tm_html = m_html + \"<option value=\\\"quote\\\">Quote</option>\";\n\t\tm_html = m_html + \"<option value=\\\"link\\\">Link</option>\";\n\t\tm_html = m_html + \"<option value=\\\"chat\\\">Chat</option>\";\n\t\tm_html = m_html + \"<option value=\\\"audio\\\">Audio</option>\";\n\t\tm_html = m_html + \"<option value=\\\"video\\\">Video</option>\";\n\n\t\tm_html = m_html + \"</select>\";\n\n\t\t$(obj).html(m_html);\n\n\t},\n\n\tsettings_box_day: function(obj, parent, real_val) {\n\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\n\n\t\tm_html = m_html + \"<option value=\\\"1\\\">Monday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"2\\\">Tuesday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"3\\\">Wednesday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"4\\\">Thursday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"5\\\">Friday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"6\\\">Saturday</option>\";\n\t\tm_html = m_html + \"<option value=\\\"0\\\">Sunday</option>\";\n\n\t\tm_html = m_html + \"</select>\";\n\n\t\t$(obj).html(m_html);\n\n\t},\n\n\tcheck_js: function() {\n\n\t\tvar to_return = false;\n\n\t\t$(\".xkit-servant-cause-selector\").each(function() {\n\t\t\tif ($(this).val() === \"run_js\") {\n\t\t\t\tto_return = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\t$(\".xkit-servant-action-selector\").each(function() {\n\t\t\tif ($(this).val() === \"run_js\") {\n\t\t\t\tto_return = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\treturn to_return;\n\n\t},\n\n\tcheck_compatibility: function() {\n\n\t\t// show xkit-servant-compatibility-error?\n\t\tvar m_compatibility_cause = \"\";\n\t\tvar m_compatibility_action = \"\";\n\n\t\t$(\".xkit-servant-cause-selector\").each(function() {\n\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\n\n\t\t\t\tif (m_compatibility_cause === \"\") {\n\t\t\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\n\t\t\t\t\t\tm_compatibility_cause = XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t\t$(\".xkit-servant-action-selector\").each(function() {\n\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\n\n\t\t\t\tif (m_compatibility_action === \"\") {\n\t\t\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\n\t\t\t\t\t\tm_compatibility_action = XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t\tif (m_compatibility_action === \"\" && m_compatibility_cause === \"\") { return false; }\n\t\tif (m_compatibility_action !== m_compatibility_cause && m_compatibility_action !== \"\") { return true; }\n\n\t\treturn false;\n\n\t},\n\n\treact_to_selection_change: function(obj) {\n\n\t\tvar selector = \".xkit-servant-add-option\";\n\n\t\tif (typeof obj !== \"undefined\") { selector = obj; }\n\n\t\t$(selector).each(function() {\n\n\t\t\tvar settings_box = $(this).parent().find(\".xkit-servant-add-option-settings\");\n\t\t\tif ($(settings_box).parent().attr('data-last-id') === $(this).val()) { return; }\n\n\t\t\t$(settings_box).html(\"\");\n\n\t\t\t$(this).removeClass(\"xkit-servant-half-option\");\n\t\t\t$(this).removeClass(\"servant-contains-textarea\");\n\n\t\t\t$(settings_box).removeClass(\"xkit-servant-options-shown\");\n\n\t\t\t$(settings_box).parent().attr('data-last-id', $(this).val());\n\n\t\t\t$(settings_box).parent().find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(settings_box).parent().find(\".xkit-servant-add-option\")).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"text\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_text(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"textarea\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_textarea(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"color\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_color(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"post_type\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_post_type(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"day\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_day(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"extension\") {\n\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\n\n\t\t\t\tXKit.extensions.servant.settings_box_extension(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\n\n\t\t\t}\n\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns') !== \"undefined\" && XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns') !== \"undefined\") {\n\n\t\t\t\tvar m_id = $(settings_box).parent().attr('data-id');\n\n\t\t\t\t$(settings_box).parent().find(\".xkit-servant-add-option-returns\").attr('title', \"<b>Returns:</b><br/>%\" + (parseInt(m_id) + 1) + \": \" + XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns')).tipTip({ delay: 0, defaultPosition: \"left\" });\n\n\t\t\t\t$(settings_box).parent().find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\n\n\t\t\t\t$(settings_box).parent().addClass(\"xkit-servant-return-values-shown\");\n\n\t\t\t} else {\n\n\t\t\t\t$(settings_box).parent().removeClass(\"xkit-servant-return-values-shown\");\n\n\t\t\t}\n\n\t\t});\n\n\t\tif (XKit.extensions.servant.check_js() === true) {\n\t\t\t$(\".xkit-servant-javascript-warning\").css(\"display\", \"block\");\n\t\t} else {\n\t\t\t$(\".xkit-servant-javascript-warning\").css(\"display\", \"none\");\n\t\t}\n\n\t\tif (XKit.extensions.servant.check_compatibility() === true) {\n\t\t\t$(\".xkit-servant-compatibility-error\").css(\"display\", \"block\");\n\t\t\t$(\"#xkit-servant-add\").addClass(\"disabled\");\n\t\t} else {\n\t\t\t$(\".xkit-servant-compatibility-error\").css(\"display\", \"none\");\n\t\t\t$(\"#xkit-servant-add\").removeClass(\"disabled\");\n\t\t}\n\n\t\tcenterIt($(\"#xkit-window\"));\n\n\t},\n\n\tbind_actions_on_add_window: function() {\n\n\t\t$(\".xkit-servant-add-delete-line\").unbind(\"click\");\n\t\t$(\".xkit-servant-add-delete-line\").bind(\"click\", function() {\n\n\t\t\tvar id = $(this).attr('data-id');\n\n\t\t\tif (id === \"0\") { return; }\n\n\t\t\t$(this).parent().fadeOut('fast', function() {\n\t\t\t\tvar $obj = $(this);\n\t\t\t\t$obj.remove();\n\t\t\t\tif ($obj.hasClass(\"xkit-servant-option-line-cause\")) {\n\t\t\t\t\t$(\".xkit-servant-add-more-causes\").removeAttr(\"style\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\".xkit-servant-add-more-actions\").removeAttr(\"style\");\n\t\t\t\t}\n\t\t\t\tXKit.extensions.servant.readjust_lines($obj);\n\t\t\t\tcenterIt($(\"#xkit-window\"));\n\t\t\t\tXKit.extensions.servant.react_to_selection_change();\n\t\t\t});\n\n\t\t});\n\n\t\t$(\".xkit-servant-add-option\").unbind(\"change\");\n\t\t$(\".xkit-servant-add-option\").bind(\"change\", function() {\n\n\t\t\tXKit.extensions.servant.react_to_selection_change();\n\n\t\t});\n\n\t\t$(\"#xkit-servant-help\")\n\t\t\t.unbind(\"click\")\n\t\t\t.bind(\"click\", XKit.extensions.servant.show_help);\n\n\t},\n\n\treadjust_lines: function(obj) {\n\n\t\tvar line_obj = $(obj);\n\n\t\tvar selector = \"\";\n\n\t\tvar is_action = false;\n\n\t\tif ($(line_obj).hasClass(\"xkit-servant-option-line-cause\")) {\n\t\t\tselector = \".xkit-servant-option-line-cause\";\n\t\t} else {\n\t\t\tselector = \".xkit-servant-option-line-action\";\n\t\t\tis_action = true;\n\t\t}\n\n\t\tvar index = 0;\n\n\t\t$(selector).each(function() {\n\n\t\t\t$(this).attr('data-id', index);\n\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\t$(this).removeClass(\"xkit-servant-option-action-line-\" + i);\n\t\t\t\t$(this).removeClass(\"xkit-servant-option-cause-line-\" + i);\n\t\t\t}\n\n\t\t\t$(this).find(\".xkit-servant-add-delete-line\").attr('data-id', index);\n\n\t\t\t$(this).find(\".xkit-servant-help-for-line\").attr('data-id', index);\n\n\t\t\tif (is_action) {\n\t\t\t\t$(this).addClass(\"xkit-servant-option-action-line-\" + index);\n\t\t\t\t$(this).find(\".xkit-servant-add-option-settings\").attr('id', \"servant-action-\" + index + \"-settings\");\n\t\t\t} else {\n\t\t\t\t$(this).addClass(\"xkit-servant-option-cause-line-\" + index);\n\t\t\t\t$(this).find(\".xkit-servant-add-option-settings\").attr('id', \"servant-cause-\" + index + \"-settings\");\n\t\t\t}\n\n\t\t\t$(this).find(\".xkit-servant-add-option\").attr(\"id\", \"servant-cause-\" + index);\n\n\t\t\t$(this).find(\".xkit-servant-add-option-returns\").attr('title', \"<b>Returns:</b><br/>%\" + (index + 1) + \": \" + XKit.extensions.servant.add_window_option_get_real_value($(this).find(\".xkit-servant-add-option\")).attr('data-returns')).tipTip({ delay: 0, defaultPosition: \"left\" });\n\n\t\t\t$(this).find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(this).find(\".xkit-servant-add-option\")).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\n\n\t\t\tindex++;\n\n\t\t});\n\n\t},\n\n\tadd_field_cause: function() {\n\n\t\tvar m_html = \"<div data-id=\\\"\" + XKit.extensions.servant.add_cause_count + \"\\\" class=\\\"xkit-servant-option-line xkit-servant-option-line-cause xkit-servant-option-cause-line-\" + XKit.extensions.servant.add_action_count + \"\\\"><div data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-add-delete-line\\\">&nbsp;</div>\";\n\n\t\tm_html = m_html + \"<div data-section=\\\"cause\\\" data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-help-for-line\\\">&nbsp;</div>\";\n\n\t\tvar causes_html = \"\";\n\n\t\tfor (var obj in XKit.extensions.servant.causes) {\n\n\t\t\tvar dis_class = \"\";\n\t\t\tvar m_text = XKit.extensions.servant.causes[obj].text;\n\t\t\tif (XKit.extensions.servant.causes[obj].type === \"separator\") {\n\t\t\t\tdis_class = \"disabled\";\n\t\t\t\tm_text = \" --- \" + m_text + \" --- \";\n\t\t\t}\n\t\t\tcauses_html = causes_html + \"<option data-description=\\\"\" + XKit.extensions.servant.causes[obj].description + \"\\\" data-returns=\\\"\" + XKit.extensions.servant.causes[obj].returns + \"\\\" data-placeholder=\\\"\" + XKit.extensions.servant.causes[obj].placeholder + \"\\\"  data-compatibility=\\\"\" + XKit.extensions.servant.causes[obj].compatibility + \"\\\" data-additional=\\\"\" + XKit.extensions.servant.causes[obj].additional + \"\\\" data-type=\\\"\" + XKit.extensions.servant.causes[obj].type  + \"\\\" \" + dis_class + \" value=\\\"\" + obj + \"\\\">\" + m_text + \"</option>\";\n\n\t\t}\n\n\t\tm_html = m_html + \"<select class=\\\"xkit-servant-add-option xkit-servant-cause-selector\\\" id=\\\"servant-cause-\" + XKit.extensions.servant.add_cause_count + \"\\\">\" + causes_html + \"</select>\";\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-settings\\\" id=\\\"servant-cause-\" + XKit.extensions.servant.add_cause_count + \"-settings\\\">&nbsp;</div>\";\n\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-returns\\\">&nbsp;</div>\";\n\t\tm_html = m_html + \"</div>\";\n\n\t\tXKit.extensions.servant.add_cause_count++;\n\t\treturn m_html;\n\n\t},\n\n\tadd_field_action: function() {\n\n\t\tvar m_html = \"<div class=\\\"xkit-servant-option-line xkit-servant-option-line-action xkit-servant-option-action-line-\" + XKit.extensions.servant.add_action_count + \"\\\"><div data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-add-delete-line\\\">&nbsp;</div>\";\n\t\tvar causes_html = \"\";\n\n\t\tm_html = m_html + \"<div data-section=\\\"action\\\" data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-help-for-line\\\">&nbsp;</div>\";\n\n\t\tfor (var obj in XKit.extensions.servant.actions) {\n\n\t\t\tvar dis_class = \"\";\n\t\t\tvar m_text = XKit.extensions.servant.actions[obj].text;\n\t\t\tif (XKit.extensions.servant.actions[obj].type === \"separator\") {\n\t\t\t\tdis_class = \"disabled\";\n\t\t\t\tm_text = \" --- \" + m_text + \" --- \";\n\t\t\t}\n\t\t\tcauses_html = causes_html + \"<option data-description=\\\"\" + XKit.extensions.servant.actions[obj].description + \"\\\" data-placeholder=\\\"\" + XKit.extensions.servant.actions[obj].placeholder + \"\\\" data-compatibility=\\\"\" + XKit.extensions.servant.actions[obj].compatibility + \"\\\" data-additional=\\\"\" + XKit.extensions.servant.actions[obj].additional + \"\\\" data-type=\\\"\" + XKit.extensions.servant.actions[obj].type  + \"\\\" \" + dis_class + \" value=\\\"\" + obj + \"\\\">\" + m_text + \"</option>\";\n\n\t\t}\n\n\t\tm_html = m_html + \"<select class=\\\"xkit-servant-add-option xkit-servant-action-selector\\\" id=\\\"servant-action-\" + XKit.extensions.servant.add_action_count + \"\\\">\" + causes_html + \"</select>\";\n\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-settings\\\" id=\\\"servant-action-\" + XKit.extensions.servant.add_action_count + \"-settings\\\">&nbsp;</div>\";\n\n\t\tm_html = m_html + \"</div>\";\n\n\n\t\tXKit.extensions.servant.add_action_count++;\n\t\treturn m_html;\n\n\t},\n\n\tcontrol_panel_div: \"\",\n\tservant_count_for_list: 1,\n\n\tcreate_cpanel_div: function(obj) {\n\n\t\tvar m_title = obj.title;\n\n\t\tif (!obj.title) {\n\t\t\tm_title = \"Servant #\" + XKit.extensions.servant.servant_count_for_list;\n\t\t}\n\n\t\tvar m_description = \"When \";\n\n\t\tvar m_action = \"\";\n\t\tvar m_val;\n\n\t\tif (obj.actions.length > 1) {\n\t\t\tfor (var i = 0; i < obj.actions.length; i++) {\n\t\t\t\tm_val = \"\";\n\t\t\t\tm_action = m_action + XKit.extensions.servant.actions[obj.actions[i].id].text.toLowerCase();\n\t\t\t\tif (i < obj.actions.length - 1) {\n\t\t\t\t\tm_action = m_action + \" and \";\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tm_action = XKit.extensions.servant.actions[obj.actions[0].id].text.toLowerCase();\n\t\t}\n\n\t\tif (obj.causes.length > 1) {\n\t\t\tfor (var cause_i = 0; cause_i < obj.causes.length; cause_i++) {\n\t\t\t\tvar cause = obj.causes[cause_i];\n\t\t\t\tm_val = \"\";\n\t\t\t\tif (typeof cause.value !== \"undefined\" && cause.value !== \"\") {\n\t\t\t\t\tm_val = \" \" + cause.value;\n\t\t\t\t}\n\t\t\t\tm_description = m_description + XKit.extensions.servant.causes[cause.id].text + m_val;\n\t\t\t\tif (cause_i < obj.causes.length - 1) {\n\t\t\t\t\tm_description = m_description + \" and \";\n\t\t\t\t}\n\t\t\t}\n\t\t\tm_description = m_description + \", \" + m_action;\n\t\t} else {\n\t\t\tm_val = \"\";\n\t\t\tif (typeof obj.causes[0].value !== \"undefined\" && obj.causes[0].value !== \"\") {\n\t\t\t\tm_val = \" \" + obj.causes[0].value;\n\t\t\t}\n\t\t\tm_description = m_description + XKit.extensions.servant.causes[obj.causes[0].id].text + m_val + \", \" + m_action;\n\t\t}\n\n\t\tm_description = m_description + \". \";\n\n\t\treturn\t\"<div class=\\\"xkit-servant-list-item\\\" data-servant-id=\\\"\" + obj.id + \"\\\">\" +\n\t\t\t\t\"<div class=\\\"m-title\\\">\" + m_title + \"</div>\" +\n\t\t\t\t\"<div class=\\\"m-description\\\">\" + m_description + \"</div>\" +\n\t\t\t\t\"<div data-servant-id=\\\"\" + obj.id + \"\\\" class=\\\"xkit-servant-item-delete\\\">&nbsp;</div>\" +\n\t\t\t\"</div>\";\n\t},\n\n\tcpanel: function(m_div) {\n\n\t\tXKit.extensions.servant.control_panel_div = m_div;\n\n\t\t$(\"#xkit-servant-cp\").remove();\n\n\t\tXKit.extensions.servant.load_servants();\n\n\t\tvar servant_html = \"\";\n\n\t\tif (XKit.extensions.servant.servants.length === 0) {\n\n\t\t\tservant_html = \"<div id=\\\"servant-list-no-servants\\\">You have no servants.<br/>You can add one by clicking the button above.</div>\";\n\n\t\t} else {\n\n\t\t\tXKit.extensions.servant.servant_count_for_list = 1;\n\n\t\t\tfor (var i = 0; i < XKit.extensions.servant.servants.length; i++) {\n\n\t\t\t\tservant_html = servant_html + XKit.extensions.servant.create_cpanel_div(XKit.extensions.servant.servants[i]);\n\t\t\t\tXKit.extensions.servant.servant_count_for_list++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar m_html = \"<div id=\\\"xkit-servant-cp\\\">\" +\n\t\t\t\t\t\"<div id=\\\"servant-toolbar\\\">\" +\n\t\t\t\t\t\t\"<div id=\\\"servant-add-button\\\" class=\\\"xkit-button\\\">Add new servant..</div>\" +\n\t\t\t\t\t\t\"<div id=\\\"servant-refresh-warning\\\">You need to refresh the page for changes to take affect</div>\" +\n\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\"<div id=\\\"servant-list\\\">\" +\n\t\t\t\t\t\tservant_html +\n\t\t\t\t\t\"</div>\" +\n\t\t\t\t\"</div>\";\n\n\n\t\t$(m_div).append(m_html);\n\n\t\t$(\"#servant-add-button\").click(function() {\n\n\t\t\tXKit.extensions.servant.show_add(m_div);\n\n\t\t});\n\n\t\t$(\".xkit-servant-item-delete\").click(function() {\n\n\t\t\tvar m_id = $(this).attr('data-servant-id');\n\t\t\tXKit.extensions.servant.delete_servant(m_id);\n\t\t\t$(this).parent().slideUp('fast', function() {\n\n\t\t\t\t$(this).remove();\n\n\t\t\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\n\n\t\t\t\tif (XKit.extensions.servant.servants.length === 0) {\n\t\t\t\t\tXKit.extensions.servant.cpanel(XKit.extensions.servant.control_panel_div);\n\t\t\t\t}\n\n\t\t\t\tXKit.extensions.xkit_preferences.restart_extension(\"servant\");\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller({ scroll: 'top' });\n\n\t},\n\n\tdelete_servant: function(id) {\n\n\t\tXKit.extensions.servant.load_servants();\n\n\t\tfor (var i = 0; i < XKit.extensions.servant.servants.length; i++) {\n\n\t\t\tif (XKit.extensions.servant.servants[i].id === id) {\n\n\t\t\t\tXKit.extensions.servant.servants.splice(i, 1);\n\n\t\t\t}\n\n\t\t}\n\n\t\tXKit.extensions.servant.save_servants();\n\n\t},\n\n\tshow_help: function() {\n\n\t\tXKit.window.show(\"Servant: Introduction\",\n\t\t\t\"This extension allows you to create servants, little code snippets which run when you want them to.<br>\" +\n\t\t\t\"You can also write your own Javascript code!<br><br>\" +\n\t\t\t\"Each cause and action has a small &quot;i&quot; icon next to them. Select a cause or action, then hover over the icon to see what they do.\",\n\t\t\t\"info\",\n\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-returns\">Next &rarr;</div>' +\n\t\t\t'<div class=\"xkit-button\" id=\"xkit-servant-cancel-tour\">Back</div>' +\n\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Close</div>');\n\n\t\t$(\"#xkit-servant-cancel-tour\").click(function() {\n\t\t\tXKit.extensions.servant.show_add(XKit.extensions.servant.control_panel_div);\n\t\t});\n\n\t\t$(\"#xkit-servant-returns\").click(function() {\n\t\t\tXKit.window.show(\"Servant: What are returns?\",\n\t\t\t\t\"Some causes &quot;return&quot; data. Here's how to use them.<br><br>\" +\n\t\t\t\t\"Some servant causes have a symbol, a box with an arrow pointing out. \" +\n\t\t\t\t\"Hovering over them shows what they return. Here's an example:<br>\" +\n\t\t\t\t'<img src=\"https://new-xkit.github.io/XKit/Extensions/dist/page/images/return_1.png\" style=\"border: 1px solid #aaaa; border-radius: 3px;\"><br>' +\n\t\t\t\t\"This basically means that if you type &quot;%1&quot; on the actions panel, that %1 will get replaced with the time.\",\n\t\t\t\t\"info\",\n\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-js-intro\">Next &rarr;</div>' +\n\t\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Close</div>',\n\t\t\ttrue);\n\t\t\t$(\"#xkit-servant-intro\").click(XKit.extensions.servant.show_help);\n\t\t\t$(\"#xkit-servant-js-intro\").click(function() {\n\t\t\t\tXKit.window.show(\"Servant: How to use JavaScript code?\",\n\t\t\t\t\t\"If you are a poweruser, you can also use JavaScript code. This allows you to do things that Servant does not support. \" +\n\t\t\t\t\t'You have access to the <a href=\"https://github.com/new-xkit/XKit/wiki#api-functions\" target=\"_blank\">XKit API</a> and to jQuery.<br><br>' +\n\t\t\t\t\t\"<b>Be careful though, and never copy/paste code from untrustworthy sources!</b><br>\" +\n\t\t\t\t\t\"You should never use code you didn't review. Do not use obfuscated code.\",\n\t\t\t\t\t\"info\",\n\t\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-js-causes\">Next &rarr;</div>' +\n\t\t\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Close</div>',\n\t\t\t\ttrue);\n\t\t\t\t$(\"#xkit-servant-js-causes\").click(function() {\n\t\t\t\t\tXKit.window.show(\"Servant: JavaScript on causes\",\n\t\t\t\t\t\t\"When writing a cause Javascript code, simply return true or false and Servant will do the rest.<br><p>\" +\n\t\t\t\t\t\t\"// Check if we should run.<br>\" +\n\t\t\t\t\t\t\"if (XKit.interface.where().inbox === true) {<br>\" +\n\t\t\t\t\t\t\"&zwnj;&emsp;&emsp;return true;<br>\" +\n\t\t\t\t\t\t\"} else {<br>\" +\n\t\t\t\t\t\t\"&zwnj;&emsp;&emsp;return false;<br>\" +\n\t\t\t\t\t\t\"}</p>\" +\n\t\t\t\t\t\t'You can also use this to initialise your code, for example to <a href=\"https://github.com/new-xkit/XKit/wiki/XKit.interface#adding-buttons\" target=\"_blank\">add a control button</a>.',\n\t\t\t\t\t\t\"info\",\n\t\t\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-js-actions\">Next &rarr;</div>' +\n\t\t\t\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Close</div>',\n\t\t\t\t\ttrue);\n\t\t\t\t\t$(\"#xkit-servant-js-actions\").click(function() {\n\t\t\t\t\t\tXKit.window.show(\"Servant: JavaScript on actions\",\n\t\t\t\t\t\t\t\"If your servant runs on a post, you can access the post using the variable <b>post</b>.<p>\" +\n\t\t\t\t\t\t\t\"// Make the said post's background red!<br>\" +\n\t\t\t\t\t\t\t'$(post).css(\"background\",\"red\");</p>' +\n\t\t\t\t\t\t\t\"You can also use any cause returns:<p>\" +\n\t\t\t\t\t\t\t'$(post).append(\"I made this red because it contained \\\"%1\\\"!\");</p>',\n\t\t\t\t\t\t\t\"info\",\n\t\t\t\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-servant-done\">Got it - add a new servant!</div>' +\n\t\t\t\t\t\t\t'<div class=\"xkit-button\" id=\"xkit-close-message\">Close</div>',\n\t\t\t\t\t\ttrue);\n\n\t\t\t\t\t\t$(\"#xkit-servant-done\").click(function() {\n\t\t\t\t\t\t\tXKit.extensions.servant.show_add(XKit.extensions.servant.control_panel_div);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NTkwODBENDRFNDgxMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NTkwODBEMzRFNDgxMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mn9SrQAABKhJREFUeNrsWk2IHEUUfq+qu2d2w6zubIKSgwRj0AUPIiSCZyXoyVMOelDwFs8iqHc9ePEQEE+elJBDSAKBRfDi1V+MgSAYWF3zY0hmnd3Nzkx3PWtmZ2Znuqtrqqqr2WlIMzRD9+tX79X7+97rxhM/dKHKR4BQ7YNVXP7qWyAAIAAcnLPH5HUcUYKWWMMKZnGYXFFPNmkB1NBR5r+Go56AVDydyR7FwDwpcHAaNEJ4ucHX7idVTaOxgA+OsteavKALHZgJaBCpnz7Fb/folza5McHnf/YPJRoBfX4sXOCzrX+8jjWEf2N664/erQ7OiwLNCL5bDbmNPD9t09mb8XbsEsTkXQFE7BAs2ijw4iF8Y4V9fTdxiIG5ONY7sNYS6BLEJeShFMu7PdroKnIFY/BcHSOEhODjjfhBTA7CBGXk0VRtudIS524rfCNkcPFEdDSCr+4l17aFmyTShWgaaZEW0oEBCCOcQn59g6AKosksdYjTrzvw5Z0YjRChQpiA4UwIZRLlUxzY9CNyBYYKVjXE9S58+FdPpAnIYKEyoYSUZpHt840YKleRHv/JP7EsAkVkwFPXdr0rUGPw6hLnA7mkIjd2xfUdUVL6wpd+3zV08zlFoxyqfcg0WjQIQuxDGpskS/djuOMJwXgI4ici/OKYHfK53BKf3Yo9WcBHFhKDpG6bqeZFAYYuCcCbAmhdetOzFqeWiHD2iAVMhjdKLEQ5NRAHq6ZnLQ4K4BDwkXKJ0UJGwxsLOJ3HlGWuS3S53qVktFHLHFam10FQK43DHbGwScALw1GW4dAW9P7fvR0xlONMM3hnhafgKme+gtg3+p/c5jyPRH/jEJmFsLAClGUhy8KYM1cq4AlFemgplQmxS/sWiElnn4N3oawoi4jvHeG9UcI4XmclupCHIM5oEDF4ZYnrdZ6jIEZ7b5ZPeAzioiy4k9d5hBJilAyFXe7p0/fPDrs5KGRCz9Zg9WFDw2YldH0BYHIPQsvtlFHNc5djZsKwcT9QtJfcFnD+QWzlSDe74GukGfDCvviQ4Op/1jNN7i8GKt4T8xI0kO50eNCr7iF36WNtUdbQo1AdaHBsJ6S8/tGTYX1UH9baycVWPHcWOLkQPB7Qt+1EaYEIccw59Ofxahzg8GsGeKbJGKrvsn6Sp8m077aKyS/g6NIQvt0MGwx3BSgf79BUD9BHPqW9zXXJQq8v8Wdr/edeWGDLKueoMQgmQCoWAM8zZ57SAmRDD09H7PQIaa7W2WrdSAg+HOLvTTGA3Iex2fcDinu6aceby4ED5GBT0wR0miQppcI8NEqZIczw/GeXDlv6HQ7bS1KOlYw3O7W5e3cpFcSY82f/fGkzbvLwmdrQJ8jMvwcuhKoeDi27vbRU1v4gUeyFzfjsSvAYx++3kh8fipmDrR0hyvskw6USbyX0TSt5t8m3BN2LySQcy1TAKcNt9MSlTaijt8bqAFrK3zoCYB4UqDqcrrwCXJ2hDWuz5llUlRS3iqv7lFM29dnX9Jh5d4/Gn0uOiSmHAC1f/UP+xwc0DmKNupgjn1JK0GAQV03y7IwjBRTq6qUhAynBco8NKRVyBgyr3db/L8AA9YdwpolZBTYAAAAASUVORK5CYII=","css":"#servant-toolbar {\n\tbackground: rgb(245,245,245);\n\tpadding: 3px 15px;\n\tborder-bottom: 1px solid rgb(190,190,190);\n\tposition: relative;\n}\n\n.xkit-servant-dimmed { opacity: 0.33; }\n.xkit-servant-dimmed.xkit-servant-dimmed-but-active { opacity: 1; }\n\n.xkit-servant-rubber-band {\n\n\tposition: absolute;\n\ttop: 0; left: 0;\n\twidth: 100%; height: 6px;\n\tz-index: 9;\n\tborder-radius: 3px 3px 0px 0px;\n\n}\n\n.post_full .post_permalink { z-index: 10; }\n\n#servant-refresh-warning {\n\tfont-size: 12px;\n\tposition: absolute;\n\ttop: 11px;\n\tright: 20px;\n\tline-height: 20px;\n\theight: 20px;\n\tcolor: rgb(120,120,120);\n\tbackground: no-repeat 0px 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAXUlEQVQYV3XQwQ0AIQgEQGjhquXh0wfV2oIXLlkDi+dPMi6ICh0z2+6uXC+FQGM+MscSxgcCIYlxgwFuqR/MaYBRz6kN5k8UeJstWvOsypDXgtTTmgHuWFNb7N+DF+nsQgtDvJ+YAAAAAElFTkSuQmCC');\n\tpadding-left: 15px;\n}\n\n.xkit-servant-list-item .m-title { font-weight: bold; }\n.xkit-servant-list-item .m-description {\n\n\tcolor: rgb(120,120,120); font-size: 12px;\n\tmax-width: 490px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\n}\n\n#servant-list-no-servants {\n\n\ttext-align: center;\n\tpadding-top: 42px;\n\tfont-size: 13px;\n\tcolor: rgb(130,130,130);\n\n}\n\n.xkit-servant-list-item:last-child { border-bottom: 0; }\n\n.xkit-servant-list-item {\n\n\theight: 35px;\n\tline-height: 18px;\n\tpadding-left: 27px;\n\tborder-bottom: 1px solid rgb(220,220,220);\n\tfont-size: 13px;\n\tcolor: rgb(80,80,80);\n\tposition: relative;\n\tpadding-top: 10px;\n\tpadding-bottom: 10px;\n\n}\n\n.xkit-servant-item-delete {\n\n\tposition: absolute;\n\tleft: 7px;\n\ttop: 15px;\n\tbackground: no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAALElEQVQIW2NkwAMYQXIXOTj+g2j9Hz9Q+GAOsgIYH6QQLonNBMI6CdqJzdEAOZQXyGBIAx8AAAAASUVORK5CYII=');\n\theight: 25px;\n\twidth: 13px;\n\topacity: 0.45;\n\tcursor: pointer;\n\tz-index: 100;\n\n}\n\n.xkit-servant-item-delete:hover { opacity: 0.8; }\n\n.xkit-servant-add-division {\n\n\tposition: relative;\n\tborder-top: 1px solid rgb(200,200,200);\n\tpadding: 5px;\n\tpadding-left: 100px;\n\tmargin-top: 5px;\n\n}\n\n.xkit-servant-silent-division {\n\n\tmargin-top: 5px;\n\tmargin-bottom: 10px;\n\tborder-top: 1px solid rgb(200,200,200);\n\theight: 0;\n\n}\n\n.xkit-servant-help-for-line {\n\n\tposition: absolute;\n\tleft: -25px;\n\tbackground: no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAOElEQVQYV2NkwAT/oUKMyFIoHKgE0QqxWMLAgG4izDSQYrxWE60QZBLRbqSeQmT3YQQhss/wKgQA9VMJCzEArKMAAAAASUVORK5CYII=');\n\twidth: 20px;\n\theight: 23px;\n\ttop: 2px;\n\tborder-radius: 3px;\n\topacity: 0.40;\n\tcursor: pointer;\n\n}\n\n.xkit-servant-help-for-line:hover {\n\n\topacity: 0.55;\n\n}\n\n.xkit-servant-add-delete-line {\n\n\tposition: absolute;\n\tleft: -43px;\n\tbackground: red no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAG0lEQVQIW2NkwAMYKZP8DwToJjCCAGXG4tINALm2BAjkSSkMAAAAAElFTkSuQmCC');\n\twidth: 15px;\n\theight: 15px;\n\ttop: 6px;\n\tborder-radius: 60px;\n\topacity: 0.40;\n\tcursor: pointer;\n\n}\n\n.xkit-servant-option-listbox {\n\n\tmargin-top: 0px !important;\n\tmargin-bottom: 0px;\n\theight: 25px;\n\tfont-size: 13px;\n\twidth: 100%;\n\n}\n\n.xkit-servant-add-delete-line:hover {\n\n\topacity: 0.55;\n\n}\n\n.xkit-servant-option-action-line-0 .xkit-servant-add-delete-line,\n.xkit-servant-option-cause-line-0 .xkit-servant-add-delete-line { display: none; }\n\n.xkit-servant-javascript-warning {\n\tbackground: rgb(250,190,190);\n\tpadding: 5px 10px;\n\tborder: 1px solid rgba(0,0,0,0.22);\n\tfont-size: 12px;\n\tborder-radius: 4px;\n\tmargin-top: 11px;\n\tline-height: 17px;\n\tdisplay: none;\n}\n.xkit-servant-compatibility-error {\n\tbackground: rgb(250,190,190);\n\tpadding: 5px 10px;\n\tborder: 1px solid rgba(0,0,0,0.22);\n\tfont-size: 12px;\n\tborder-radius: 4px;\n\tmargin-top: 11px;\n\tline-height: 17px;\n\tdisplay: none;\n}\n\n.xkit-servant-option-textareabox {\n\n\theight: 57px;\n\twidth: 288px;\n\tresize: none;\n\tfont: normal 11px courier, monospace;\n\n}\n\n.xkit-servant-option-line {\n\n\tposition: relative;\n\tmargin-top: 5px;\n\tmin-height: 25px;\n\n}\n\n.xkit-servant-option-line.servant-contains-textarea {\n\n\theight: 74px;\n\n}\n\n.xkit-servant-division-title {\n\n\tposition: absolute;\n\ttop: 12px;\n\tcolor: rgb(100,100,100);\n\tfont-weight: bold;\n\tleft: 0px;\n\n}\n\n.xkit-servant-add-option-settings {\n\n\tposition: absolute;\n\tleft: 161px;\n\ttop: 1px;\n\twidth: 303px;\n\tdisplay: none;\n\theight: 26px;\n\n}\n\n.xkit-servant-add-option-settings.xkit-servant-return-values-shown .xkit-servant-option-textbox {\n\n\tpadding-right: 30px !important;\n\n}\n\n.xkit-servant-add-option-returns {\n\n\ttop: 2px; right: 0px;\n\theight: 23px;\n\twidth: 23px;\n\tbackground: white no-repeat 50% 50% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAVklEQVQYV2NkQAXGQO4ZIGZEE0cRgClCV2MCFDiLrhPdRDgfwwp044D8/yCnkKQQpAOf2+EmghlIKpH5KG7EptAXqDEdiH2AGO5rfCbCLQJZSciNYMUAyEgTC/zM8RoAAAAASUVORK5CYII=);\n\t/*width: 20px; height: 19px;*/\n\tposition: absolute;\n\t/*top: 4px; right: 1px;*/\n\topacity: 0.45;\n\tcursor: pointer;\n\tdisplay: none;\n\n}\n\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option-returns {\n\tdisplay: block;\n}\n\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option-settings {\n\twidth: 269px;\n}\n\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option {\n\n\twidth: 428px;\n\n}\n\n.xkit-servant-add-option-returns:hover {\n\n\topacity: 0.7;\n\n}\n\n.xkit-servant-add-option-returns:active {\n\n\topacity: 1;\n\ttop: 3px;\n\theight: 22px;\n\n}\n\n.xkit-servant-option-textbox {\n\n\tmargin-top: 0px !important;\n\tmargin-bottom: 0px;\n\theight: 25px;\n\tfont-size: 13px;\n\twidth: 153px;\n\n}\n\n.xkit-servant-add-option-settings.xkit-servant-options-shown {\n\n\tdisplay: block;\n\n}\n\n.xkit-servant-add-option {\n\n\tposition: absolute;\n\ttop: 1px;\n\tleft: 1px;\n\twidth: 464px;\n\theight: 25px;\n\n}\n\n.xkit-servant-add-option.xkit-servant-half-option {\n\n\twidth: 153px !important;\n\n}\n\n.xkit-servant-add-more {\n\n\tbackground: no-repeat 5px 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAJElEQVQIW2NkQID/QCYjjAtnAAUwJEAC6IARrw6Yapx2oBgHAMKOBQfOt/0mAAAAAElFTkSuQmCC');\n\tpadding: 1px 10px 1px 14px;\n\tcolor: black;\n\tfont-size: 12px;\n\tcursor: pointer;\n\topacity: 0.54;\n\tdisplay: inline-block;\n\tmargin-top: 6px;\n\n}\n\n.xkit-servant-add-more:hover {\n\n\topacity: 0.77;\n\n}\n","title":"Servant","description":"XKit Personal Assistant","developer":"new-xkit","version":"0.6.0","details":"Automator for XKit: lets you create little Servants that does tasks for you when the conditions you've set are met.","frame":"false","beta":"false","slow":"true"}