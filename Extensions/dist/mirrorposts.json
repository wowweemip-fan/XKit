{"id":"mirrorposts","script":"//* TITLE Mirror Button **//\n//* VERSION 1.0.1 **//\n//* DESCRIPTION\tA button to easily backup posts **//\n//* DETAILS This extension provides a button that will create a mirror of a post on either archive.org or archive.is **//\n//* DEVELOPER Legoben **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.mirrorposts = new Object({\n\n\trunning: false,\n\n\tpreferences: {\n\t\t\"archiveis\": {\n\t\t\ttext: \"Use archive.is instead of The WayBack Machine\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\t\"menu\": {\n\t\t\ttext: \"Create a mirror button below each post instead of having it in the share menu\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t}\n\t},\n\n\n\trun: function() {\n\t\tthis.running = true;\n\t\tXKit.tools.init_css(\"mirrorposts\");\n\t\tXKit.post_listener.add(\"archivebutton_addButton\", XKit.extensions.mirrorposts.addButton);\n\t\tXKit.extensions.mirrorposts.addButton();\n\n\t},\n\n\tdestroy: function() {\n\t\tXKit.post_listener.remove(\"archivebutton_addButton\");\n\t\tXKit.tools.remove_css(\"mirrorposts\");\n\t\t$(\".archivebutton-button\").remove();\n\t\t\n\t\t$(\".archivebutton_applied .share_social_button\").unbind();\n\t\t$(\".archivebutton_applied\").removeClass(\"archivebutton_applied\");\n\t\t\n\t\t\n\t\tthis.running = false;\n\n\t},\n\n\taddButton: function() {\n\t\t$(\".post\").not(\".archivebutton_applied\").each(function() {\n\t\t\t$(this).addClass(\"archivebutton_applied\");\n\n\n\t\t\tvar posturl = $(\".post_permalink\", this).attr(\"href\");\n\n\t\t\tvar archiveurl;\n\t\t\tif (XKit.extensions.mirrorposts.preferences.archiveis.value) {\n\t\t\t\tarchiveurl = \"https://archive.is/?run=1&url=\" + encodeURIComponent(posturl);\n\t\t\t} else {\n\t\t\t\tarchiveurl = \"https://web.archive.org/save/\" + posturl;\n\t\t\t}\n\n\n\t\t\tif (XKit.extensions.mirrorposts.preferences.menu.value) {\n\n\t\t\t\tvar button = $(\"<div></div>\");\n\t\t\t\t$(button).addClass(\"post_control archivebutton-button\");\n\t\t\t\t$(button).attr(\"archiveurl\", archiveurl);\n\t\t\t\t$(button).attr(\"title\", \"Mirror Button\");\n\t\t\t\t$(button).click(function() {\n\t\t\t\t\twindow.open(archiveurl, '_blank');\n\t\t\t\t});\n\t\t\t\t$(\".post_controls_inner\", this).prepend(button);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t$(\".share_social_button\", this).click(function() {\n\t\t\t\t\tvar menuitem = $('<li class=\"popover_menu_item\"><a class=\"popover_menu_item_anchor\">Archive this post</a></li>');\n\t\t\t\t\t$(\"a\", menuitem).attr(\"href\", archiveurl);\n\t\t\t\t\t$(\"a\", menuitem).attr(\"target\", \"_blank\");\n\n\t\t\t\t\tsetTimeout(function() { //Make sure the pop-up has popped up\n\t\t\t\t\t\t$(\".share_reddit\", \"#dashboard_index > div.popover--post-share-popover\").after(menuitem);\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABtlBMVEUWWYsWWYwXWYwXWY0XWo0YWo4YW44YW48YXI8YXJAZXJAZXJEZXZEZXZIZXpIaXpIaXpMaX5MaX5QbX5QbX5UbYJUbYZYbYpccYpgcY5gcY5kcY5odZJodZZsdZZweZp0eZp4eZ58fZ58faJ8faKAfaKEfaaEfaaIgaqMgaqQga6Qga6UgbKUhbachbagibqkib6kib6oicKwjca4jcq4kaZ0kaZ4kc7Akc7EkdLIkdbMldrUld7Uld7Yld7cleLcmebkmebome7sme7wne7wnfL0nfL4nfb4ofsAofsEof8IogMMpgMQpgcQpgcUpgsYwdKg3eatThaxTha1Thq1Th65Th69Uh7BUiLBUibBVibJVibNVirNWi7NWjLRWjLZXjbhXjrdXj7lYj7pYkLxYkbxZkr1Zkr9Zk79ZlMFalcJblcFblsRbmMZcmMhcmclcmslcm8tcnMxcnM1dnc5enMtzosV3psp3p8x5rNN5rNR6psh6q9GFq8eOss2QssyWt9Cfv9ihw96tx9uuyNy70eLE1+XK2+fU4u3f6vHj7fXj7vbk7PPq8fbs8vfv9Pjx9fn///9KfHrSAAAB5klEQVQ4EQXBTQqoYxgG4Ot5fTgSM5L8Fs6RQqeOY2APBnaADViMLEAWQMnESIyOsQUgvxEZ8X3vfbuueRsAAABwbFNjVKcDdNCBI6YTQydGwdRop46YTgHAFJjiyLRTrz4NwOfo6uzBca2wXn36vwc+nZrO68/sTmcPxZHgtWd/PZ8KENvUZAqraV5/7pev/9Om2a2d3Sa7O+lx4XlPvMM1SiLAFI5Sf/+OttPxqNsA3xrHht/umQJ3HvMCwL1Oj92p7Bod3njx3wc/Rrl785zOEaWh1N2bP//zUoBqdSXZkuzuvd+49dMX226ys6PZPbah0da87Ml3SUantdlHOyQF/vqx02qnapseF/RiuuL7b6x45/wMsaeO6Gim7NHM5ZXH3fpuWm1mnTun5trJPvW8cr7Jm+fecZ3J6r4q13WdZyK5zvdvZD/03rnr2td5pMbt24BWH/7jxt6PNFV6JGvfYzrqTlKf/PTB+dFTaVwrc1ziS4A7vcwP7j/yPZFwBAAk8GeCas1R1aWGSjudD4dOpea4pmNTg+wsZTpi49h1316ZkRVvvQUAV6dHsk6t6WxfTcZUVzvTa8zcmJaFrKyYrhgjqyNrHgzTMTEKWLFiZcUcyAKALACYhU6s6XSaBTJjarb/AQ4eh7vhlccfAAAAAElFTkSuQmCC","css":".archivebutton-button{\n\theight: 26px;\n\twidth: 26px;\n\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAA21BMVEUAAAChoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaFRSdv6AAAASHRSTlMAAQIDBAUHCAsNDg8QExQYGyIjJCUmKC4vMTQ2O0BERUdJVlliZ2lrbXx/hYyPlJ6ipairur7Dx87R2dzg4ujr7e/x8/X5+/21Zql0AAAAwklEQVQYGb3BeT8CQQDH4W/FOmLcWkdi3DkjZzmy6Pf+X5GZ3cZ8on95Hv5KZW3/eG+1xG87mbzuEj81FdQZ1lA0SzLJt3JP0U1LepxjYFm5fjrVUeE9obAt72MRJh5UqFM4kpPN44zfKbeFVzqV82rIjbXlTeOdycmqDJTbcu43gAV5b7vWJoC19la5AzhXYABFK3QUGEDRJS8KDKCoR0uBARQ9sa7gsFbbVHQC1xqpPwOVK43wmeKlF88a1m1W+VdfLdJV4tB4RlMAAAAASUVORK5CYII=);\n}","title":"Mirror Button","description":"A button to easily backup posts","developer":"Legoben","version":"1.0.1","details":"This extension provides a button that will create a mirror of a post on either archive.org or archive.is","frame":"false","beta":"false","slow":"false"}