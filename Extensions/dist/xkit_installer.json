{"id":"xkit_installer","script":"//* TITLE XKit Installer **//\n//* VERSION 6.9.6 **//\n//* DESCRIPTION Lets you install XKit on your computer. **//\n//* DEVELOPER STUDIOXENIX **//\nXKit.extensions.xkit_installer = new Object({\n\n\trunning: false,\n\tinstalled: 0,\n\tto_install: [\n\t\t'xkit_main',\n\t\t'xkit_patches',\n\t\t'xkit_preferences',\n\t\t'xkit_updates',\n\t\t'xinbox',\n\t\t'one_click_postage',\n\t\t'one_click_reply',\n\t\t'tweaks',\n\t\t'xcloud',\n\t\t'go_to_dash'\n\t],\n\n\trun: function() {\n\n\t\tthis.running = true;\n\n\t\tXKit.window.show(\"Installing XKit\", \"<div id=\\\"xkit-install-process\\\" style=\\\"font-weight: bold;\\\">Starting installation...</div>Please do not navigate away from this page.\" + XKit.progress.add(\"installation\"), \"info\");\n\n\t\tXKit.extensions.xkit_installer.next();\n\n\t},\n\n\tnext: function() {\n\n\t\tif (XKit.extensions.xkit_installer.installed >= XKit.extensions.xkit_installer.to_install.length) {\n\t\t\t// Installation is complete I think!\n\t\t\tXKit.progress.value(\"installation\", 100);\n\t\t\tXKit.installed.remove(\"xkit_installer\");\n\t\t\tXKit.window.show(\"Thanks for installing me!\",\n\t\t\t\t\"<b>Installation of XKit is complete.</b><br/>\" +\n\t\t\t\t\"After refreshing the page, the X icon will show up on the header next to the account button. \" +\n\t\t\t\t\"From there, you can customize XKit to your liking and get new extensions.\",\n\n\t\t\t\t\"info\",\n\n\t\t\t\t'<a id=\"xkit-restart-and-use\" class=\"xkit-button default\">Refresh page and start using XKit</a>' +\n\t\t\t\t'<div id=\"xkit-corrupt-profile-help\" class=\"xkit-button\">XKit keeps re-installing itself?</div>'\n\t\t\t);\n\t\t\tXKit.tools.set_setting(\"xkit_installation_complete\", \"true\");\n\n\t\t\t$(\"#xkit-restart-and-use\").click(function() {\n\t\t\t\tlocation.reload(true);\n\t\t\t\t$(this).addClass(\"disabled\");\n\t\t\t\t$(this).html(\"Please wait...\");\n\t\t\t});\n\n\t\t\t$(\"#xkit-corrupt-profile-help\").click(function() {\n\t\t\t\tvar browser = XKit.browser();\n\n\t\t\t\tXKit.window.show(\"Corrupt Profile\",\n\t\t\t\t\t\"<b>If you are receiving error codes mentioning corrupt or missing files while installing or running XKit, it's because your \" + browser.name + \" user profile file is corrupt.</b><br><br>\" +\n\t\t\t\t\t\"There are a few reasons why this might happen, such as performing a system restore, downgrading your browser or hardware failure.<br><br>\" +\n\t\t\t\t\t\"Unfortunately, this is a problem you will have to fix.\",\n\n\t\t\t\t\t\"info\",\n\n\t\t\t\t\t'<div id=\"xkit-fix-corruption\" class=\"xkit-button default\">How do I fix it?</div>' +\n\t\t\t\t\t'<div id=\"xkit-close-message\" class=\"xkit-button\">I know what to do</div>'\n\t\t\t\t);\n\n\t\t\t\t$(\"#xkit-fix-corruption\").click(function() {\n\t\t\t\t\tvar sync, link;\n\t\t\t\t\tif (browser.chrome) {\n\t\t\t\t\t\tsync = \" Google\";\n\t\t\t\t\t\tlink = \"https://support.google.com/chrome/answer/2364824\";\n\t\t\t\t\t} else if (browser.firefox) {\n\t\t\t\t\t\tsync = \" Firefox Sync\";\n\t\t\t\t\t\tlink = \"https://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles\";\n\t\t\t\t\t} else if (browser.safari) {\n\t\t\t\t\t\tsync = \"n iCloud\";\n\t\t\t\t\t} else if (browser.opera) {\n\t\t\t\t\t\tsync = \"n Opera\";\n\t\t\t\t\t}\n\t\t\t\t\tXKit.window.show(\"Corrupt Profile\",\n\t\t\t\t\t\t\"<b>If XKit never successfully installs</b>, you'll need to create a fresh user profile.<br>\" +\n\t\t\t\t\t\t\"If your data (i.e. bookmarks, passwords) is not synchronised up to a\" + sync + \" account, you'll want to export or synchronise it now.<br><br>\" +\n\t\t\t\t\t\t\"Next, you'll want to \" + (link ? '<a href=\"' + link + '\" target=\"_blank\">' : \"\") + \"create a new profile\" + (link ? \"</a>\" : \"\") + \", and then try installing New XKit again on it.<br>\" +\n\t\t\t\t\t\t\"If this doesn't work or isn't possible, you may need to reset or reinstall your browser.<br><br>\" +\n\t\t\t\t\t\t\"<b>If XKit only occasionally resets</b>, it may be down to hardware failure or your browser is handling crashes badly. \" +\n\t\t\t\t\t\t\"We can't give accurate advice on preventing this - just be sure to synchronise your settings to XCloud often.\" +\n\t\t\t\t\t\t(browser.firefox ? \"<br>If you're using 32-bit Firefox, it's worth trying to upgrade to 64-bit, as it seems less prone to data loss.\" : \"\"),\n\n\t\t\t\t\t\t\"info\", '<div id=\"xkit-close-message\" class=\"xkit-button default\">OK</div>', true\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar percentage = Math.round((100 * XKit.extensions.xkit_installer.installed) / (XKit.extensions.xkit_installer.to_install.length));\n\t\tXKit.progress.value(\"installation\", percentage);\n\n\t\tvar to_install = XKit.extensions.xkit_installer.to_install[XKit.extensions.xkit_installer.installed];\n\t\tconsole.log(\"Will be installing \" + to_install);\n\t\t$(\"#xkit-install-process\").html(\"Installing package \" + to_install + \"...\");\n\n\t\tXKit.install(to_install, function(mdata) {\n\t\t\t// defined in xkit.js\n\t\t\t/* globals show_error_installation */\n\n\t\t\tif (mdata.errors) {\n\t\t\t\tif (mdata.storage_error === true) {\n\t\t\t\t\tshow_error_installation(\"[Code: 631] Can't store data on browser\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (mdata.server_down === true) {\n\t\t\t\t\tshow_error_installation(\"[Code: 101] Can't reach XKit servers\");\n\t\t\t\t} else {\n\t\t\t\t\tif (mdata.file === \"not_found\") {\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install + \": Not found\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Try evaling the script.\n\t\t\t\t// If it's working, then move to the next one.\n\t\t\t\teval(mdata.script + \"\\n//# sourceURL=xkit/\" + mdata.id + \".js\");\n\t\t\t\tXKit.extensions.xkit_installer.installed++;\n\t\t\t\tXKit.extensions.xkit_installer.next();\n\t\t\t} catch (e) {\n\t\t\t\tshow_error_installation(\"[Code: 102] Can't run \" + to_install + \":<br/>\" + e.message);\n\t\t\t}\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t}\n\n});\n","file":"found","server":"up","errors":false,"title":"XKit Installer","description":"Lets you install XKit on your computer.","developer":"STUDIOXENIX","version":"6.9.6","frame":"false","beta":"false","slow":"false"}