{"id":"shorten_posts","script":"//* TITLE Shorten Posts **//\n//* VERSION 0.2.4 **//\n//* DESCRIPTION Makes scrolling easier **//\n//* DETAILS This extension shortens long posts, so if you are interested, you can just click on Show Full Post button to see it all, or scroll down if you are not interested. Useful for screens where long posts take a lot of space, and making it hard to scroll down.<br><br>By default, this extension shortens text posts. You can toggle settings to choose which types of posts to shorten. (This will 'cut off' long, vertical posts.) **//\n//* DEVELOPER STUDIOXENIX **//\n//* FRAME false **//\n//* BETA false **//\n//* SLOW true **//\n\nXKit.extensions.shorten_posts = new Object({\n\n\trunning: false,\n\tslow: true,\n\n\theight_min: 200,\n\theight_max: 1500,\n\theight_default: 350,\n\n\tpreferences: {\n\t\tsep0: {\n\t\t\ttext: \"When to shorten posts\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\ttext_too: {\n\t\t\ttext: \"Check and shorten text posts\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t},\n\t\tphotos_too: {\n\t\t\ttext: \"Check and shorten photo posts and photosets\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\taudio_too: {\n\t\t\ttext: \"Check and shorten audio posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\tasks_too: {\n\t\t\ttext: \"Check and shorten replies to asks\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\tvideos_too: {\n\t\t\ttext: \"Check and shorten video posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\tchat_too: {\n\t\t\ttext: \"Check and shorten chat posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\tlinks_too: {\n\t\t\ttext: \"Check and shorten link posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\tquotes_too: {\n\t\t\ttext: \"Check and shorten quote posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\theight: {\n\t\t\ttext: \"Maximum post height (<a id=\\\"xkit-shorten-posts-height-help\\\" href=\\\"#\\\" onclick=\\\"return false\\\">what is this?</a>)\",\n\t\t\ttype: \"text\",\n\t\t\tdefault: \"350\",\n\t\t\tvalue: \"350\"\n\t\t},\n\t\tsep1: {\n\t\t\ttext: \"Appearance and behaviour options\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\tdisplay_tags: {\n\t\t\ttext: \"Display the tags on shortened posts\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t},\n\t\tembiggen_on_click: {\n\t\t\ttext: \"Embiggen photo posts when I click on the thumbnail\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t}\n\t},\n\n\trun: function() {\n\n\t\tthis.running = true;\n\t\tXKit.extensions.shorten_posts.cpanel_check_height();\n\n\t\tif ($(\".posts .post\").length > 0) {\n\t\t\tXKit.tools.init_css(\"shorten_posts\");\n\t\t\t$(document).on(\"click\", \".xkit-shorten-posts-embiggen\", XKit.extensions.shorten_posts.embiggen);\n\t\t\tXKit.post_listener.add(\"shorten_posts\", XKit.extensions.shorten_posts.check);\n\t\t\tXKit.extensions.shorten_posts.check();\n\t\t}\n\n\t},\n\n\tcheck: function() {\n\n\t\tvar shortened_count = 0;\n\n\t\t$(\".posts .post\").not(\".xkit-shorten-posts-done\").not(\".xkit-shorten-posts-embiggened\").each(function() {\n\n\t\t\tvar m_height = $(this).height();\n\t\t\t$(this).addClass(\"xkit-shorten-posts-done\");\n\n\t\t\tif ($(this).hasClass(\"xblacklist_blacklisted_post\")) { return; }\n\n\t\t\tvar dont_return = false;\n\t\t\tif (XKit.extensions.shorten_posts.preferences.text_too.value\n\t\t\t\t&& $(this).hasClass(\"is_regular\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.photos_too.value\n\t\t\t\t&& ($(this).hasClass(\"is_photo\") || $(this).hasClass(\"is_photoset\"))) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.audio_too.value\n\t\t\t\t&& $(this).hasClass(\"is_audio\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.links_too.value\n\t\t\t\t&& $(this).hasClass(\"is_link\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.chat_too.value\n\t\t\t\t&& $(this).hasClass(\"is_conversation\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.quotes_too.value\n\t\t\t\t&& $(this).hasClass(\"is_quote\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.asks_too.value\n\t\t\t\t&& $(this).hasClass(\"is_note\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\t\t\tif (XKit.extensions.shorten_posts.preferences.videos_too.value\n\t\t\t\t&& $(this).hasClass(\"is_video\")) {\n\t\t\t\tdont_return = true;\n\t\t\t}\n\n\t\t\tif (!dont_return) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (m_height >= XKit.extensions.shorten_posts.preferences.height.value) {\n\t\t\t\tXKit.extensions.shorten_posts.short($(this), m_height);\n\t\t\t\tshortened_count++;\n\t\t\t}\n\n\t\t});\n\n\t\tif (shortened_count > 0) {\n\n\t\t\t// Call Tumblr scroll helper update thingy.\n\t\t\tXKit.tools.add_function(function() {\n\t\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\n\t\t\t}, true, \"\");\n\n\t\t}\n\n\t},\n\n\tembiggen: function(e) {\n\n\t\tvar obj = e.target;\n\n\t\tif ($(obj).hasClass(\"image_thumbnail\") === true) {\n\t\t\tobj = $(obj).parentsUntil(\".post\").parent().find(\".xkit-shorten-posts-embiggen\");\n\t\t}\n\n\t\tvar m_height = $(obj).attr('data-old-height');\n\t\tvar post_div = $(obj).parent();\n\n\t\tvar m_speed = 200 + (m_height / 2);\n\n\t\tif (m_height < 320) {\n\t\t\tm_speed = 120;\n\t\t}\n\n\t\t$(post_div).animate({\n\t\t\theight: m_height\n\t\t}, m_speed, function() {\n\t\t\t$(this).find(\".xkit-shorten-posts-embiggen\").slideUp('fast');\n\t\t\t$(this).removeClass(\"xkit-shorten-posts-shortened\");\n\t\t\t$(this).removeClass(\"xkit-shorten-posts-shortened-show-tags\");\n\t\t\t$(this).addClass(\"xkit-shorten-posts-embiggened\");\n\t\t\t$(this).css('height', 'auto');\n\t\t});\n\n\t},\n\n\tshort: function(obj, m_height) {\n\n\t\tif ($(obj).hasClass(\"xblacklist_blacklisted_post\")) { $(obj).removeClass(\"xkit-shorten-posts-shortened-show-tags\"); return; }\n\n\t\tvar post_id = $(obj).attr('data-post-id');\n\t\t$(obj).attr('data-old-height', m_height);\n\t\t$(obj).css('height', XKit.extensions.shorten_posts.preferences.height.value + \"px\");\n\t\t$(obj).addClass(\"xkit-shorten-posts-shortened\");\n\n\t\t$(obj).append(\"<div class=\\\"xkit-shorten-posts-embiggen xkit-shorten-posts-embiggen-for-post-\" + post_id + \"\\\" data-post-id=\\\"\" + post_id + \"\\\" data-old-height=\\\"\" + m_height + \"\\\">This post has been shortened. Click here to show the full post</div>\");\n\n\t\tif (XKit.extensions.shorten_posts.preferences.display_tags.value === true) {\n\t\t\t$(obj).addClass(\"xkit-shorten-posts-shortened-show-tags\");\n\t\t}\n\n\t\tif (XKit.extensions.shorten_posts.preferences.embiggen_on_click.value === true) {\n\t\t\t$(obj).find(\".image_thumbnail\").on(\"click\", XKit.extensions.shorten_posts.embiggen);\n\t\t}\n\n\t},\n\n\tdestroy: function() {\n\n\t\tthis.running = false;\n\n\t\t// Remove all the stuff we've added.\n\t\t$(\".xkit-shorten-posts-embiggen\").remove();\n\n\t\t$(\".post.xkit-shorten-posts-shortened\").each(function() {\n\t\t\t$(this).css('height', 'auto');\n\t\t});\n\n\t\t$(\".xkit-shorten-posts-embiggen\").off(\"click\", XKit.extensions.shorten_posts.embiggen);\n\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-shortened\");\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-embiggened\");\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-shortened-show-tags\");\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-done\");\n\n\t\tXKit.tools.remove_css(\"shorten_posts\");\n\n\t\t// Call Tumblr scroll helper update thingy.\n\t\tXKit.tools.add_function(function() {\n\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\n\t\t}, true, \"\");\n\n\t},\n\n\tcpanel_check_height: function() {\n\n\t\tif (isNaN(XKit.extensions.shorten_posts.preferences.height.value) === true) {\n\t\t\tconsole.log(\"Invalid post height check interval, reverting to default: not a number.\");\n\t\t\tXKit.extensions.shorten_posts.preferences.height.value = XKit.extensions.shorten_posts.height_default;\n\t\t} else {\n\t\t\tvar m_height = XKit.extensions.shorten_posts.preferences.height.value;\n\t\t\tif (m_height > XKit.extensions.shorten_posts.height_max || m_height < XKit.extensions.shorten_posts.height_min) {\n\t\t\t\tXKit.extensions.shorten_posts.preferences.height.value = XKit.extensions.shorten_posts.height_default;\n\t\t\t\tconsole.log(\"Invalid post height check interval, reverting to default: too small or big.\");\n\t\t\t}\n\t\t}\n\n\t},\n\n\tcpanel: function(div) {\n\n\t\t$(\"#xkit-shorten-posts-height-help\").click(function() {\n\n\t\t\tXKit.window.show(\"Maximum post height\", \"XKit will shorten posts longer than the height entered here.<br/><br/>The minimum value you can enter is <b>200</b>, and the maximum is <b>\" + XKit.extensions.shorten_posts.height_max + \"</b>. If you enter a value bigger or smaller than these, XKit will return to it's default value, which is 350 pixels.\", \"info\", \"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\n\n\t\t});\n\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENCNERBRkJEMTQ1MTFFMkIzMzlFNEI5QzIwNDI2MDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENCNERBRkNEMTQ1MTFFMkIzMzlFNEI5QzIwNDI2MDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0I0REFGOUQxNDUxMUUyQjMzOUU0QjlDMjA0MjYwMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0I0REFGQUQxNDUxMUUyQjMzOUU0QjlDMjA0MjYwMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgyxgMQAAAaESURBVHjafFZbbJRF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","css":".xkit-shorten-posts-shortened .post_wrapper {\n\toverflow: hidden;\n\theight: 100%;\n}\n\n.xkit-shorten-posts-embiggen {\n\tposition: absolute;\n\tbottom: 0; left: 0;\n\twidth: 100%;\n\theight: 30px;\n\tline-height: 30px;\n\tbackground: rgb(230,230,230);\n\tbox-shadow: inset 0px 1px 2px rgba(0,0,0,0.22);\n\ttext-align: center;\n\tfont-size: 11px;\n\tfont-weight: bold;\n\ttext-shadow: 0px 1px 0px white;\n\tcolor: rgb(120,120,120);\n\tcursor: pointer;\n\tborder-radius: 0px 0px 5px 5px;\n\tborder-top: 1px solid rgba(0,0,0,0.33);\n\tz-index: 79;\n}\n\n.xkit-shorten-posts-embiggen:hover {\n\tbackground: rgb(245,245,245);\n\tcolor: rgb(100,100,100);\n}\n\n.xkit-shorten-posts-shortened-show-tags .post_tags {\n\tposition: absolute;\n\tbottom: 30px;\n\tleft: 0px;\n\twidth: 100%;\n\tpadding: 10px 20px;\n\tbackground: rgba(255,255,255,0.95);\n\tborder-top: 1px solid rgba(0,0,0,0.22);\n\tmargin-left: 0;\n}\n","title":"Shorten Posts","description":"Makes scrolling easier","developer":"STUDIOXENIX","version":"0.2.4","details":"This extension shortens long posts, so if you are interested, you can just click on Show Full Post button to see it all, or scroll down if you are not interested. Useful for screens where long posts take a lot of space, and making it hard to scroll down.<br><br>By default, this extension shortens text posts. You can toggle settings to choose which types of posts to shorten. (This will 'cut off' long, vertical posts.)","frame":"false","beta":"false","slow":"true"}