{"id":"profiler","script":"//* TITLE Profiler **//\n//* VERSION 1.2.6 **//\n//* DESCRIPTION The User Inspection Gadget **//\n//* DETAILS Select Profiler option from the User Menu to see information such as when they started blogging, how many posts they have, timezone, and more.<br><br>Requires User Menus+ to be installed. **//\n//* DEVELOPER STUDIOXENIX **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.profiler = new Object({\n\n\trunning: false,\n\n\tapiKey: XKit.api_key,\n\n\tpreferences: {\n\t\t\"show_nicknames\": {\n\t\t\ttext: \"Show Nicknames / Descriptions on Dashboard\",\n\t\t\tdefault: true,\n\t\t\tvalue: true,\n\t\t\tslow: true\n\t\t}\n\t},\n\n\n\tframe_run: function() {\n\n\t\tXKit.tools.init_css(\"profiler\");\n\n\t\tvar m_css = \"#iframe_controls { width: auto !important; } \" +\n\t\t\t\t\"#xkit_profiler_inblog_button:before {\" +\n\t\t\t\t\t\" background-size: auto; \" +\n\t\t\t\t\t\" background-position: 50% 50%; \" +\n\t\t\t\t\t\" background-repeat: no-repeat; \" +\n\t\t\t\t\t\" background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjEzRkZBMkE2Q0QzMTFFMzlDNTZCMzI0NDhERkFFOUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjEzRkZBMkI2Q0QzMTFFMzlDNTZCMzI0NDhERkFFOUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MTNGRkEyODZDRDMxMUUzOUM1NkIzMjQ0OERGQUU5RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MTNGRkEyOTZDRDMxMUUzOUM1NkIzMjQ0OERGQUU5RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptc21PYAAACFSURBVHjaYvz//z8DOYAFjS8LxMFA7A7ExlCxs0C8E4jXAvFjuEqQjVBsCcQb/uMGG6BqwOphmmTRNSEZjK5ZFlljAbrxODT+h6plYILKu6N7Ht0AJOCO7MdXJNj4CtlGkgETUpATC84ia9xJgsadyH4kOzpITgCMaCFOdJJjJDeRAwQYAEACMSh3yj0GAAAAAElFTkSuQmCC); \" +\n\t\t\t\t\"}\";\n\n\t\tXKit.tools.add_css(m_css, \"profiler_in_blog\");\n\n\t\tvar m_html = \"<a id=\\\"xkit_profiler_inblog_button\\\" onclick=\\\"return false\\\" class=\\\"btn icon reblog no_label\\\">Profiler</a>\";\n\n\t\t$(\".btn.dashboard\").before(m_html);\n\n\t\t$(\"#xkit_profiler_inblog_button\").click(function() {\n\n\t\t\tvar blog_url = $(\"#tumblelog_name\").attr('data-tumblelog-name');\n\n\t\t\tXKit.iframe.full();\n\n\t\t\tXKit.extensions.profiler.show(blog_url, true);\n\n\n\t\t});\n\n\t},\n\n\tadd_nicks: function() {\n\n\t\tif ($(\".follower\").length > 0) {\n\n\t\t\t$(\".follower\").each(function() {\n\n\t\t\t\tvar m_url = $(this).find(\".name\").text();\n\t\t\t\tvar m_storage = XKit.storage.get(\"profiler\", \"nick-for--\" + m_url, \"\");\n\t\t\t\tif (m_storage === \"\") { return; }\n\n\t\t\t\t$(this).find(\".name\").append(\"<div class=\\\"xkit-profiler-nickname-inline\\\">(\" + m_storage + \")</div>\");\n\n\t\t\t});\n\n\t\t}\n\n\t\tvar posts = XKit.interface.get_posts(\"profiler-nicknamed\");\n\n\t\t$(posts).each(function() {\n\n\t\t\t$(this).addClass(\"profiler-nicknamed\");\n\n\t\t\tvar m_post = XKit.interface.post($(this));\n\n\t\t\tif (XKit.interface.where().inbox !== true) {\n\t\t\t\tif (m_post.is_mine === true) { return; }\n\t\t\t}\n\n\t\t\t// console.log(m_post);\n\n\t\t\tvar post_owner = m_post.owner;\n\n\t\t\tif (m_post.type === \"note\" && XKit.interface.where().inbox === true) {\n\t\t\t\tvar m_json_info = $(this).find(\".post_avatar_link\").attr('data-tumblelog-popover');\n\t\t\t\ttry {\n\t\t\t\t\tvar m_json_obj = JSON.parse(m_json_info);\n\t\t\t\t\tpost_owner = m_json_obj.name;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar m_storage = XKit.storage.get(\"profiler\", \"nick-for--\" + post_owner, \"\");\n\n\t\t\tif (m_storage === \"\") { return; }\n\n\t\t\tvar name_div_container;\n\t\t\tvar name_div;\n\n\t\t\tif ($(this).find(\".post_info_fence\").length > 0) {\n\t\t\t\tname_div_container = $(this).find(\".post_info_fence\");\n\t\t\t} else {\n\t\t\t\tname_div_container = $(this).find(\".post_info\");\n\t\t\t}\n\n\t\t\tif (name_div_container.find(\"a\").length > 0) {\n\t\t\t\tname_div = name_div_container.find(\"a\").first();\n\t\t\t\t$(name_div).after(\"<span class=\\\"xkit-profiler-nickname\\\">(\" + m_storage + \")</div>\");\n\t\t\t} else {\n\t\t\t\tname_div = name_div_container;\n\t\t\t\t$(name_div).append(\"<span class=\\\"xkit-profiler-nickname\\\">(\" + m_storage + \")</div>\");\n\t\t\t}\n\n\t\t});\n\n\t},\n\n\tredo_nicks: function() {\n\n\t\t$(\".xkit-profiler-nickname-inline\").remove();\n\t\t$(\".post .xkit-profiler-nickname\").remove();\n\t\t$(\".post.profiler-nicknamed\").removeClass(\"profiler-nicknamed\");\n\t\tXKit.extensions.profiler.add_nicks();\n\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tXKit.tools.init_css(\"profiler\");\n\t\t//XKit.extensions.profiler.show(\"xenixlet\");\n\n\t\tif (XKit.extensions.profiler.preferences.show_nicknames.value === true) {\n\n\t\t\tXKit.post_listener.add(\"profiler\", XKit.extensions.profiler.add_nicks);\n\t\t\tXKit.extensions.profiler.add_nicks();\n\n\t\t}\n\n\t\tXKit.installed.when_running(\"show_more\", function() {\n\t\t\tif (XKit.extensions.show_more.preferences.use_classic_menu.value === true) {\n\t\t\t\tXKit.extensions.show_more.add_custom_menu(\"profiler\", function(data) {\n\t\t\t\t\tvar user_url = data.name;\n\n\t\t\t\t\t$(document).off(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\n\t\t\t\t\t$(document).on(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\n\n\t\t\t\t\treturn \"<div data-url=\\\"\" + user_url + \"\\\" class=\\\"xkit-profiler-button-\" + user_url + \" xkit-profiler\\\">Profiler</div>\";\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tXKit.extensions.show_more.add_custom_menu(\"profiler\", function(data) {\n\t\t\t\t\tvar user_url = data.name;\n\n\t\t\t\t\t$(document).off(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\n\t\t\t\t\t$(document).on(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\n\n\t\t\t\t\treturn \"<li>\" +\n\t\t\t\t\t\t\"<a data-url=\\\"\" + user_url + \"\\\" class=\\\"xkit-profiler-button-\" + user_url + \" xkit-profiler xkit-new-menu-fix\\\">\" +\n\t\t\t\t\t\t\t\"<span class=\\\"hide_overflow\\\">Profiler</span>\" +\n\t\t\t\t\t\t\"</a>\" +\n\t\t\t\t\t\t\"</li>\";\n\t\t\t\t});\n\t\t\t}\n\t\t}, function() {\n\t\t\tXKit.extensions.profiler.show_ump_error();\n\t\t});\n\n\t},\n\n\tmenu_clicked: function(e) {\n\n\t\tvar m_object = $(e.target);\n\n\t\tif (!m_object.hasClass(\"xkit-profiler\")) {\n\n\t\t\twhile (!m_object.hasClass(\"xkit-profiler\")) {\n\t\t\t\tm_object = m_object.parent();\n\t\t\t}\n\n\t\t}\n\n\t\t$(\".tumblelog_popover_glass\").trigger('click');\n\t\tsetTimeout(function() { $(\".tumblelog_popover_glass\").trigger('click'); }, 10);\n\t\t$(\".popover\").hide();\n\t\tXKit.extensions.show_more.hide_classic_menu();\n\n\t\tvar user_url = $(m_object).attr('data-url');\n\n\t\tXKit.extensions.profiler.show(user_url);\n\n\t},\n\n\twindow_id: \"\",\n\n\tis_inframe: false,\n\n\tshow: function(user_url, inframe) {\n\n\t\tXKit.extensions.profiler.is_inframe = inframe;\n\n\t\tvar m_window_id = XKit.tools.random_string();\n\t\tXKit.extensions.profiler.window_id = m_window_id;\n\n\t\tvar m_html = \"<div id=\\\"xkit-profiler-contents\\\" class=\\\"nano\\\">\" +\n\t\t\t\t\t\"<div id=\\\"xkit-profiler-main\\\" class=\\\"content\\\">\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\n\t\t\t\t\t\t\t\"Blog Information\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Title\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-title\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Nickname / Description\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-nickname\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Is NSFW/Adult blog?\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-nsfw\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Is Following You?\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-is-following\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Last Update\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-last-update\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\n\t\t\t\t\t\t\t\"Other\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Blogging Since\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-since\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Timezone\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-timezone\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Custom Domain?\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-custom-domain\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Shares liked posts?\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-is-sharing-likes\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\n\t\t\t\t\t\t\t\"Posts\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Total Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-total\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Text Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-text\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Photo / Photoset Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-photo\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Chat Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-chat\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Quote Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-quote\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Audio Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-audio\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\n\t\t\t\t\t\t\t\"Video Posts\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-video\\\"></div>\" +\n\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\"</div>\" +\n\t\t\t\t\"</div>\";\n\n\t\tXKit.window.show(\"Profiler for \" + user_url, m_html, \"info\", \"<div id=\\\"xkit-profiler-close\\\" class=\\\"xkit-button default\\\">Close Window</div><div id=\\\"xkit-profiler-rename\\\" class=\\\"xkit-button\\\">Rename Person</div>\");\n\n\t\t$(\".xkit-profiler-line div\").addClass(\"loading-up\");\n\n\t\t$(\"#xkit-profiler-contents\").nanoScroller();\n\t\t$(\"#xkit-profiler-contents\").nanoScroller({ scroll: 'top' });\n\n\t\t$(\"body\").css(\"overflow\", \"hidden\");\n\n\t\t$(\"#xkit-profiler-close\").click(function() {\n\n\t\t\t$(\"body\").css(\"overflow\", \"auto\");\n\t\t\tXKit.window.close();\n\n\t\t\tif (XKit.extensions.profiler.is_inframe === true) {\n\t\t\t\tsetTimeout(function() { XKit.iframe.restore();\t}, 300);\n\t\t\t}\n\n\t\t});\n\n\t\t$(\"#xkit-profiler-rename\").click(function() {\n\n\t\t\tvar new_name = prompt(\"Enter a nickname/title/description for this person\");\n\n\t\t\tif (new_name !== null) {\n\t\t\t\tXKit.storage.set(\"profiler\", \"nick-for--\" + user_url, new_name);\n\t\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(new_name);\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Nothing entered.\");\n\t\t\t}\n\n\t\t\tXKit.extensions.profiler.redo_nicks();\n\n\t\t});\n\n\t\tvar m_nickname = XKit.storage.get(\"profiler\", \"nick-for--\" + user_url, \"\");\n\t\tif (m_nickname === \"\") {\n\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(\"Not set\");\n\t\t} else {\n\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(m_nickname);\n\t\t}\n\n\t\tvar blog_id;\n\t\tvar m_blogs = XKit.tools.get_blogs();\n\t\tfor (var i = 0; i < m_blogs.length; i++) {\n\t\t\tif (m_blogs[i] !== \"\") {\n\t\t\t\tblog_id = m_blogs[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tXKit.interface.is_following(user_url, blog_id).then(function(follow) {\n\t\t\tif (follow) {\n\t\t\t\t$(\"#xkit-profiler-is-following\").removeClass(\"loading-up\").html(\"Yes\");\n\t\t\t} else {\n\t\t\t\t$(\"#xkit-profiler-is-following\").removeClass(\"loading-up\").html(\"No\");\n\t\t\t}\n\t\t});\n\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/info\" + \"?api_key=\" + XKit.extensions.profiler.apiKey;\n\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: api_url,\n\t\t\tjson: true,\n\t\t\tonerror: function(response) {\n\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\n\n\t\t\t\tvar data = JSON.parse(response.responseText).response;\n\t\t\t\tvar dtx = new Date(data.blog.updated * 1000);\n\t\t\t\t// defined in moment.js\n\t\t\t\t/* globals moment */\n\t\t\t\tvar dt = moment(dtx);\n\n\t\t\t\t$(\"#xkit-profiler-last-update\").removeClass(\"loading-up\").html(dt.from(new Date()));\n\t\t\t\t$(\"#xkit-profiler-total\").removeClass(\"loading-up\").html(data.blog.posts);\n\t\t\t\t$(\"#xkit-profiler-title\").removeClass(\"loading-up\").html(data.blog.title);\n\n\t\t\t\tvar m_custom_val = \"None\";\n\t\t\t\tif (data.blog.url.indexOf(\".tumblr.com\") === -1) {\n\t\t\t\t\tm_custom_val = \"Yes (\" + data.blog.url + \")\";\n\t\t\t\t}\n\t\t\t\t$(\"#xkit-profiler-custom-domain\").removeClass(\"loading-up\").html(m_custom_val);\n\n\t\t\t\tif (data.blog.is_nsfw === true) {\n\t\t\t\t\t$(\"#xkit-profiler-nsfw\").removeClass(\"loading-up\").html(\"Yes\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#xkit-profiler-nsfw\").removeClass(\"loading-up\").html(\"No\");\n\t\t\t\t}\n\n\t\t\t\tif (data.blog.share_likes === true) {\n\t\t\t\t\t$(\"#xkit-profiler-is-sharing-likes\").removeClass(\"loading-up\").html(\"Yes (\" + data.blog.likes + \" posts)\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#xkit-profiler-is-sharing-likes\").removeClass(\"loading-up\").html(\"No\");\n\t\t\t\t}\n\n\t\t\t\tvar last_post = data.blog.posts - 1;\n\t\t\t\tvar new_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/posts\" + \"?api_key=\" + XKit.extensions.profiler.apiKey + \"&offset=\" + last_post + \"&limit=1\";\n\n\t\t\t\tGM_xmlhttpRequest({\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\turl: new_url,\n\t\t\t\t\tjson: true,\n\t\t\t\t\tonerror: function(next_response) {\n\t\t\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t},\n\t\t\t\t\tonload: function(next_response) {\n\t\t\t\t\t\tvar next_data = JSON.parse(next_response.responseText).response;\n\t\t\t\t\t\tvar date = new Date(next_data.posts[0].timestamp * 1000);\n\t\t\t\t\t\t$(\"#xkit-profiler-since\").removeClass(\"loading-up\").html(date.getFullYear());\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tXKit.extensions.profiler.get_json_p1(user_url, m_window_id);\n\t\t\t\tXKit.extensions.profiler.get_json_p2(user_url, m_window_id, 1);\n\n\t\t\t}\n\t\t});\n\t},\n\n\tget_json_p1: function(user_url, m_window_id) {\n\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: \"https://\" + user_url + \".tumblr.com/api/read/json?read_id=\" + XKit.tools.random_string(),\n\t\t\tjson: false,\n\t\t\tonerror: function(response) {\n\t\t\t\tconsole.log(\"Error getting page.\");\n\t\t\t\t// XKit.extensions.profiler.display_error(m_window_id);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\n\n\t\t\t\t// Manually look for the string \"timezone\":\"Whatever\" because\n\t\t\t\t// the responseText is a substring of a JSON object\n\t\t\t\tvar timezone = '';\n\t\t\t\tif (response.responseText) {\n\t\t\t\t\ttimezone = response.responseText.match(/\"timezone\":\\s*(\"[^\"]*\")/)[1];\n\t\t\t\t}\n\n\t\t\t\tif (timezone) {\n\t\t\t\t\t// Unescape the JS string\n\t\t\t\t\ttimezone = JSON.parse(timezone);\n\t\t\t\t\t$(\"#xkit-profiler-timezone\").removeClass(\"loading-up\").html(timezone);\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tget_json_p2: function(user_url, m_window_id, part) {\n\n\t\tvar to_get = \"\";\n\t\tif (part === 1) { to_get = \"text\"; }\n\t\tif (part === 2) { to_get = \"photo\"; }\n\t\tif (part === 3) { to_get = \"quote\"; }\n\t\tif (part === 4) { to_get = \"link\"; }\n\t\tif (part === 5) { to_get = \"chat\"; }\n\t\tif (part === 6) { to_get = \"audio\"; }\n\t\tif (part === 7) { to_get = \"video\"; }\n\t\tif (part === 8) { return; }\n\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/posts\" + \"?api_key=\" + XKit.extensions.profiler.apiKey + \"&type=\" + to_get + \"&limit=1\";\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: api_url,\n\t\t\tjson: true,\n\t\t\tonerror: function(response) {\n\t\t\t\tconsole.log(\"Error getting page.\");\n\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\n\n\t\t\t\tvar data = null;\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(response.responseText).response;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(\"Error parsing data.\");\n\t\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$(\"#xkit-profiler-\" + to_get).removeClass(\"loading-up\").html(data.total_posts);\n\n\t\t\t\tXKit.extensions.profiler.get_json_p2(user_url, m_window_id, (part + 1));\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tdisplay_error: function(m_window_id) {\n\n\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\n\n\t\t$(\"#xkit-profiler-contents\").addClass(\"error-box\");\n\t\t$(\"#xkit-profiler-contents\").html(\"<div class=\\\"padding-top: 50px;\\\">Can't fetch blog information.<br/>Please try again later.</div>\");\n\t\t$(\"#xkit-profiler-contents\").nanoScroller();\n\t\t$(\"#xkit-profiler-contents\").nanoScroller({ scroll: 'top' });\n\n\t},\n\n\tshow_ump_error: function() {\n\n\t\tif (XKit.storage.get(\"profiler\", \"shown_warning_about_show_more\", \"\") !== \"yass\") {\n\t\t\tXKit.window.show(\"Oops: User Menus+ is missing.\", \"<b>Profiler requires User Menus+ extension to be installed and enabled in order to work.</b> Please download User Menus+ from the extension gallery and refresh the page to start using Profiler.\", \"error\", \"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\n\t\t\tXKit.storage.set(\"profiler\", \"shown_warning_about_show_more\", \"yass\");\n\t\t}\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\ttry {\n\t\t\tXKit.extensions.show_more.remove_custom_menu(\"profiler\");\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Can't remove custom menu, \" + e.message);\n\t\t}\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkQzMUIxMzgxQjM2MTFFM0EzRUJBOUI0RDFFQjc1RUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQzMUIxMzkxQjM2MTFFM0EzRUJBOUI0RDFFQjc1RUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mzk1NzY3RjFCMjYxMUUzQTNFQkE5QjREMUVCNzVFRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Mzk1NzY4MDFCMjYxMUUzQTNFQkE5QjREMUVCNzVFRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsYvGsQAAAQ/SURBVHjafJYpTzRBEIZ3huG+b8KNQACOIJA4BAYwKCS/AIFEIEkw/ACCwKBIgASDQGBIcByKIyEQ7jvcx/fsvkvRzOx+JXp6qquqq6rfqu5ga2vL8zzf9xljsZiXoK+vL/1C3wmCo18mn5+fjGLqF5KYlt7f343py7qUvR+Cw5ptySiOK2OK9vv9Q+ZZXNH7S7aTKbujqy8TYtrcLJhW4BpNqamls7Oz09NTouaXsaqqqrKyMuSWSNmWLukKLEbLiRvg+fn5/Pz8+vo6EzsnZb+ioqK7u7uvr6+srMyC0JLrtLezs5ORkeFuoPnT09PMzMzCwkJWVlZOTg5jEATKGyY+Pj7e3t5eXl4Ye3t7BwcHc3Nz7cw/EqS5t7u7a6dq2+7t7U1OTh4fHxcWFpaUlDBmZ2fLD3mK5uvr68PDw+3tLSMZGxkZqa+v1xLExprHIzBIKLr9/f2xsTEmZJnwCwoKcB/rsb8kK4+Pj9fX1xcXF/yOjo5qD9wHqZr4lnFZR2FqaoqcNDU1IV1eXk7sUesQTJYQQAzhvLy82dlZEpt03POEiEAno7wTxNzc3N3dXUNDQ2lpKY6HEEKusXhycrK8vGyYwTTHk5mZeXR0tLS0NDAwoHNKCmimDQDi6upqTU0N1kl6yDrxwmck44wu3hFmCcWNjQ0yZhWHcV8flfXi4qLyju/RnDw/P3PsTIAA89AqKiiivra2pkYifhDf5KdVbG9vI0RmQ76LOLfx8fGrqyustLa2hlZRQRH1g4ODb4cCO5PLy0sCBzO2n0v9/f3gVeECs5WVlagMiqhfJ0jCcaa1RqAG3lMmh42Li4utjhobGznSWCpCHSMUh9W2b2r8q5rSZV8VJHnSlXID1IUOq7jfDWCltK7sT0xMDA0NWSegxGJpCCP39/d2YQTy3b0AokRCSBFGzRW3aUdPoqioyNAfWNXBTacDPCg9yhvf/29dxFErMXEUWcmxAQspFShUjo7uZoH/xzp+YEeBJlNkuMRN2kBKtZ6eHjywCIaHhykI6jYqSZ3b3RBH0adD7e3tOpIoTLFugJZrIN1tGNZim5ubFeLvBu8JQjo/P5/llDAlMm0gFDE5PDyMNgzaETBFQMLJVqHjhsvY1tZ2c3ND0w7BdHp6mkr87ZG+X11dHWoYwkLoVZCEqV3TTDo6OjY3N93wBVP3eAE7HLee4bS0tMAJvaOCKCTQ7OrqovFxF7qu4bJ7rdIV4OtXuWV0+2gyAvdfbzo43CGdnZ00Ne4Qg2k6XJL3uro6IjBTf9q1mwq3mJkQcm1tLV2IRssDImSXw6Q5E5YSZQVoSFPaAw7QHjz2HLI7D9+5bwn/JUEmg3VSFEq3dVCDbHwDsxV67bp9CQHM4alhwSrOtW6ZsTqIu+hWlvsOdN+wblhqXJYHc9aeEa5u8lXhempPKyHPfbWro1gFGb71m65B/RNgAE6EQ+bxcXjIAAAAAElFTkSuQmCC","css":"#xkit-profiler-contents {\n\tbackground: rgb(245,245,245);\n\tborder: 1px solid rgb(190,190,190);\n\theight: 200px;\n}\n\n.xkit-profiler-nickname-inline {\n\tfont-weight: normal;\n\tdisplay: inline-block;\n\tmargin-left: 5px;\n\tcolor: rgb(100,100,100);\n}\n\n#xkit-profiler-contents.error-box {\n\ttext-align: center;\n\tcolor: rgb(130,130,130);\n\tline-height: 30px;\n}\n\n.xkit-profiler-nickname {\n\tfont-weight: normal;\n\tmargin-left: 5px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 55px;\n}\n\n.xkit-profiler-line {\n\tborder-bottom: 1px solid rgb(190,190,190);\n\tpadding: 0px 10px;\n\theight: 25px;\n\tline-height: 25px;\n\tposition: relative;\n}\n\n.xkit-profiler-line:last-child {\n\tborder-bottom: 0;\n}\n\n.xkit-profiler-line.separator {\n\tbackground: rgb(190,190,190);\n\tfont-weight: bold;\n}\n\n.xkit-profiler-line div.loading-up {\n\tbackground: transparent no-repeat 50% 50% url(data:image/gif;base64,R0lGODlhDgAEALMKAOvt7////97i5L3Ey+Xn6vb3+PDy89PY26ixueLl5wAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzU0REE2MUM4NjVBMTFFMkE4N0FGRkVDQThGN0FCRDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzU0REE2MUQ4NjVBMTFFMkE4N0FGRkVDQThGN0FCRDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRTRCNEE3NTg2NTUxMUUyQTg3QUZGRUNBOEY3QUJEMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRTRCNEE3Njg2NTUxMUUyQTg3QUZGRUNBOEY3QUJEMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAURAAoALAAAAAAOAAQAAAQfMI2RghHChAJAGQgyBMJxCAFAEAAokiaqshJlYRrnRQAh+QQFEQAKACwAAAAACQAEAAAEFdAIYVQaI4lzhBoIMmzdFw4SZWFJBAAh+QQFEQAKACwAAAAADgAEAAAEH7AAUJQRwqg0RgIEASjCcQjKgCADKJImqrISZWEa50UAIfkEBREACgAsBQAAAAkABAAABBWwAFCUEcIAQoASxyFs3RcKEmVhRgQAOw==);\n}\n\n.xkit-profiler-line div {\n\ttext-align: right;\n\tposition: absolute;\n\ttop: 0; right: 20px;\n\theight: 25px;\n\tline-height: 25px;\n\tmin-width: 15px;\n\tmax-width: 240px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}","title":"Profiler","description":"The User Inspection Gadget","developer":"STUDIOXENIX","version":"1.2.6","details":"Select Profiler option from the User Menu to see information such as when they started blogging, how many posts they have, timezone, and more.<br><br>Requires User Menus+ to be installed.","frame":"false","beta":"false","slow":"false"}