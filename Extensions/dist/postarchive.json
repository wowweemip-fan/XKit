{"id":"postarchive","script":"//* TITLE Post Archiver **//\n//* VERSION 1.0.6 **//\n//* DESCRIPTION Never lose a post again. **//\n//* DETAILS Post Archiver lets you save posts to your XKit.<br><br>Found a good recipe? Think those hotline numbers on that signal boost post might come in handy in the future?<br><br>Click on the save button, then click on the My Archive button on your sidebar anytime to access those posts. You can also name and categorize posts. **//\n//* DEVELOPER new-xkit **//\n//* FRAME false **//\n//* BETA false **//\n\n/* eslint prefer-template: \"error\" */\n\nXKit.extensions.postarchive = {\n\n\trunning: false,\n\n\tbutton_icon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQ5RTU4RTU3MjVEMTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQ5RTU4RTY3MjVEMTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NDlFNThFMzcyNUQxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NDlFNThFNDcyNUQxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu91pc8AAACgSURBVHjaYvz//z8D1QDIMGSMLo0Fz8Sln4mBimCEGMaCRawLiKXx6HEC4qVQ9lwg3ocvNm2A+A+OmETGh4GYGUUvjqRRQcCgVzDXE2MYCGzBY5grNp/hM0wIiB9iMagRV6IllAMsgfgnkkF7QeGE0zA0W7GBIqjccyCWwJYjkfUTMgwE1kGTBAM+wxjRDGEkp6ygSQ5gJOC9YZLRAQIMAENzviFg3gnxAAAAAElFTkSuQmCC\",\n\tbutton_on: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTU0NzMyOUU3MjVEMTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTU0NzMyOUY3MjVEMTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNTQ3MzI5QzcyNUQxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNTQ3MzI5RDcyNUQxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn1307MAAAC0SURBVHjaYvz//z8DtQBj/hK88thsmgXE6TDOhGiEEiYGKoIRYhgLFrEuIJbGo8cJiJdC2XOBeB8+wzYB8QEgZsZhmAoUHwHig4S8CVJUQ8BHr4E4Aoj/EhNmHUC8FY9h0UD8lJQIiAPiR1jEm4B4N6mx+Q7qlV9IYvughuGMTeQsw4gmfxyIK4G4F4hfQL2HEk4FSxn/44tNdNAHxDZAPAVqIEnpDBsIGvAc8H94ZnSAAAMAwKElB0jQE0QAAAAASUVORK5CYII=\",\n\n\tapiKey: XKit.api_key,\n\n\tarchived_posts: [],\n\tcategories: [],\n\n\tframe_run: function() {\n\n\t\tif ($(\".btn.like\").length === 0 && $(\".btn.edit\").length === 0) { return; }\n\n\t\tXKit.tools.init_css(\"postarchive\");\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tvar m_css = \"#iframe_controls { width: auto !important; } \" +\n\t\t\t\t\"#xkit_postarchive_inblog_button:before {\" +\n\t\t\t\t\t\" background-size: auto; \" +\n\t\t\t\t\t\" background-position: 50% 50%; \" +\n\t\t\t\t\t\" background-repeat: no-repeat; \" +\n\t\t\t\t\t\" background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTQ0NUQ3NjA3Mjg4MTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTQ0NUQ3NjE3Mjg4MTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NDQ1RDc1RTcyODgxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5NDQ1RDc1RjcyODgxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtuUengAAACQSURBVHjaYvz//z8DOYAJi5gxEP9Hw8bEaCTZRjYglgNiCSzqJKBybHARkB+hmA2Iz//HDc5D1YDVI2sEYRUg/oxF02eoHAMujSAcgkVjCLo6bBpBeDKSpsnY1DDiiEdQIByDsq2A+Be6AphGmG5GJDlRKP0aSQyuDp9GbACujgWHBFlJjijAQqQTMQBAgAEAoAjV0Rb+PnUAAAAASUVORK5CYII=); \" +\n\t\t\t\t\"}\" +\n\t\t\t\t\".btn.xkit-post-archive-inblog-button-done { background-color: #59982a !important; }\";\n\n\t\tXKit.tools.add_css(m_css, \"post_archive_in_blog\");\n\n\t\tvar m_html = \"<a id=\\\"xkit_postarchive_inblog_button\\\" onclick=\\\"return false\\\" class=\\\"btn icon no_label\\\" title=\\\"Archive this post\\\">Post Archiver</a>\";\n\n\t\t$(\".btn.dashboard\").before(m_html);\n\n\t\tvar post_id = \"\";\n\n\t\tif ($(\".btn.like\").length > 0) {\n\t\t\tpost_id = $(\".btn.like\").attr('data-id');\n\t\t} else {\n\t\t\tvar postid_start = document.location.href.search(\"&pid=\");\n\t\t\tif (postid_start === -1) { return; }\n\t\t\tvar postid_end =  document.location.href.indexOf(\"&\", postid_start + 2);\n\t\t\tpost_id = document.location.href.substring(postid_start + 5, postid_end);\n\t\t}\n\n\t\tif (XKit.extensions.postarchive.is_post_in_archive(post_id) !== false) {\n\n\t\t\t$(\"#xkit_postarchive_inblog_button\").addClass(\"xkit-post-archive-inblog-button-done\");\n\n\t\t}\n\n\t\t$(\"#xkit_postarchive_inblog_button\").click(function() {\n\n\t\t\tXKit.iframe.full();\n\n\t\t\tXKit.extensions.postarchive.archive(post_id, this, true);\n\n\n\t\t});\n\n\t},\n\n\trun: function() {\n\n\t\tthis.running = true;\n\n\t\tXKit.tools.init_css(\"postarchive\");\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tif (XKit.interface.where().inbox === true) { return; }\n\n\t\tif ($('#postarchive_ul').length === 0) {\n\t\t\tvar xf_html =\n\t\t\t`<ul class=\"controls_section\" id=\"postarchive_ul\">\n\t\t\t\t<li class=\"section_header selected\">Post Archive</li>\n\t\t\t\t\t<li class=\"no_push\" style=\"height: 36px;\"><a href=\"#\" id=\"postarchive_view\">\n\t\t\t\t\t\t<div class=\"hide_overflow\"\n\t\t\t\t\t\t\tstyle=\"color: rgba(255, 255, 255, 0.5) !important;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tpadding-left: 10px;\n\t\t\t\t\t\t\tpadding-top: 8px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tMy Archive\n\t\t\t\t\t\t\t<span class=\"count\" id=\"postarchive_view_count\" style=\"padding-top: 8px;\">\n\t\t\t\t\t\t\t\t${XKit.extensions.postarchive.archived_posts.length}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a></li>\n\t\t\t\t</ul>`;\n\n\t\t\t$(\".controls_section_radar\").before(xf_html);\n\t\t}\n\n\t\t$(\"#postarchive_view\").click(function() {\n\n\t\t\tXKit.extensions.postarchive.view();\n\n\t\t\treturn false;\n\t\t});\n\n\t\tif ($(\".posts .post\").length > 0) {\n\n\t\t\tXKit.interface.create_control_button(\"xkit-postarchive\", this.button_icon, \"Archive this post\", \"\", this.button_on);\n\t\t\tXKit.extensions.postarchive.init();\n\t\t\tXKit.post_listener.add(\"postarchive\", XKit.extensions.postarchive.do);\n\t\t\tXKit.extensions.postarchive.do();\n\t\t}\n\n\t},\n\n\trender_posts_uncategorized: function() {\n\n\t\tvar m_post_list_html = \"\";\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\n\t\t\tif (!XKit.extensions.postarchive.archived_posts[i].category) {\n\n\t\t\t\tvar m_x_list_div = `<div data-category=\"\" data-post-id=\"${XKit.extensions.postarchive.archived_posts[i].post_id}\" class=\"xkit-postarchive-post\">${XKit.tools.escape_html(XKit.extensions.postarchive.archived_posts[i].title)}</div>`;\n\t\t\t\tm_post_list_html = m_post_list_html + m_x_list_div;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn m_post_list_html;\n\n\t},\n\n\trender_posts_on_category: function(category, additional_classes) {\n\n\t\tvar m_post_list_html = \"\";\n\n\t\tif (typeof additional_classes === \"undefined\") { additional_classes = \"\"; }\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\n\t\t\tif (typeof XKit.extensions.postarchive.archived_posts[i].category !== \"undefined\") {\n\n\t\t\t\tif (XKit.extensions.postarchive.archived_posts[i].category == category) {\n\n\t\t\t\t\tvar m_x_list_div = `\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdata-category=\"${XKit.extensions.postarchive.archived_posts[i].category}\"\n\t\t\t\t\t\t\tdata-post-id=\"${XKit.extensions.postarchive.archived_posts[i].post_id}\"\n\t\t\t\t\t\t\tclass=\"xkit-postarchive-post ${additional_classes}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t${XKit.tools.escape_html(XKit.extensions.postarchive.archived_posts[i].title)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tm_post_list_html = m_post_list_html + m_x_list_div;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn m_post_list_html;\n\n\t},\n\n\tshow_items_in_category: function(category_id, show) {\n\n\t\t$(\".xkit-postarchive-post, .xkit-postarchive-no-posts-index\").each(function() {\n\n\t\t\tif ($(this).attr('data-category') === category_id) {\n\n\t\t\t\tif (show !== true) {\n\n\t\t\t\t\t$(this).addClass(\"xkit-postarchive-hidden-category-item\");\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$(this).removeClass(\"xkit-postarchive-hidden-category-item\");\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\n\t\tXKit.extensions.postarchive.save_category_collapse(category_id, show);\n\n\t},\n\n\tsave_category_collapse: function(category_id, show) {\n\n\t\tif (category_id === \"\") {\n\t\t\t// we have a storage bug on chrome.\n\t\t\tif (show === true) {\n\t\t\t\tXKit.storage.set(\"postarchive\", \"collapse_uncategorized\", \"false\");\n\t\t\t} else {\n\t\t\t\tXKit.storage.set(\"postarchive\", \"collapse_uncategorized\", \"true\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\tif (category_id === XKit.extensions.postarchive.categories[i].id) {\n\n\t\t\t\tXKit.extensions.postarchive.categories[i].collapsed = !show;\n\t\t\t\tXKit.extensions.postarchive.save_posts();\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tview: function(open_this_id) {\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tif ($(\"#xkit-postarchive-background\").length > 0) {\n\n\t\t\t$(\"#xkit-postarchive-background\").remove();\n\t\t\t$(\"#xkit-postarchive-container\").remove();\n\n\t\t}\n\n\t\tif (XKit.extensions.postarchive.archived_posts.length === 0) {\n\n\t\t\tXKit.window.show(\"No posts yet.\", \"<b>You have no archived posts yet.</b><br/>If you've archived them on another computer, you might need to sync them using XCloud.\", \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\n\t\t}\n\n\t\tvar m_post_list_html = \"\";\n\n\t\tm_post_list_html += `<div data-category=\"\" class=\"xkit-postarchive-cat-separator-uncategorized xkit-postarchive-cat-separator xkit-pac-opened\"><div class=\"xkit-postarchive-cat-separator-title\">Uncategorized</div></div>`;\n\t\tm_post_list_html = m_post_list_html + XKit.extensions.postarchive.render_posts_uncategorized();\n\n\n\t\tif (XKit.extensions.postarchive.categories.length > 0) {\n\n\t\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\t\tvar m_collapse_class = \"xkit-pac-opened\";\n\t\t\t\tvar m_collapse_class_post = \"\";\n\n\t\t\t\tif (XKit.extensions.postarchive.categories[i].collapsed === true) { m_collapse_class = \"\"; m_collapse_class_post = \"xkit-postarchive-hidden-category-item\"; }\n\n\t\t\t\tm_post_list_html += `<div data-category=\"${XKit.extensions.postarchive.categories[i].id}\" class=\"xkit-postarchive-cat-separator ${m_collapse_class}\"><div class=\"xkit-postarchive-cat-separator-title\">${XKit.extensions.postarchive.categories[i].title}</div></div>`;\n\n\t\t\t\tvar cat_index = XKit.extensions.postarchive.render_posts_on_category(XKit.extensions.postarchive.categories[i].id, m_collapse_class_post);\n\n\t\t\t\tif (cat_index !== \"\") {\n\n\t\t\t\t\tm_post_list_html = m_post_list_html + cat_index;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tm_post_list_html += `<div data-category=\"${XKit.extensions.postarchive.categories[i].id}\" class=\"xkit-postarchive-no-posts-index ${m_collapse_class_post}\">No posts</div>`;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar m_html =\n\t\t\t`<div id=\"xkit-postarchive-background\">&nbsp;</div>\n\t\t\t<div id=\"xkit-postarchive-container\">\n\t\t\t\t<div id=\"xkit-postarchive-sidebar\" class=\"nano\">\n\t\t\t\t\t<div id=\"xkit-postarchive-sidebar-content\" class=\"content\">\n\t\t\t\t\t\t${m_post_list_html}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<input type=\"text\" placeholder=\"Search archived post titles..\" id=\"xkit-postarchive-search\">\n\t\t\t\t<div id=\"xkit-postarchive-export\" class=\"xkit-button\">Export</div>\n\t\t\t\t<div id=\"xkit-postarchive-import\" class=\"xkit-button\">Import</div>\n\t\t\t\t<div id=\"xkit-postarchive-content\" class=\"xkit-postarchive-no-post-selected\">\n\t\t\t\t\tSelect a post from the right to get started.\n\t\t\t\t</div>\n\t\t\t\t<div id=\"xkit-postarchive-remove-this\" class=\"xkit-button hidden\">remove</div>\n\t\t\t\t<div id=\"xkit-postarchive-recategorize-this\" class=\"xkit-button hidden\">recategorize</div>\n\t\t\t\t<div id=\"xkit-postarchive-rename-this\" class=\"xkit-button hidden\">rename</div>\n\t\t\t</div>`;\n\n\t\t$(\"body\").append(m_html);\n\n\t\tif ($(\"#xkit-postarchive-sidebar .xkit-postarchive-post\").length > 8) {\n\n\t\t\t$(\"#xkit-postarchive-sidebar .xkit-postarchive-post:last-child\").css(\"border-bottom\", \"0px\");\n\n\t\t}\n\n\t\t$(\".xkit-postarchive-cat-separator\").click(function() {\n\n\t\t\t$(this).toggleClass(\"xkit-pac-opened\");\n\n\t\t\tif ($(this).hasClass(\"xkit-pac-opened\")) {\n\n\t\t\t\tXKit.extensions.postarchive.show_items_in_category($(this).attr('data-category'), true);\n\n\t\t\t} else {\n\n\t\t\t\tXKit.extensions.postarchive.show_items_in_category($(this).attr('data-category'), false);\n\n\t\t\t}\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-sidebar\").nanoScroller();\n\t\t$(\"#xkit-postarchive-sidebar\").nanoScroller({ scroll: 'top' });\n\n\t\t$(\"#xkit-postarchive-sidebar  .xkit-postarchive-post\").click(function() {\n\n\t\t\t$(\"#xkit-postarchive-sidebar  .xkit-postarchive-post\").removeClass(\"selected\");\n\n\t\t\t$(this).addClass(\"selected\");\n\n\t\t\tXKit.extensions.postarchive.render_post($(this).attr('data-post-id'));\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-background\").click(function() {\n\n\t\t\t$(\"#xkit-postarchive-background, #xkit-postarchive-container\").fadeOut('fast', function() { $(this).remove(); });\n\n\t\t});\n\n\t\tif (typeof open_this_id !== \"undefined\") {\n\n\t\t\t$(\".xkit-postarchive-post\").each(function() {\n\n\t\t\t\tif ($(this).attr('data-post-id') === open_this_id) {\n\n\t\t\t\t\t$(this).trigger(\"click\");\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t\t$(\"#xkit-postarchive-export\").on(\"click\", function() {\n\n\t\t\tvar m_data = {};\n\n\t\t\tm_data.posts = XKit.storage.get(\"postarchive\", \"archived_posts\", \"\");\n\t\t\tm_data.categories = XKit.storage.get(\"postarchive\", \"categories\", \"\");\n\n\t\t\tvar blob = new Blob([JSON.stringify(m_data)], {type: 'text/plain'});\n\n\t\t\tXKit.window.show(\"Export Archive\", \"Click OK to download a file with the contents of your Archive.\", \"info\", \"<a id='xkit-postarchive-download-export'><div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-export-confirm\\\">OK</div></a>\");\n\t\t\tvar link = $('#xkit-postarchive-download-export')[0];\n\t\t\tlink.href = window.URL.createObjectURL(blob);\n\t\t\tlink.download = `PostArchive export - ${Date()}.txt`;\n\n\t\t\t$(\"#xkit-postarchive-export-confirm\").click(function() {\n\n\t\t\t\tXKit.window.close();\n\t\t\t\tXKit.extensions.postarchive.view();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-import\").on(\"click\", function() { //Import Function\n\n\t\t\tXKit.window.show(\"Import\", \"<b>You can import settings from XKit.</b><br/>Click XKit's Export button and select the file here (or drag and drop it).<br/><br/>If you need to import your archive from old XKit, click <a href='http://new-xkit-extension.tumblr.com/postarchive-migration'>here for the PostArchive migration guide.</a><br/><br/><input type='file' accept='text/plain' id=\\\"xkit-postarchive-import-file\\\" />\", \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-add-words\\\">Import!</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-replace-on-import\").click(function() {\n\t\t\t\t$(this).toggleClass(\"selected\");\n\t\t\t});\n\n\t\t\t$(\"#xkit-postarchive-add-words\").click(function() {\n\n\t\t\t\tvar file = $(\"#xkit-postarchive-import-file\")[0].files[0];\n\t\t\t\t// TODO: check if import will push XKit over browser storage limit\n\n\t\t\t\tvar f_reader = new FileReader();\n\n\t\t\t\tvar progress_bar = XKit.progress.add('postarchive-import-progress');\n\n\t\t\t\t$('.xkit-window-msg').append(progress_bar);\n\t\t\t\t$('.xkit-window-title').text('Importing...');\n\n\t\t\t\tf_reader.onload = function(event) {\n\t\t\t\t\tvar m_data = event.target.result;\n\n\t\t\t\t\tvar m_obj = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tm_obj = JSON.parse(m_data);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tXKit.extensions.postarchive.show_error(\"Invalid/Corrupt JSON object found.\\nImport can not continue.\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar m_posts = JSON.parse(m_obj.posts);\n\t\t\t\t\tvar m_categories = JSON.parse(m_obj.categories);\n\n\t\t\t\t\tXKit.extensions.postarchive.load_posts();\n\n\t\t\t\t\tArray.prototype.push.apply(XKit.extensions.postarchive.categories, m_categories);\n\t\t\t\t\tArray.prototype.push.apply(XKit.extensions.postarchive.archived_posts, m_posts);\n\t\t\t\t\tXKit.extensions.postarchive.save_posts();\n\n\t\t\t\t\tXKit.extensions.postarchive.update_sidebar();\n\n\t\t\t\t\tXKit.window.show(\"Done!\", \"Your posts should exist!\", \"info\", \"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\n\t\t\t\t\tXKit.extensions.postarchive.view();\n\t\t\t\t\treturn;\n\n\t\t\t\t};\n\n\t\t\t\tf_reader.onprogress = function(event) {\n\t\t\t\t\tXKit.progress.value('postarchive-import-progress', 100 * event.loaded / file.size);\n\t\t\t\t};\n\n\t\t\t\tf_reader.readAsText(file);\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-search\").keyup(function() {\n\n\t\t\tvar m_value = $(this).val().toLowerCase();\n\t\t\tm_value = $.trim(m_value);\n\n\t\t\tif (m_value === \"\") {\n\n\t\t\t\t$(\".xkit-postarchive-post\").removeClass(\"xkit-this-post-is-pretty-hidden\");\n\t\t\t\t$(\"#xkit-postarchive-not-found\").remove();\n\t\t\t\t$(\".xkit-postarchive-cat-separator\").removeClass(\"xkit-this-post-is-pretty-hidden\");\n\t\t\t\t$(\".xkit-postarchive-no-posts-index\").removeClass(\"xkit-this-post-is-pretty-hidden\");\n\n\t\t\t} else {\n\n\t\t\t\t$(\".xkit-postarchive-cat-separator\").addClass(\"xkit-this-post-is-pretty-hidden\");\n\t\t\t\t$(\".xkit-postarchive-no-posts-index\").addClass(\"xkit-this-post-is-pretty-hidden\");\n\n\t\t\t}\n\n\t\t\tvar found_count = 0;\n\n\t\t\t$(\".xkit-postarchive-post\").each(function() {\n\n\t\t\t\tif ($(this).html().toLowerCase().indexOf(m_value) !== -1) {\n\n\t\t\t\t\tfound_count++;\n\t\t\t\t\t$(this).removeClass(\"xkit-this-post-is-pretty-hidden\");\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$(this).addClass(\"xkit-this-post-is-pretty-hidden\");\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tif (found_count === 0) {\n\n\t\t\t\tif ($(\"#xkit-postarchive-not-found\").length === 0) {\n\t\t\t\t\t$(\"#xkit-postarchive-sidebar-content\").append(\"<div id=\\\"xkit-postarchive-not-found\\\">Not found.</div>\");\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$(\"#xkit-postarchive-sidebar\").nanoScroller();\n\t\t\t$(\"#xkit-postarchive-sidebar\").nanoScroller({ scroll: 'top' });\n\n\t\t});\n\n\t\tvar collapse_uncat = XKit.storage.get(\"postarchive\", \"collapse_uncategorized\", \"false\");\n\t\tif (collapse_uncat === \"true\" || collapse_uncat === true) {\n\n\t\t\t// dirty coding.\n\t\t\t$(\".xkit-postarchive-cat-separator-uncategorized\").trigger('click');\n\n\t\t}\n\n\t},\n\n\tget_photo: function(data, index, width) {\n\n\t\tfor (var i = 0; i < data.photos[index].alt_sizes.length; i++) {\n\t\t\tif (parseInt(data.photos[index].alt_sizes[i].width) === parseInt(width)) {\n\t\t\t\treturn data.photos[index].alt_sizes[i].url;\n\t\t\t}\n\t\t}\n\n\t\treturn data.photos[index].alt_sizes[0].url;\n\n\t},\n\n\tget_photo_height: function(data, index, width) {\n\n\t\tfor (var i = 0; i < data.photos[index].alt_sizes.length; i++) {\n\t\t\tif (parseInt(data.photos[index].alt_sizes[i].width) === parseInt(width)) {\n\t\t\t\treturn data.photos[index].alt_sizes[i].height;\n\t\t\t}\n\t\t}\n\n\t\treturn data.photos[index].alt_sizes[0].height;\n\n\t},\n\n\tparse_item: function(data, username) {\n\n\t\tvar m_html = \"<li class=\\\"post_container\\\">\";\n\t\tvar post_class = \"\";\n\n\t\tvar post_tags = \"\";\n\t\tvar post_contents = \"\";\n\n\t\tif (data.type === \"text\") {\n\n\t\t\tpost_class = \"is_regular\";\n\n\t\t\tif (data.title !== \"\" && data.title !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_title\">${data.title}</div>`;\n\t\t\t}\n\n\t\t\tif (data.body !== \"\" && data.body !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_body\">${data.body}</div>`;\n\t\t\t}\n\n\t\t}\n\n\t\tif (data.type === \"quote\") {\n\n\t\t\tpost_class = \"is_quote\";\n\n\t\t\tif (data.text !== \"\" && data.text !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_title medium\"><span class=\"quote\">\"${data.text}\"</span></div>`;\n\t\t\t}\n\n\t\t\tif (data.source !== \"\" && data.source !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_body\"><table class=\"quote_source_table\"><tbody><tr><td valign=\"top\" class=\"quote_source_mdash\">&nbsp;</td><td valign=\"top\" class=\"quote_source\">- ${data.source}</td></tr></tbody></table></div>`;\n\t\t\t}\n\n\t\t}\n\n\t\tif (data.type === \"link\") {\n\n\t\t\tpost_class = \"is_link\";\n\n\t\t\tif (data.link_image !== \"\" && data.link_image !== null && typeof data.link_image !== \"undefined\") {\n\n\t\t\t\tpost_contents += `<div class=\"post_media\"><div class=\"link_button clickable\"><div class=\"link_thumbnail_container\"><a href=\"${data.url}\" target=\"_blank\" class=\"link_thumbnail_click\"><img class=\"link_thumbnail\" src=\"${data.link_image}\" alt=\"\"></a></div><div class=\"link_text_container\"><div class=\"link_text_outer\"><div class=\"link_text\"><a href=\"${data.url}\" target=\"_blank\" class=\"link_title\">${data.title}</a><a href=\"${data.url}\" target=\"_blank\" class=\"link_source\">${data.url}</a></div></div></div></div></div>`;\n\n\t\t\t} else {\n\n\t\t\t\tvar link_title = data.url;\n\n\t\t\t\tif (data.title !== \"\" && data.title !== null && typeof data.title !== \"undefined\") {\n\n\t\t\t\t\tlink_title = data.title;\n\n\t\t\t\t}\n\n\t\t\t\tpost_contents += `<div class=\"post_media\"><div class=\"link_button clickable\"><div class=\"link_text_container\"><div class=\"link_text_outer\"><div class=\"link_text\"><a href=\"${data.url}\" target=\"_blank\" class=\"link_title\">${link_title}</a></div></div></div></div></div>`;\n\n\t\t\t}\n\n\t\t\tif (data.description !== \"\" && data.description !== null) {\n\n\t\t\t\tpost_contents += `<div class=\"post_body\">${data.description}</div>`;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (data.type === \"answer\") {\n\n\t\t\tpost_class = \"is_note\";\n\n\t\t\tpost_contents += `<div class=\"post_body\"><div class=\"note_item\"><div class=\"text\"><p class=\"asker\"><span class=\"name\">${data.asking_name}</span><span>&nbsp;asked:</span></p><p>${data.question}</p></div><div class=\"nipple\"></div></div><div class=\"avatar\"><img src=\"http://assets.tumblr.com/images/anonymous_avatar_96.gif\" alt=\"\" width=\"40\" height=\"40\"></div><div class=\"answer post_info\">${data.answer}</div></div>`;\n\n\t\t}\n\n\t\tif (data.type === \"video\") {\n\n\t\t\tpost_class = \"is_video\";\n\n\t\t\tvar m_post_inner_html = \"\";\n\n\t\t\tvar last_width = 0;\n\t\t\tfor (var obj in data.player) {\n\t\t\t\tif (data.player[obj].width > last_width && data.player[obj].width <= 540) {\n\t\t\t\t\tm_post_inner_html = data.player[obj].embed_code;\n\t\t\t\t\tlast_width = data.player[obj].width;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (m_post_inner_html.indexOf(\"<video\") !== -1) {\n\t\t\t\tm_post_inner_html = `${m_post_inner_html.slice(0, 8)} controls ${m_post_inner_html.slice(8)}`;\n\t\t\t} else {\n\t\t\t\tm_post_inner_html = m_post_inner_html.replace('width=\"500\"', 'width=\"540\"');\n\t\t\t}\n\n\t\t\tpost_contents += `<div class=\"post_media\">${m_post_inner_html}</div>`;\n\n\t\t\tif (data.caption !== \"\" && data.caption !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_body\">${data.caption}</div>`;\n\t\t\t}\n\n\t\t}\n\n\t\tif (data.type === \"audio\") {\n\n\t\t\tpost_class = \"is_audio\";\n\n\t\t\tpost_contents += `<div class=\"post_media\">${data.embed}</div>`;\n\n\t\t\tif (data.caption !== \"\" && data.caption !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_body\">${data.caption}</div>`;\n\t\t\t}\n\n\t\t}\n\n\t\tif (data.type === \"photo\") {\n\n\t\t\tpost_class = \"is_photo\";\n\n\t\t\tif (data.photos.length === 1) { post_class = \"is_photo\"; } else { post_class = \"is_photoset\"; }\n\n\t\t\tvar photo_post_inner_html = \"\";\n\n\t\t\tif (data.photos.length === 1) {\n\n\t\t\t\tphoto_post_inner_html = `<img class=\"image\" width=\"540\" alt=\"\" src=\"${XKit.extensions.postarchive.get_photo(data, 0, \"540\")}\" data-thumbnail=\"${XKit.extensions.postarchive.get_photo(data, 0, \"100\")}\">`;\n\n\t\t\t} else {\n\n\t\t\t\tvar rows = [];\n\n\t\t\t\tfor (var i = 0; i < data.photoset_layout.length; i++) {\n\t\t\t\t\trows.push(data.photoset_layout[i]);\n\t\t\t\t}\n\n\t\t\t\tphoto_post_inner_html = \"<div class=\\\"photoset\\\" style=\\\"margin-bottom: 11px;\\\">\";\n\n\t\t\t\tvar current_photo = 0;\n\n\t\t\t\trows.forEach(function(row) {\n\t\t\t\t\tvar shortest = 0;\n\t\t\t\t\tvar m_width = 540 / row;\n\t\t\t\t\tif (row > 1) {\n\t\t\t\t\t\tm_width -= row;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Calculate the shortest!\n\t\t\t\t\tvar m_temp_photo = current_photo;\n\n\t\t\t\t\tif (row >= 2) {\n\n\t\t\t\t\t\tfor (var j = 1; j < row; j++) {\n\n\t\t\t\t\t\t\tvar scaled_height = (m_width * XKit.extensions.postarchive.get_photo_height(data, m_temp_photo, \"500\")) / 500;\n\n\t\t\t\t\t\t\tif (scaled_height <= shortest || shortest === 0) {\n\t\t\t\t\t\t\t\tshortest = scaled_height;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tm_temp_photo++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshortest = XKit.extensions.postarchive.get_photo_height(data, m_temp_photo, \"500\");\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar in_row_html = \"\";\n\n\t\t\t\t\tfor (var x = 0; x < row; x++) {\n\n\t\t\t\t\t\tvar m_height = (m_width * XKit.extensions.postarchive.get_photo_height(data, current_photo, \"500\")) / 500;\n\t\t\t\t\t\tvar margin_top = 0;\n\n\t\t\t\t\t\tif (m_height > shortest) {\n\t\t\t\t\t\t\tmargin_top = (m_height - shortest) / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tin_row_html +=\n\t\t\t\t\t\t\t`<a href=\"${XKit.extensions.postarchive.get_photo(data, current_photo, \"500\")}\"\n\t\t\t\t\t\t\t\tclass=\"photoset_photo xkit-postarchive-photoset-photo\"\n\t\t\t\t\t\t\t\tonclick=\"return false;\"\n\t\t\t\t\t\t\t\tid=\"photoset_link_${data.id}_${current_photo}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img style=\"margin-top: -${margin_top}px;\"\n\t\t\t\t\t\t\t\t\tclass=\"photoset_photo\" width=\"${m_width}\"\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\tsrc=\"${XKit.extensions.postarchive.get_photo(data, current_photo, \"500\")}\"\n\t\t\t\t\t\t\t\t\tdata-thumbnail=\"${XKit.extensions.postarchive.get_photo(data, current_photo, \"100\")}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</a>`;\n\n\t\t\t\t\t\tcurrent_photo++;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tphoto_post_inner_html +=\n\t\t\t\t\t\t`<div class=\"photoset_row photoset_row_${row}\" style=\"height: ${shortest}px;\">\n\t\t\t\t\t\t\t${in_row_html}\n\t\t\t\t\t\t</div>`;\n\n\t\t\t\t});\n\n\t\t\t\tphoto_post_inner_html += `</div>`;\n\n\t\t\t}\n\n\t\t\tpost_contents += `<div class=\"post_media\">${photo_post_inner_html}</div>`;\n\n\t\t\tif (data.caption !== \"\" && data.caption !== null) {\n\t\t\t\tpost_contents += `<div class=\"post_body\">${data.caption}</div>`;\n\t\t\t}\n\n\t\t}\n\n\t\tif (typeof data.tags !== \"undefined\") {\n\n\t\t\tpost_tags = \"<div class=\\\"post_tags\\\"><div class=\\\"post_tags_inner\\\">\";\n\n\t\t\tdata.tags.forEach(function(tag) {\n\t\t\t\tvar fixed_tag_url = XKit.tools.replace_all(tag, + \" \", \"-\");\n\t\t\t\tpost_tags += `<a class=\"post_tag\" href=\"http://tumblr.com/tagged/${fixed_tag_url}\">#${tag}</a>`;\n\t\t\t});\n\n\t\t\tpost_tags += `</div></div>`;\n\n\t\t}\n\n\t\tvar source_div = \"\";\n\t\t// var reblog_div = \"\";\n\n\t\tif (data.source_url !== \"\" && typeof data.source_url !== \"undefined\") {\n\n\t\t\tsource_div = `<div class=\"post_source\"><a class=\"post_source_link\" target=\"_blank\" href=\"${data.source_url}\" title=\"${data.source_title}\">${data.source_title}</a><span class=\"post_source_name_prefix\">Source: </span></div>`;\n\n\t\t}\n\n\t\tif (data.reblogged_from_id !== \"\" && typeof data.reblogged_from_id !== \"undefined\") {\n\n\t\t\t// reblog_div = '<span class=\"reblog_source\"><span class=\"reblog_icon\" title=\"' + username + ' reblogged ' + data.reblogged_from_name + '\">reblogged</span><a target=\"_BLANK\" title=\"' + data.reblogged_from_name + '\" href=\"' + data.reblogged_from_url + '\" style=\"\">' + data.reblogged_from_name + '</a></span>';\n\n\t\t}\n\n\t\tm_html += `\n\t\t\t<div\n\t\t\t\tclass=\"xkit-dont-run-extensions post post_full ${post_class} same_user_as_last with_permalink no_source xkit_view_on_dash_post\"\n\t\t\t\tid=\"post_${data.id}\"\n\t\t\t\tdata-post-id='${data.id}'\n\t\t\t\tdata-root_id='${data.id}'\n\t\t\t\tdata-tumblelog-name='${username}'\n\t\t\t\tdata-reblog-key='${data.reblog_key}'\n\t\t\t\tdata-type='${data.type}'\n\t\t\t>\n\t\t\t\t\t<div class=\"post_wrapper\">\n\t\t\t\t\t\t<div class=\"post_header\">\n\t\t\t\t\t\t\t<div class=\"post_info\">\n\t\t\t\t\t\t\t\t<img src=\"http://api.tumblr.com/v2/blog/${data.blog_name}.tumblr.com/avatar/48\" class=\"xkit-post-archive-avatar\">\n\t\t\t\t\t\t\t\t<span style=\"font-weight:normal; margin-right: 8px;\">Archived from:</span>\n\t\t\t\t\t\t\t\t<a target=\"_BLANK\" href=\"${data.post_url}\">${data.blog_name}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${source_div}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"post_content clearfix\">\n\t\t\t\t\t\t\t<div class=\"post_content_inner clearfix\">\n\t\t\t\t\t\t\t\t<div class=\"post_container\">\n\t\t\t\t\t\t\t\t\t${post_contents}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t${post_tags}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>`;\n\n\t\treturn m_html;\n\n\t},\n\n\tcurrent_post_id: \"\",\n\n\trender_post: function(post_id) {\n\n\t\tvar m_post = XKit.extensions.postarchive.get_from_archive(post_id);\n\t\tif (m_post === false) {\n\t\t\tXKit.window.show(\"Can not fetch post\",\n\t\t\t\t\"Error code: PAC-302\",\n\t\t\t\t\"error\",\n\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-close-message\">OK</div>'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tvar post_obj = \"\";\n\t\tif (m_post.post.substring(0, 11) === \"XKIT-BTOA!!\") {\n\t\t\tvar tmp_dt = m_post.post.substring(11, m_post.post.length);\n\t\t\tpost_obj = JSON.parse(decodeURIComponent(escape(window.atob(tmp_dt))));\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tpost_obj = JSON.parse(m_post.post);\n\t\t\t} catch (e) {\n\t\t\t\tpost_obj = JSON.parse(decodeURIComponent(escape(window.atob(m_post.post))));\n\t\t\t}\n\t\t}\n\n\t\tXKit.extensions.postarchive.current_post_id = post_id;\n\n\t\t$(\"#xkit-postarchive-content\").removeClass(\"xkit-postarchive-no-post-selected\").html(XKit.extensions.postarchive.parse_item(post_obj, \"xenix\"));\n\n\t\t$(\"#xkit-postarchive-remove-this\").removeClass(\"hidden\");\n\t\t$(\"#xkit-postarchive-recategorize-this\").removeClass(\"hidden\");\n\t\t$(\"#xkit-postarchive-rename-this\").removeClass(\"hidden\");\n\n\t\t$(\"#xkit-postarchive-remove-this\").off(\"click\");\n\t\t$(\"#xkit-postarchive-remove-this\").on(\"click\", function() {\n\n\t\t\tXKit.window.show(\"Remove\", \"You sure you want to remove this?\", \"warning\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-remove-item-confirm\\\">Remove</div><div id=\\\"xkit-close-message\\\" class=\\\"xkit-button\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-remove-item-confirm\").click(function() {\n\n\t\t\t\tXKit.extensions.postarchive.remove_from_archive(post_id);\n\t\t\t\tXKit.window.close();\n\t\t\t\tXKit.extensions.postarchive.view();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-rename-this\").off(\"click\");\n\t\t$(\"#xkit-postarchive-rename-this\").on(\"click\", function() {\n\n\t\t\tXKit.window.show(\"Rename This Post\", `<b>Title:</b><input type=\"text\" value=\"${m_post.title}\"maxlength=\"150\" placeholder=\"Enter a title (example: 'hotline phone list')\" class=\"xkit-textbox\" id=\"xkit-postarchive-title\">`, \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-save-new-name\\\">Save</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-save-new-name\").click(function() {\n\n\t\t\t\tvar m_title = $(\"#xkit-postarchive-title\").val();\n\n\t\t\t\tif ($.trim(m_title) === \"\") { XKit.window.close(); }\n\n\t\t\t\tXKit.extensions.postarchive.rename_archived_post(post_id, m_title);\n\n\t\t\t\t$(\".xkit-postarchive-post\").each(function() {\n\n\t\t\t\t\tif ($(this).attr('data-post-id') === post_id) {\n\n\t\t\t\t\t\t$(this).html(m_title);\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tXKit.window.close();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-recategorize-this\").off(\"click\");\n\t\t$(\"#xkit-postarchive-recategorize-this\").on(\"click\", function() {\n\n\t\t\tif (XKit.extensions.postarchive.categories.length === 0) {\n\n\t\t\t\tXKit.window.show(\"No categories\", \"You have no categories. You can add some from the Post Archiver control panel.\", \"warning\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar m_categories = \"\";\n\n\t\t\tif (XKit.extensions.postarchive.categories.length === 0) {\n\n\t\t\t\tm_categories = \"You have no categories. You can add some from XKit Control Panel > Post Archiver > Add Category.\";\n\n\t\t\t} else {\n\n\t\t\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\t\t\tm_categories += `<option value=\"${XKit.extensions.postarchive.categories[i].id}\">${XKit.extensions.postarchive.categories[i].title}</div>`;\n\n\t\t\t\t}\n\n\t\t\t\tm_categories = `<option value=\"\">Uncategorized</option>${m_categories}`;\n\t\t\t\tm_categories = `<select id=\"xkit-postarchive-category\">${m_categories}</select>`;\n\n\t\t\t}\n\n\t\t\tXKit.window.show(\"Recategorize This Post\", `<b>Category:</b>${m_categories}`, \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-save-new-category\\\">Save</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-save-new-category\").click(function() {\n\n\t\t\t\tXKit.extensions.postarchive.recategorize_archived_post(post_id, $(\"#xkit-postarchive-category\").val());\n\n\t\t\t\t// to-do refresh view.\n\t\t\t\tXKit.extensions.postarchive.view(post_id);\n\n\t\t\t\tXKit.window.close();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\"#xkit-postarchive-content\").find(\".post\").css(\"display\", \"block\").css(\"visibility\", \"visible\");\n\n\t\tXKit.tools.add_function(function() {\n\t\t\tTumblr.Events.trigger(\"posts:load\");\n\t\t}, true, \"\");\n\n\t\tXKit.post_listener.check(true);\n\n\t},\n\n\tload_posts: function() {\n\n\t\tvar m_storage = XKit.storage.get(\"postarchive\", \"archived_posts\", \"\");\n\n\t\tif (m_storage !== \"\") {\n\t\t\ttry {\n\t\t\t\tXKit.extensions.postarchive.archived_posts = JSON.parse(m_storage);\n\t\t\t\tconsole.log(` --- Storage loaded successfully.. (${XKit.extensions.postarchive.archived_posts.length} items)`);\n\t\t\t} catch (e) {\n\t\t\t\tXKit.extensions.postarchive.archived_posts = [];\n\t\t\t\tXKit.notifications.add(\"Post Archiver storage error: POSTA-101<br/>Please refresh the page and/or file a bug report.\", \"error\");\n\t\t\t\tconsole.log(` --- Storage Error!! ${e.message}`);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\" --- Storage is empty\");\n\t\t\tXKit.extensions.postarchive.archived_posts = [];\n\t\t}\n\n\t\tm_storage = XKit.storage.get(\"postarchive\", \"categories\", \"\");\n\n\t\tif (m_storage !== \"\") {\n\t\t\ttry {\n\t\t\t\tXKit.extensions.postarchive.categories = JSON.parse(m_storage);\n\t\t\t} catch (e) {\n\t\t\t\tXKit.extensions.postarchive.categories = [];\n\t\t\t}\n\t\t} else {\n\t\t\tXKit.extensions.postarchive.categories = [];\n\t\t}\n\n\t},\n\n\tsave_posts: function() {\n\n\t\ttry {\n\t\t\tXKit.storage.set(\"postarchive\", \"archived_posts\", JSON.stringify(XKit.extensions.postarchive.archived_posts));\n\t\t\tXKit.storage.set(\"postarchive\", \"categories\", JSON.stringify(XKit.extensions.postarchive.categories));\n\t\t} catch (e) {\n\t\t\tXKit.window.show(\"Unable to save data\", `Post Archiver could not save data<br/><br/>Error:<br/>${e.message}`, \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\t\t}\n\t},\n\n\tinit: function() {\n\n\t\t$(document).on(\"click\", \".xkit-postarchive\", function(event) {\n\t\t\tvar post_id = $(this).attr('data-post-id');\n\t\t\tXKit.extensions.postarchive.archive(post_id, this);\n\t\t});\n\n\t},\n\n\tis_post_in_archive: function(post_id) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\t\t\tif (XKit.extensions.postarchive.archived_posts[i].post_id == post_id) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tget_from_archive: function(post_id) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\t\t\tif (XKit.extensions.postarchive.archived_posts[i].post_id == post_id) {\n\t\t\t\treturn XKit.extensions.postarchive.archived_posts[i];\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tremove_from_archive: function(post_id) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\t\t\tif (XKit.extensions.postarchive.archived_posts[i].post_id == post_id) {\n\t\t\t\tXKit.extensions.postarchive.archived_posts.splice(i, 1);\n\t\t\t\tXKit.extensions.postarchive.save_posts();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\trename_archived_post: function(post_id, title) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\t\t\tif (XKit.extensions.postarchive.archived_posts[i].post_id == post_id) {\n\t\t\t\tXKit.extensions.postarchive.archived_posts[i].title = title;\n\t\t\t\tXKit.extensions.postarchive.save_posts();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\trecategorize_archived_post: function(post_id, category) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\t\t\tif (XKit.extensions.postarchive.archived_posts[i].post_id == post_id) {\n\t\t\t\tXKit.extensions.postarchive.archived_posts[i].category = category;\n\t\t\t\tXKit.extensions.postarchive.save_posts();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tupdate_sidebar: function() {\n\n\t\t$(\"#postarchive_view_count\").html(XKit.extensions.postarchive.archived_posts.length);\n\n\t},\n\n\tarchive: function(post_id, obj, in_blog_mode) {\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tif (XKit.interface.where().drafts === true) { XKit.window.show(\"Oops\", \"Unfortunately, Post Archiver does not yet support archiving from the drafts, but I'm working on it. Thank you for your patience.\", \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\"); return; }\n\n\t\tif (XKit.extensions.postarchive.is_post_in_archive(post_id) !== false) {\n\n\t\t\tXKit.window.show(\"Already in archive.\", \"Would you like to remove this post from the archive?\", \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-remove-from-archive\\\">Yes, remove from archive</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-remove-from-archive\").click(function() {\n\n\t\t\t\tXKit.window.close();\n\n\t\t\t\tXKit.extensions.postarchive.remove_from_archive(post_id);\n\n\t\t\t\tif (!in_blog_mode) {\n\n\t\t\t\t\tXKit.interface.completed_control_button(obj, false);\n\n\t\t\t\t\tXKit.notifications.add(\"Post removed from Archive.\", \"ok\");\n\n\t\t\t\t\tXKit.extensions.postarchive.update_sidebar();\n\n\t\t\t\t} else {\n\n\t\t\t\t\t$(obj).removeClass(\"xkit-post-archive-inblog-button-done\");\n\t\t\t\t\tsetTimeout(function() { XKit.iframe.restore();\t}, 300);\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar m_categories = \"\";\n\n\t\tif (XKit.extensions.postarchive.categories.length === 0) {\n\n\t\t\tm_categories = \"You have no categories. You can add some from XKit Control Panel > Post Archiver > Add Category.\";\n\n\t\t} else {\n\n\t\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\t\tm_categories += `<option value=\"${XKit.extensions.postarchive.categories[i].id}\">${XKit.extensions.postarchive.categories[i].title}</div>`;\n\n\t\t\t}\n\n\t\t\tm_categories = `<option value=\"\">Uncategorized</option>${m_categories}`;\n\t\t\tm_categories = `<select id=\"xkit-postarchive-category\">${m_categories}</select>`;\n\n\t\t}\n\n\t\tvar m_title = \"\";\n\t\tif ($(`#post_${post_id}`).length > 0) {\n\n\t\t\tvar dpostobj = $(`#post_${post_id}`);\n\n\t\t\tif ($(dpostobj).find(\".post-title\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".post-title\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".post_title\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".post_title\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".title\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".title\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".reblog-title\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".reblog-title\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".post_body\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".post_body\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".track_name\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".track_name\").text();\n\n\t\t\t} else if ($(dpostobj).find(\".chat_line\").length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find(\".chat_line:first\").text();\n\n\t\t\t} else if ($(dpostobj).find('.reblog-list').length > 0) {\n\n\t\t\t\tm_title = $(dpostobj).find('.reblog-list-item:first .reblog-content').text();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (m_title.length > 30) {\n\t\t\tm_title = `${m_title.substring(0, 29)}...`;\n\t\t}\n\n\t\tXKit.window.show(\"Archive This Post\", `<b>Title:</b><input type=\"text\" value=\"${m_title}\" maxlength=\"150\" placeholder=\"Enter a title (example: 'hotline phone list')\" class=\"xkit-textbox\" id=\"xkit-postarchive-title\"><b>Category:</b><br/>${m_categories}`, \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-save\\\">Save</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t$(\"#xkit-postarchive-save\").click(function() {\n\n\t\t\tvar $save_title = $(\"#xkit-postarchive-title\");\n\t\t\tvar save_title = $save_title.val();\n\n\t\t\tif ($(this).hasClass(\"disabled\")) { return; }\n\n\t\t\tif ($.trim(save_title) === \"\") {\n\t\t\t\t$save_title\n\t\t\t\t\t.css(\"border-color\", \"red\")\n\t\t\t\t\t.attr(\"placeholder\", \"Please enter a title for this post.\")\n\t\t\t\t\t.click(function() {\n\t\t\t\t\t\t$save_title\n\t\t\t\t\t\t\t.removeAttr(\"style\")\n\t\t\t\t\t\t\t.attr(\"placeholder\", \"Enter a title (example: 'hotline phone list')\")\n\t\t\t\t\t\t\t.off(\"click\");\n\t\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar m_category = \"\";\n\n\t\t\tif ($(\"#xkit-postarchive-category\").length > 0) {\n\n\t\t\t\tm_category = $(\"#xkit-postarchive-category\").val();\n\n\t\t\t}\n\n\t\t\tXKit.extensions.postarchive.save_using_api(post_id, obj, save_title, m_category, in_blog_mode);\n\n\t\t});\n\n\t},\n\n\tsave_using_api: function(post_id, obj, title, m_category, in_blog_mode) {\n\n\t\t$(\"#xkit-postarchive-save\").addClass(\"disabled\");\n\n\t\tvar m_post = XKit.interface.find_post(post_id);\n\t\tvar blog_url = m_post.owner;\n\n\t\tif (!blog_url) {\n\t\t\tblog_url = window.location.href.split('%2F')[2].split('.')[0];\n\t\t}\n\n\t\tvar api_url = `http://api.tumblr.com/v2/blog/${blog_url}.tumblr.com/posts/?api_key=${XKit.extensions.postarchive.apiKey}&id=${post_id}`;\n\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: api_url,\n\t\t\tjson: true,\n\t\t\tonerror: function(response) {\n\t\t\t\tXKit.extensions.postarchive.show_error(`<b>Unable to get the blog information.</b><br/>Please try again later.<br/><br/>Error Code: POA-230 <br/><br/>${blog_url}`);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar data = JSON.parse(response.responseText).response;\n\n\t\t\t\t\tvar m_object = {};\n\n\t\t\t\t\tm_object.title = title;\n\n\t\t\t\t\tm_object.post = JSON.stringify(data.posts[0]);\n\n\t\t\t\t\tm_object.post_id = post_id;\n\t\t\t\t\tm_object.date = new Date().getTime();\n\t\t\t\t\tm_object.category = m_category;\n\n\t\t\t\t\tconsole.log(\"Fetched contents, trying to save...\");\n\n\t\t\t\t\tXKit.extensions.postarchive.load_posts();\n\n\t\t\t\t\tsetTimeout(function() {\n\n\t\t\t\t\t\tXKit.extensions.postarchive.archived_posts.push(m_object);\n\t\t\t\t\t\tconsole.log(XKit.extensions.postarchive.archived_posts);\n\t\t\t\t\t\tXKit.extensions.postarchive.save_posts();\n\n\t\t\t\t\t\tif (!in_blog_mode) {\n\n\t\t\t\t\t\t\tXKit.interface.completed_control_button(obj, true);\n\t\t\t\t\t\t\tXKit.notifications.add(\"Post added to Archive.\", \"ok\");\n\t\t\t\t\t\t\tXKit.extensions.postarchive.update_sidebar();\n\t\t\t\t\t\t\tXKit.window.close();\n\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t$(obj).addClass(\"xkit-post-archive-inblog-button-done\");\n\t\t\t\t\t\t\tXKit.window.close();\n\t\t\t\t\t\t\tsetTimeout(function() { XKit.iframe.restore();\t}, 300);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, 1);\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tXKit.extensions.postarchive.show_error(`<b>Unable to read JSON received from API calls.</b><br/>Please try again later.<br/><br/>Error Code: POS-535<br>${e.message}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tdo: function() {\n\n\t\tvar posts = XKit.interface.get_posts(\"xkit-postarchive-done\");\n\n\t\t$(posts).each(function() {\n\n\t\t\t$(this).addClass(\"xkit-postarchive-done\");\n\n\t\t\tvar m_post = XKit.interface.post($(this));\n\n\t\t\tXKit.interface.add_control_button(this, \"xkit-postarchive\", `data-xkit-postarchive-tumblelog-key=\"${m_post.tumblelog_key}\" data-xkit-postarchive-tumblelog-name=\"${m_post.owner}\"`);\n\n\t\t\tif (XKit.extensions.postarchive.is_post_in_archive(m_post.id)) {\n\n\t\t\t\tXKit.interface.completed_control_button($(this).find(\".xkit-interface-control-button.xkit-postarchive\"), true);\n\n\t\t\t}\n\n\t\t});\n\n\t},\n\n\tshow_error: function(message) {\n\n\t\tXKit.window.show(\"Post Archiver encountered an error\", message, \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\n\t},\n\n\tcpanel: function(m_div) {\n\n\t\tXKit.extensions.postarchive.load_posts();\n\n\t\tif ($(\"#xkit-postarchive-custom-panel\").length > 0) {\n\t\t\t// Panel already exists, probably in refresh mode.\n\t\t\t// Remove it first.\n\t\t\t$(\"#xkit-postarchive-custom-panel\").remove();\n\t\t}\n\n\t\tvar cat_list = \"\";\n\n\t\tif (XKit.extensions.postarchive.categories.length === 0) {\n\t\t\tcat_list = \"<div class=\\\"xkit-postarchive-no-categories\\\">You have no categories set.</div>\";\n\t\t} else {\n\n\t\t\tfor (var j = 0; j < XKit.extensions.postarchive.categories.length; j++) {\n\n\t\t\t\tcat_list += `<div class=\"xkit-postarchive-cp-item\" data-id=\"${XKit.extensions.postarchive.categories[j].id}\">${XKit.extensions.postarchive.categories[j].title}</div>`;\n\n\t\t\t}\n\t\t}\n\n\t\tvar m_html =\n\t\t\t`<div id=\"xkit-postarchive-custom-panel\">\n\t\t\t\t<div id=\"xkit-postarchive-custom-panel-toolbar\">\n\t\t\t\t\t<div id=\"xkit-postarchive-add-category\" class=\"xkit-button\">Add new category</div>\n\t\t\t\t</div>\n\t\t\t\t${cat_list}\n\t\t\t</div>`;\n\n\t\t$(m_div).html(m_html);\n\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller({ scroll: 'top' });\n\n\t\t$(\"#xkit-postarchive-add-category\").click(function() {\n\n\t\t\tXKit.window.show(\"New category\", '<b>Category Name:</b><input type=\"text\" maxlength=\"40\" placeholder=\"e.g. Recipes\" class=\"xkit-textbox\" id=\"xkit-postarchive-category-add-title\">', \"question\", '<div class=\"xkit-button default\" id=\"xkit-postarchive-create-category\">Create Category</div><div class=\"xkit-button\" id=\"xkit-close-message\">Cancel</div>');\n\n\t\t\t$(\"#xkit-postarchive-create-category\").click(function() {\n\n\t\t\t\tvar $m_title = $(\"#xkit-postarchive-category-add-title\");\n\t\t\t\tvar m_title = $m_title.val();\n\t\t\t\tfunction complain(problem) {\n\t\t\t\t\t$m_title\n\t\t\t\t\t\t.css(\"border-color\", \"red\")\n\t\t\t\t\t\t.attr(\"placeholder\", problem)\n\t\t\t\t\t\t.val(\"\")\n\t\t\t\t\t\t.click(function() {\n\t\t\t\t\t\t\t$m_title\n\t\t\t\t\t\t\t\t.removeAttr(\"style\")\n\t\t\t\t\t\t\t\t.attr(\"placeholder\", \"e.g. Recipes\")\n\t\t\t\t\t\t\t\t.off(\"click\");\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif ($.trim(m_title) === \"\") {\n\t\t\t\t\tcomplain(\"You can't create a category without a title!\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (XKit.extensions.postarchive.category_exists(m_title)) {\n\t\t\t\t\tcomplain(`A category named ${m_title} already exists!`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar m_obj = {};\n\t\t\t\tm_obj.id = XKit.tools.random_string() + new Date().getTime();\n\t\t\t\tm_obj.title = m_title;\n\n\t\t\t\tXKit.extensions.postarchive.load_posts();\n\n\t\t\t\tXKit.extensions.postarchive.categories.push(m_obj);\n\n\t\t\t\tXKit.extensions.postarchive.save_posts();\n\t\t\t\tXKit.extensions.postarchive.cpanel(m_div);\n\t\t\t\tXKit.window.close();\n\n\t\t\t});\n\n\t\t});\n\n\t\t$(\".xkit-postarchive-cp-item\").click(function() {\n\n\t\t\tvar m_cat_obj = XKit.extensions.postarchive.get_category($(this).attr('data-id'));\n\n\t\t\tif (m_cat_obj === false) {\n\t\t\t\tXKit.window.show(\"Unknown error\",\n\t\t\t\t\t\"Code: PAS-30\",\n\t\t\t\t\t\"error\",\n\t\t\t\t\t'<div class=\"xkit-button default\" id=\"xkit-close-message\">OK</div>'\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tXKit.window.show(\"Edit category\", `<b>Category Name:</b><input type=\"text\" maxlength=\"40\" placeholder=\"eg: Recipes\" class=\"xkit-textbox\" id=\"xkit-postarchive-category-add-title\" value=\"${m_cat_obj.title}\"><br/>If you delete this category, items saved in this category will be marked \"Uncategorized.\"`, \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-save-category\\\">Save Category</div><div class=\\\"xkit-button\\\" id=\\\"xkit-postarchive-delete-category\\\">Delete</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t$(\"#xkit-postarchive-save-category\").click(function() {\n\n\t\t\t\tXKit.extensions.postarchive.load_posts();\n\n\t\t\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\t\t\tif (m_cat_obj.id === XKit.extensions.postarchive.categories[i].id) {\n\n\t\t\t\t\t\tXKit.extensions.postarchive.categories[i].title = $(\"#xkit-postarchive-category-add-title\").val();\n\t\t\t\t\t\tXKit.extensions.postarchive.save_posts();\n\n\t\t\t\t\t\tXKit.window.close();\n\n\t\t\t\t\t\tXKit.extensions.postarchive.cpanel(m_div);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t$(\"#xkit-postarchive-delete-category\").click(function() {\n\n\t\t\t\tXKit.window.show(\"You sure?\", `Delete category <b>\"${m_cat_obj.title}\"</b>?`, \"warning\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-postarchive-delete-category-confirm\\\">Confirm</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\n\n\t\t\t\t$(\"#xkit-postarchive-delete-category-confirm\").click(function() {\n\n\t\t\t\t\tXKit.extensions.postarchive.load_posts();\n\n\t\t\t\t\tfor (var i = 0; i < XKit.extensions.postarchive.archived_posts.length; i++) {\n\n\t\t\t\t\t\tif (typeof XKit.extensions.postarchive.archived_posts[i].category !== \"undefined\") {\n\n\t\t\t\t\t\t\tif (XKit.extensions.postarchive.archived_posts[i].category === m_cat_obj.id) {\n\n\t\t\t\t\t\t\t\tXKit.extensions.postarchive.archived_posts[i].category = \"\";\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var ii = 0; ii < XKit.extensions.postarchive.categories.length; ii++) {\n\n\t\t\t\t\t\tif (m_cat_obj.id === XKit.extensions.postarchive.categories[ii].id) {\n\n\t\t\t\t\t\t\tXKit.extensions.postarchive.categories.splice(ii, 1);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tXKit.extensions.postarchive.save_posts();\n\t\t\t\t\tXKit.extensions.postarchive.cpanel(m_div);\n\t\t\t\t\tXKit.window.close();\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t},\n\n\tget_category: function(id) {\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\tif (id === XKit.extensions.postarchive.categories[i].id) {\n\n\t\t\t\treturn XKit.extensions.postarchive.categories[i];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tcategory_exists: function(title) {\n\n\t\ttitle = title.toLowerCase();\n\n\t\tfor (var i = 0; i < XKit.extensions.postarchive.categories.length; i++) {\n\n\t\t\tif (title === XKit.extensions.postarchive.categories[i].title.toLowerCase()) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\t$(\"#postarchive_ul\").remove();\n\t\tXKit.post_listener.remove(\"postarchive\");\n\n\n\t}\n\n};\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4QzczNEU1QzcyODYxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4QzczNEU1QjcyODYxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+yjqFuwAAAuNJREFUeNrsWs1vEkEUfzPgB0a82AMno1e1J2ts/KgXjT2YeJGbp95MvBhNPGg8+HXQePBg/CO0xmBIRI3btCYWLY0eCC0fIZFdjCgUkEJhC+u0NOkHdDu7O+1kmnn5nRaW9377fm/evGHR9bcgtGEASYCruRGSGeCbAZAZkBmQRSwzsGRPLhg0XxuO+sfVV+wI8HhsiGUGeETPkgCHVQgZDJ1uAwltOQPiESGhCQBbAlJCvCUk+wDnPiB+EfNoZGLXgPASAtnIOA80bJ8YejBipxNdPvLSt7dvzfV9uw7S3F6bz+vNf2suvokdypS2rIgN+JTyDx0r73R5bdztce8nWHnlq3pfLdnMDG43dquYmYPg9HkmGtDKYyPpu/bCIMC275zOhyPZxw6jJ3IKTA20ADgQIFDSt3KzE04IBOMnyw1wEgPGiyuRPRgGBGLHGx0VSWlh9U66EHcSAAZnGSAo1iGUOGdL+srnnw8deidwDQ4t9XbbKNQ0z449Pu8p+uirem442qs3nbomwE4zuIgxUgyVMD2Bd/Gj1QYwcY2dJ5GgtVCO/fVmkUr6mZuZ0h8mfp0W8UpU5uBj4vSG0aul0Df1KSunzDLQRnom+v3XPZPoZ/Xs+8QgADB0ip5/Ybm1ciG4dHjU5z3TZf9hNAMxj1bWWZ9Or//Z1f5Vp80vxjferbQM+JAc8Pf+3b16t0NsQruRLeuUGx561xgvdOPu6Ng2UYEsL0rqRIf0g5PaM8pfsOp63SW26yhIg0wx9SN7e1n6jYySumhpdad3bbYKdc4+9Iioj3KV0bb0leSBum7tdguuTQq864kaJYiEleTZ+nw+ol77XbG8ttC7dtPPlFanT1IMoamefJXB2IqZDPU2JvFCjc38bvIjFkZKjv/HmrjeRAkxNG4SYngizyADV/oMsTPA0UwzIAIBvK0JgAgETNT1ehKENuHfF3KL/sKQ+ASElxACSUAS2KQWIYb9F2AArvzPhmFrSFwAAAAASUVORK5CYII=","css":"#xkit-postarchive-background {\n\n\tposition: fixed;\n\ttop: 0; left: 0;\n\tbackground: rgba(0,0,0,0.67);\n\twidth: 100%;\n\tz-index: 100000;\n\theight: 100%;\n\n}\n\n.xkit-post-archive-avatar {\n\t/* margin-left: 8px; */\n\tmargin-right: 7px;\n\tvertical-align: middle;\n\tborder-radius: 3px;\n\tdisplay: inline-block;\n\tmargin-bottom: 3px;\n}\n\n#postarchive_view:after {\n\tbackground: no-repeat 0px 45% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEM3MzRFNUY3Mjg2MTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEM3MzRFNjA3Mjg2MTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QzczNEU1RDcyODYxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QzczNEU1RTcyODYxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnWNT5cAAADASURBVHjaYmRAA////0fmZjNggqtAfADGYWRkhEswMVARjBDDGLFEgBWQ4oZy1bDo+QjEL6Hs68AIeAKTYMGi+D4QB2KzCAr4ofg5ED8l5E2QohMEfPQdiHeCPEJMmJ0D4od4DNsNxF9JiYA9QPwZi/hpIH5Mamz+AOJdQPwXSewJ1DDssQmMPeQsMxWLGgMgtgbib0C8EkpjzXIsRCSfC0AsCcSXsRiEAliITI/b6Z4DWHD5f5hldLSSlSIAEGAAoNcs9y8b6dQAAAAASUVORK5CYII=) !important;\n\tcontent: \"\\54\";\n\tfont-size: 0;\n\tline-height: 37px;\n\twidth: 20px;\n}\n\n.xkit-postarchive-cat-separator {\n\tborder-bottom: 1px solid rgb(200,200,200);\n\theight: 26px;\n\tline-height: 26px;\n\tbackground: #f4ffe8 no-repeat 5px 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAACZ3F9/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTQ0NUQ3NjQ3Mjg4MTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjlFNzM3RTg3MzM1MTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NDQ1RDc2MjcyODgxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5NDQ1RDc2MzcyODgxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Psb/oUAAAABhSURBVHjaYvr//z8DOZiFAQ1EdjD+B1KM6OLLK/6j8JkYsIP/DAQAEx65/+RqxKuZkEacmonRiFUzURqBIZpOskaQJmAUzSJJIy5NeDXi04RTIyFNkODCTIdpxKRVgAADALDQb7Gw7aKlAAAAAElFTkSuQmCC');\n\ttext-align: center;\n\tfont-size: 13px;\n\tfont-weight: bold;\n\tcolor: #55871e;\n\ttext-shadow: 0px 1px 0px white;\n\tposition: relative;\n\tcursor: pointer;\n}\n\n.xkit-postarchive-cat-separator.xkit-pac-opened {\n\n\tbackground-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAACZ3F9/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjlFNzM3RUI3MzM1MTFFMzkxNjc4NTlFOTA5MTY1RjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjlFNzM3RUM3MzM1MTFFMzkxNjc4NTlFOTA5MTY1RjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyOUU3MzdFOTczMzUxMUUzOTE2Nzg1OUU5MDkxNjVGNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyOUU3MzdFQTczMzUxMUUzOTE2Nzg1OUU5MDkxNjVGNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrxkghcAAABbSURBVHjaYvz//z8DOYCJgUxAf40sICKyg5Fojy6v+M8ItxHISSdSUzqKU4E2ziKkGSQPUofhR3ya0TVhBA42zdg0YQ1VZM24NIEBKOXgwGl45BgY6Z7kAAIMAKBeWWFB0YUEAAAAAElFTkSuQmCC');\n\n}\n\n.xkit-postarchive-cat-separator:hover {\n\n\tbackground-color: #e6f0da;\n\n}\n\n.xkit-postarchive-cat-separator-title {\n\n\tposition: absolute;\n\ttop: 0; left: 22px;\n\ttext-align: left;\n\twidth: 195px;\n\n}\n\n.xkit-postarchive-no-posts-index {\n\tfont-size: 12px;\n\tpadding: 5px;\n\ttext-align: center;\n\tborder-bottom: 1px solid rgb(200,200,200);\n\tcolor: rgb(130,130,130);\n}\n\n.xkit-postarchive-cp-item {\n\tpadding: 10px 16px 10px 16px;\n\tborder-bottom: 1px dotted rgb(190,190,190);\n\tcursor: pointer;\n}\n\n.xkit-postarchive-cp-item:hover {\n\tbackground: rgb(240,240,240);\n}\n\n#xkit-postarchive-category {\n\twidth: 100%;\n\theight: 28px;\n\tmargin-top: 5px;\n}\n\n.xkit-postarchive-no-categories {\n\ttext-align: center;\n\tpadding-top: 20px;\n\tcolor: rgb(140,140,140);\n\tfont-size: 14px;\n}\n\n#xkit-postarchive-custom-panel-toolbar {\n\tbackground: rgb(245,245,245);\n\tpadding: 3px 15px;\n\tborder-bottom: 1px solid rgb(190,190,190);\n}\n\n#xkit-postarchive-remove-this {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: -91px;\n\twidth: 80px;\n\tfont-size: 11px;\n\ttext-align: center;\n\theight: 30px;\n\tline-height: 30px;\n\tborder-radius: 4px;\n\tcursor: pointer;\n\tpadding: 0;\n}\n\n#xkit-postarchive-recategorize-this {\n\tposition: absolute;\n\ttop: 36px;\n\tleft: -91px;\n\twidth: 80px;\n\tfont-size: 11px;\n\ttext-align: center;\n\theight: 30px;\n\tline-height: 30px;\n\tborder-radius: 4px;\n\tcursor: pointer;\n\tpadding: 0;\n}\n\n#xkit-postarchive-rename-this {\n\tposition: absolute;\n\ttop: 72px;\n\tleft: -91px;\n\twidth: 80px;\n\tfont-size: 11px;\n\ttext-align: center;\n\theight: 30px;\n\tline-height: 30px;\n\tborder-radius: 4px;\n\tcursor: pointer;\n\tpadding: 0;\n}\n\n#xkit-postarchive-container {\n\n\tposition: absolute;\n\ttop: 91px; left: 50%;\n\twidth: 800px;\n\tmargin-left: -346px;\n\tz-index: 200000;\n\n}\n\n#xkit-postarchive-search {\n\n\tposition: absolute;\n\tright: 16px;\n\ttop: 275px;\n\twidth: 230px;\n\tborder: 0px;\n\theight: 29px;\n\tpadding: 5px 10px 5px 30px;\n\tbox-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tborder-radius: 6px;\n\tbackground: white no-repeat 10px 50% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjMxRTZFMEZBODY4MTFFMkFDMDJFMzk3N0RDMDc2NDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjMxRTZFMTBBODY4MTFFMkFDMDJFMzk3N0RDMDc2NDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzFFNkUwREE4NjgxMUUyQUMwMkUzOTc3REMwNzY0NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzFFNkUwRUE4NjgxMUUyQUMwMkUzOTc3REMwNzY0NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnjwe50AAADhSURBVHjalJExEoIwEEVDvAAdpUeQhhk7OQKeAO2k4wh6AztK4w04AvYUUNp5BDwB/sz8MGsGh/HP/MmyyctulmAcR2VVVdUOSwnHcAg38LUoiofyFFgIQI7YqHkZgEeZWEVRZCvU8ACfcGCfJMmlbVtbKYO3iDvkng7SbMmqBHB3G2wr4+dZVtJ8g5KAB3bujIRC9ac0p+Sm9yXkNqzy8iE3tVqCiNdiz8yN/Ib4wFzHVb7DTjbFG/sJ4s25+LmKLRnmQglO0C/xXY0AY700KbaUErDVh8VK3mAGXPL+CDAAWp9eZGKACQQAAAAASUVORK5CYII=);\n\n}\n\n#xkit-postarchive-export {\n\n\tposition: absolute;\n\tright: 12px;\n\ttop: 310px;\n\twidth: 230px;\n\tborder: 0px;\n\theight: 29px;\n\tpadding: 5px 10px 5px 30px;\n\tbox-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tborder-radius: 6px;\n\tbackground: white;\n\n}\n\n#xkit-postarchive-import {\n\n\tposition: absolute;\n\tright: 12px;\n\ttop: 350px;\n\twidth: 230px;\n\tborder: 0px;\n\theight: 29px;\n\tpadding: 5px 10px 5px 30px;\n\tbox-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tborder-radius: 6px;\n\tbackground: white;\n\n}\n\n#xkit-postarchive-sidebar {\n\n\twidth: 230px;\n\theight: 265px;\n\tbackground: rgb(255,255,255);\n\tborder-radius: 6px;\n\tbox-shadow: 0px 1px 3px rgba(0,0,0,0.44);\n\tposition: absolute;\n\ttop: 0; right: 16px;\n\toverflow: hidden;\n\n}\n\n#xkit-postarchive-sidebar * {\n\n  \t-moz-user-select: none;\n  \t-webkit-user-select: none;\n  \t-ms-user-select: none;\n\n}\n\n#xkit-postarchive-content {\n\n\tposition: absolute;\n\ttop: 0; left: 0px;\n\n}\n\n#xkit-postarchive-content.xkit-postarchive-no-post-selected {\n\n\tbackground: rgba(245,245,245,0.22);\n\twidth: 540px;\n\tborder-radius: 6px;\n\tpadding: 170px 0px;\n\ttext-align: center;\n\tcolor: white;\n\tborder: 1px dashed white;\n\ttext-shadow: 0px -1px 0px black;\n\n}\n\n#xkit-postarchive-not-found {\n\ttext-align: center;\n\tpadding-top: 120px;\n\tcolor: rgb(140,140,140);\n}\n\n.xkit-postarchive-fix-margins {\n\n\tpadding: 0 !important; margin: 0 !important;\n\n}\n\n#xkit-postarchive-sidebar .xkit-postarchive-post.xkit-this-post-is-pretty-hidden,\n.xkit-postarchive-cat-separator.xkit-this-post-is-pretty-hidden,\n.xkit-postarchive-no-posts-index.xkit-this-post-is-pretty-hidden,\n.xkit-postarchive-hidden-category-item,\n#xkit-postarchive-rename-this.hidden,\n#xkit-postarchive-remove-this.hidden,\n#xkit-postarchive-recategorize-this.hidden {\n\tdisplay: none;\n}\n\n#xkit-postarchive-sidebar .xkit-postarchive-post {\n\n\tpadding: 6px 11px;\n\tborder-bottom: 1px solid rgb(210,210,210);\n\tfont-size: 13px;\n\tcursor: pointer;\n\tcolor: rgb(90,90,90);\n\n\ttext-overflow:ellipsis;\n\twhite-space:nowrap;\n\toverflow: hidden;\n\n}\n\n#xkit-postarchive-sidebar .xkit-postarchive-post:hover {\n\n\tcolor: black;\n\tbackground: rgb(240,240,240);\n\n}\n\n#xkit-postarchive-sidebar .xkit-postarchive-post.selected {\n\n\tcolor: black !important;\n\tbackground: rgb(220,220,220) !important;\n\tbox-shadow: inset 0px 1px 2px rgba(0,0,0,0.22);\n\n}\n\n#postarchive_view {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n#xkit-postarchive-content .post_full.is_photoset .photoset .photoset_row,\n#xkit-postarchive-content .post_full.is_photo .photoset .photoset_row {\n\twidth: 540px;\n}\n\n#xkit-postarchive-content .post_tags {\n\tmargin-bottom: 15px;\n}\n","title":"Post Archiver","description":"Never lose a post again.","developer":"new-xkit","version":"1.0.6","details":"Post Archiver lets you save posts to your XKit.<br><br>Found a good recipe? Think those hotline numbers on that signal boost post might come in handy in the future?<br><br>Click on the save button, then click on the My Archive button on your sidebar anytime to access those posts. You can also name and categorize posts.","frame":"false","beta":"false","slow":"false"}