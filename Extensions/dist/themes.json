{"id":"themes","script":"//* TITLE Themes **//\n//* VERSION 0.1.3 **//\n//* DESCRIPTION Themes for your dashboard **//\n//* DETAILS This extension allows you to install themes from the XKit Theme Gallery onto your dashboard. New themes are added regularly, and if you are good with CSS, send an ask to xkit-dev.tumblr.com to get your theme added here! **//\n//* DEVELOPER STUDIOXENIX **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.themes = new Object({\n\n\trunning: false,\n\tcurrent_theme: \"\",\n\tgallery_themes_file: [],\n\tgallery_themes_contents: [],\n\tgallery_themes_version: [],\n\tm_theme_count: 0,\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (!XKit.interface.is_tumblr_page()) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis.current_theme = XKit.storage.get(\"themes\", \"my_theme\", \"\");\n\t\tif (typeof this.current_theme === \"undefined\") {\n\t\t\tthis.current_theme = \"\";\n\t\t}\n\n\t\tXKit.tools.init_css(\"themes\");\n\n\t\tif (this.current_theme !== \"\") {\n\t\t\tif (typeof XKit.extensions.yahoo !== \"undefined\") {\n\t\t\t\tif (XKit.extensions.yahoo.running) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.load_theme();\n\t\t}\n\n\n\t},\n\n\tcpanel_add: function(obj) {\n\n\t\tvar m_class = \"\";\n\t\tif (obj.file === XKit.extensions.themes.current_theme) {\n\t\t\tm_class = \"selected\";\n\t\t}\n\n\t\tXKit.extensions.themes.gallery_themes_file.push(obj.file);\n\t\tXKit.extensions.themes.gallery_themes_contents.push(obj.contents);\n\t\tXKit.extensions.themes.gallery_themes_version.push(obj.version);\n\n\t\tvar m_html = \"<div class=\\\"xkit-theme-obj \" + m_class + \"\\\" data-theme-id=\\\"\" + obj.file + \"\\\">\" +\n\t\t\t\t\t\"<div class=\\\"xkit-theme-title\\\">\" + obj.name + \"</div>\" +\n\t\t\t\t\t\"<div class=\\\"xkit-theme-description\\\">\" + obj.description + \"</div>\" +\n\t\t\t\t\t\"<div class=\\\"xkit-theme-developer\\\">by \" + obj.developer + \"</div>\" +\n\t\t\t\t\"</div>\";\n\t\t$(\"#xkit-themes-theme-list\").append(m_html);\n\t\tXKit.extensions.themes.m_theme_count++;\n\n\t},\n\n\treplace_all: function(string, find, replace) {\n\n\t\tfind = find.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n\t\treturn string.replace(new RegExp(find, 'g'), replace);\n\n\t},\n\n\tload_theme: function() {\n\n\t\t$(\"#xkit-themes-user-theme\").remove();\n\t\tvar m_file_contents = XKit.storage.get(\"themes\", \"my_theme_contents\", \"\");\n\n\t\tm_file_contents = XKit.extensions.themes.replace_all(m_file_contents, \"#content\", \".l-content\");\n\t\tm_file_contents = XKit.extensions.themes.replace_all(m_file_contents, \"#header\", \".l-header\");\n\n\t\t$(\"body\").append(\"<style id=\\\"xkit-themes-user-theme\\\">\" + m_file_contents + \"</style>\");\n\n\t},\n\n\tload_gallery_theme: function(theme_name) {\n\n\t\t// Unload the previous theme if loaded.\n\t\t$(\"#xkit-themes-user-theme\").remove();\n\n\t\tXKit.storage.set(\"themes\", \"my_theme\", theme_name);\n\n\t\t// Stop if default theme.\n\t\tif (theme_name === \"\") { return; }\n\n\t\tvar m_index = XKit.extensions.themes.gallery_themes_file.indexOf(theme_name);\n\t\tif (m_index === -1) {\n\t\t\tXKit.storage.set(\"themes\", \"my_theme\", \"\");\n\t\t\tXKit.window.show(\"Error\", \"Unable to load theme.\", \"error\", '<div class=\"xkit-button\" id=\"xkit-close-message\">Okay</div>');\n\t\t\treturn;\n\t\t}\n\n\t\tXKit.storage.set(\"themes\", \"my_theme_version\", XKit.extensions.themes.gallery_themes_version[m_index]);\n\n\t\t// Voila!\n\t\tXKit.storage.set(\"themes\", \"my_theme_contents\", XKit.extensions.themes.gallery_themes_contents[m_index]);\n\t\tXKit.extensions.themes.load_theme();\n\n\t},\n\n\tcpanel: function(obj) {\n\n\t\tif (typeof XKit.extensions.yahoo !== \"undefined\") {\n\t\t\tif (XKit.extensions.yahoo.running === true) {\n\t\t\t\tvar yahoo_html = \"<div id=\\\"xkit-themes-loading\\\"><b>Yoohoo is on</b><br/><small>Please disable the \\\"Yoohoo!\\\" before running this extension.</small></div>\";\n\t\t\t\t$(obj).html(yahoo_html);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar m_html = \"<div id=\\\"xkit-themes-loading\\\"><b>Loading theme gallery</b><br/><small>Please wait, I'm fetching the latest themes for you.</small></div>\";\n\t\t$(obj).html(m_html);\n\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller({ scroll: 'top' });\n\n\t\tXKit.download.page(\"themes/index.php\", function(mdata) {\n\n\t\t\tif (mdata.server_down === true) {\n\n\t\t\t\t$(\"#xkit-themes-loading\").html(\"<b>Server unreachable</b><br/><small>Please try again later.</small>\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$(\"#xkit-themes-loading\").remove();\n\t\t\tXKit.extensions.themes.m_theme_count = 0;\n\t\t\t$(obj).html(\"<div id=\\\"xkit-themes-theme-list\\\"></div>\");\n\n\t\t\t// Create default theme object:\n\t\t\tvar def_theme = {\n\t\t\t\t\"name\": \"Tumblr Default\",\n\t\t\t\t\"version\": \"1\",\n\t\t\t\t\"developer\": \"Tumblr, Inc.\",\n\t\t\t\t\"file\": \"\",\n\t\t\t\t\"description\": \"The standard Tumblr theme\"\n\t\t\t};\n\t\t\tXKit.extensions.themes.cpanel_add(def_theme);\n\n\t\t\tfor (var theme in mdata.themes) {\n\t\t\t\tXKit.extensions.themes.cpanel_add(mdata.themes[theme]);\n\t\t\t}\n\n\t\t\t$(\".xkit-theme-obj\").click(function() {\n\n\t\t\t\tif ($(this).hasClass(\"selected\") === true) { return; }\n\t\t\t\t$(\".xkit-theme-obj.selected\").removeClass(\"selected\");\n\t\t\t\tXKit.extensions.themes.load_gallery_theme($(this).attr('data-theme-id'));\n\t\t\t\t$(this).addClass(\"selected\");\n\n\t\t\t});\n\n\t\t\tif (XKit.extensions.themes.m_theme_count >= 3) {\n\t\t\t\t$(\".xkit-theme-obj:last-child\").css(\"border-bottom\", \"0\");\n\t\t\t}\n\n\t\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\n\t\t\t$(\"#xkit-extensions-panel-right\").nanoScroller({ scroll: 'top' });\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tXKit.tools.remove_css(\"themes\");\n\t\t$(\"#xkit-themes-user-theme\").remove();\n\t\tthis.running = false;\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUY5N0NCN0REMEVGMTFFMkIzMzlFNEI5QzIwNDI2MDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUY5N0NCN0VEMEVGMTFFMkIzMzlFNEI5QzIwNDI2MDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRjk3Q0I3QkQwRUYxMUUyQjMzOUU0QjlDMjA0MjYwMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRjk3Q0I3Q0QwRUYxMUUyQjMzOUU0QjlDMjA0MjYwMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PubDIKEAAAYcSURBVHjaZFbfi1Vl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","css":"#xkit-themes-loading {\n\tfont-size: 17px;\n\tcolor: rgb(120,120,120);\n\tpadding: 30px;\n\ttext-align: center;\n\tmargin-top: 40px;\n}\n\n.xkit-theme-obj {\n\tborder-bottom: 1px solid rgb(190,190,190);\n\tposition: relative;\n\tpadding: 8px 15px 8px 30px;\n\tfont-size: 13px;\n\tbackground-repeat: no-repeat;\n\tbackground-position: 11px 11px;\n\tcursor: pointer;\n}\n\n.xkit-theme-obj.selected {\n\tbackground-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAPElEQVQYV2NkIBIwEqHuP1ANIyGFYEUgw/AphCtCV4gsgaIIl0IMRdgU4nQOshtBJpkA8VlsIUHI13A9AJekCgr1mBZRAAAAAElFTkSuQmCC');\n}\n\n.xkit-theme-obj:hover {\n\tbackground-color: rgb(245,245,245);\n}\n\n.xkit-theme-obj:active {\n\tbackground-color: rgb(235,235,235);\n}\n\n.xkit-theme-title {\n\tfont-weight: bold;\n}\n\n.xkit-theme-description {\n\tcolor: rgb(80,80,80);\n}\n\n.xkit-theme-developer {\n\tfont-size: 11px;\n\tcolor: rgb(130,130,130);\n}","title":"Themes","description":"Themes for your dashboard","developer":"STUDIOXENIX","version":"0.1.3","details":"This extension allows you to install themes from the XKit Theme Gallery onto your dashboard. New themes are added regularly, and if you are good with CSS, send an ask to xkit-dev.tumblr.com to get your theme added here!","frame":"false","beta":"false","slow":"false"}